"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2063],{3411:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(7378),i=n(7140),a="tabItem_wHwb";function o(e){var t=e.children,n=e.hidden,o=e.className;return r.createElement("div",{role:"tabpanel",className:(0,i.Z)(a,o),hidden:n},t)}},2453:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(2685),i=n(7378),a=n(7140),o=n(362),l=n(56),u=n(5720),s=n(9169),p="tabList_J5MA",c="tabItem_l0OV";function d(e){var t,n,o=e.lazy,d=e.block,m=e.defaultValue,f=e.values,y=e.groupId,g=e.className,b=i.Children.map(e.children,(function(e){if((0,i.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),v=null!=f?f:b.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),h=(0,l.l)(v,(function(e,t){return e.value===t.value}));if(h.length>0)throw new Error('Docusaurus error: Duplicate values "'+h.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var k=null===m?m:null!=(t=null!=m?m:null==(n=b.find((function(e){return e.props.default})))?void 0:n.props.value)?t:b[0].props.value;if(null!==k&&!v.some((function(e){return e.value===k})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+k+'" but none of its children has the corresponding value. Available values are: '+v.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var x=(0,u.U)(),w=x.tabGroupChoices,j=x.setTabGroupChoices,T=(0,i.useState)(k),E=T[0],O=T[1],N=[],S=(0,s.o5)().blockElementScrollPositionUntilNextRender;if(null!=y){var C=w[y];null!=C&&C!==E&&v.some((function(e){return e.value===C}))&&O(C)}var A=function(e){var t=e.currentTarget,n=N.indexOf(t),r=v[n].value;r!==E&&(S(t),O(r),null!=y&&j(y,String(r)))},I=function(e){var t,n=null;switch(e.key){case"ArrowRight":var r,i=N.indexOf(e.currentTarget)+1;n=null!=(r=N[i])?r:N[0];break;case"ArrowLeft":var a,o=N.indexOf(e.currentTarget)-1;n=null!=(a=N[o])?a:N[N.length-1]}null==(t=n)||t.focus()};return i.createElement("div",{className:(0,a.Z)("tabs-container",p)},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":d},g)},v.map((function(e){var t=e.value,n=e.label,o=e.attributes;return i.createElement("li",(0,r.Z)({role:"tab",tabIndex:E===t?0:-1,"aria-selected":E===t,key:t,ref:function(e){return N.push(e)},onKeyDown:I,onFocus:A,onClick:A},o,{className:(0,a.Z)("tabs__item",c,null==o?void 0:o.className,{"tabs__item--active":E===t})}),null!=n?n:t)}))),o?(0,i.cloneElement)(b.filter((function(e){return e.props.value===E}))[0],{className:"margin-top--md"}):i.createElement("div",{className:"margin-top--md"},b.map((function(e,t){return(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==E})}))))}function m(e){var t=(0,o.Z)();return i.createElement(d,(0,r.Z)({key:String(t)},e))}},3709:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return p},default:function(){return y},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return m}});var r=n(2685),i=n(1244),a=(n(7378),n(5318)),o=n(3411),l=n(2453),u=["components"],s={id:"code-splitting",title:"Code Splitting",sidebar_label:"Code Splitting",hide_title:!0,description:"RTK Query > Usage > Code Splitting: dynamic injection of endpoints"},p=void 0,c={unversionedId:"rtk-query/usage/code-splitting",id:"rtk-query/usage/code-splitting",title:"Code Splitting",description:"RTK Query > Usage > Code Splitting: dynamic injection of endpoints",source:"@site/../docs/rtk-query/usage/code-splitting.mdx",sourceDirName:"rtk-query/usage",slug:"/rtk-query/usage/code-splitting",permalink:"/rtk-query/usage/code-splitting",draft:!1,tags:[],version:"current",lastUpdatedAt:1716193556,formattedLastUpdatedAt:"May 20, 2024",frontMatter:{id:"code-splitting",title:"Code Splitting",sidebar_label:"Code Splitting",hide_title:!0,description:"RTK Query > Usage > Code Splitting: dynamic injection of endpoints"},sidebar:"docs",previous:{title:"Streaming Updates",permalink:"/rtk-query/usage/streaming-updates"},next:{title:"Code Generation",permalink:"/rtk-query/usage/code-generation"}},d={},m=[],f={toc:m};function y(e){var t=e.components,n=(0,i.Z)(e,u);return(0,a.kt)("wrapper",(0,r.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"code-splitting"},"Code Splitting"),(0,a.kt)("p",null,"RTK Query makes it possible to trim down your initial bundle size by allowing you to inject additional endpoints after you've set up your initial service definition. This can be very beneficial for larger applications that may have ",(0,a.kt)("em",{parentName:"p"},"many")," endpoints."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"injectEndpoints")," accepts a collection of endpoints, as well as an optional ",(0,a.kt)("inlineCode",{parentName:"p"},"overrideExisting")," parameter."),(0,a.kt)("p",null,"Calling ",(0,a.kt)("inlineCode",{parentName:"p"},"injectEndpoints")," will inject the endpoints into the original API, but also give you that same API with correct types for these endpoints back. (Unfortunately, it cannot modify the types for the original definition.)"),(0,a.kt)("p",null,"A typical approach would be to have one empty central API slice definition:"),(0,a.kt)(l.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,a.kt)(o.Z,{value:"ts",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="Basic setup"',title:'"Basic','setup"':!0},"// Or from '@reduxjs/toolkit/query' if not using the auto-generated hooks\nimport { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react'\n\n// initialize an empty api service that we'll inject endpoints into later as needed\nexport const emptySplitApi = createApi({\n  baseQuery: fetchBaseQuery({ baseUrl: '/' }),\n  endpoints: () => ({}),\n})\n"))),(0,a.kt)(o.Z,{value:"js",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Basic setup"',title:'"Basic','setup"':!0},"// Or from '@reduxjs/toolkit/query' if not using the auto-generated hooks\nimport { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react'\n\n// initialize an empty api service that we'll inject endpoints into later as needed\nexport const emptySplitApi = createApi({\n  baseQuery: fetchBaseQuery({ baseUrl: '/' }),\n  endpoints: () => ({}),\n})\n")))),(0,a.kt)("p",null,"and then inject the api endpoints in other files and export them from there - that way you will be sure to always import the endpoints in a way that they are definitely injected."),(0,a.kt)(l.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,a.kt)(o.Z,{value:"ts",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="Injecting & exporting additional endpoints"',title:'"Injecting',"&":!0,exporting:!0,additional:!0,'endpoints"':!0},"import { emptySplitApi } from './emptySplitApi'\n\nconst extendedApi = emptySplitApi.injectEndpoints({\n  endpoints: (build) => ({\n    example: build.query({\n      query: () => 'test',\n    }),\n  }),\n  overrideExisting: false,\n})\n\nexport const { useExampleQuery } = extendedApi\n"))),(0,a.kt)(o.Z,{value:"js",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Injecting & exporting additional endpoints"',title:'"Injecting',"&":!0,exporting:!0,additional:!0,'endpoints"':!0},"import { emptySplitApi } from './emptySplitApi'\n\nconst extendedApi = emptySplitApi.injectEndpoints({\n  endpoints: (build) => ({\n    example: build.query({\n      query: () => 'test',\n    }),\n  }),\n  overrideExisting: false,\n})\n\nexport const { useExampleQuery } = extendedApi\n")))),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"If you inject an endpoint that already exists and don't explicitly specify ",(0,a.kt)("inlineCode",{parentName:"p"},"overrideExisting: true"),", the endpoint\nwill not be overridden. In development mode, you will get a warning about this if ",(0,a.kt)("inlineCode",{parentName:"p"},"overrideExisting")," is set to ",(0,a.kt)("inlineCode",{parentName:"p"},"false"),",\nand an error will be throw if set to ",(0,a.kt)("inlineCode",{parentName:"p"},"'throw'"),".")))}y.isMDXComponent=!0},5318:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var r=n(7378);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=r.createContext({}),s=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(u.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,u=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=s(n),m=i,f=d["".concat(u,".").concat(m)]||d[m]||c[m]||a;return n?r.createElement(f,o(o({ref:t},p),{},{components:n})):r.createElement(f,o({ref:t},p))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,o=new Array(a);o[0]=d;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var s=2;s<a;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);