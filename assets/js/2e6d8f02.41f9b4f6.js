"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["29"],{6998:function(e,n,t){t.r(n),t.d(n,{default:()=>u,frontMatter:()=>s,metadata:()=>i,assets:()=>l,toc:()=>c,contentTitle:()=>o});var i=JSON.parse('{"id":"rtk-query/api/created-api/overview","title":"Overview","description":"&nbsp;","source":"@site/../docs/rtk-query/api/created-api/overview.mdx","sourceDirName":"rtk-query/api/created-api","slug":"/rtk-query/api/created-api/overview","permalink":"/rtk-query/api/created-api/overview","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1747273418000,"frontMatter":{"id":"overview","title":"Overview","sidebar_label":"API Slice Overview","hide_title":true},"sidebar":"docs","previous":{"title":"setupListeners","permalink":"/rtk-query/api/setupListeners"},"next":{"title":"Redux Integration","permalink":"/rtk-query/api/created-api/redux-integration"}}'),a=t("4246"),r=t("980");t("8049"),t("5181");let s={id:"overview",title:"Overview",sidebar_label:"API Slice Overview",hide_title:!0},o="Generated API Slices",l={},c=[{value:"API Slice Overview",id:"api-slice-overview",level:2},{value:"Redux Integration",id:"redux-integration",level:2},{value:"Endpoints",id:"endpoints",level:2},{value:"Code Splitting and Generation",id:"code-splitting-and-generation",level:2},{value:"API Slice Utilities",id:"api-slice-utilities",level:2},{value:"Internal Actions",id:"internal-actions",level:2},{value:"React Hooks",id:"react-hooks",level:2}];function d(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"\xa0"}),"\n",(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"generated-api-slices",children:"Generated API Slices"})}),"\n",(0,a.jsx)(n.h2,{id:"api-slice-overview",children:"API Slice Overview"}),"\n",(0,a.jsxs)(n.p,{children:["When you call ",(0,a.jsx)(n.a,{href:"/rtk-query/api/createApi",children:(0,a.jsx)(n.code,{children:"createApi"})}),', it automatically generates and returns an API service "slice" object structure containing Redux logic you can use to interact with the endpoints you defined. This slice object includes a reducer to manage cached data, a middleware to manage cache lifetimes and subscriptions, and selectors and thunks for each endpoint. If you imported ',(0,a.jsx)(n.code,{children:"createApi"})," from the React-specific entry point, it also includes auto-generated React hooks for use in your components."]}),"\n",(0,a.jsx)(n.p,{children:"This section documents the contents of that API structure, with the different fields grouped by category. The API types and descriptions are listed on separate pages for each category."}),"\n",(0,a.jsxs)(n.admonition,{type:"tip",children:[(0,a.jsxs)(n.p,{children:["Typically, you should only have one API slice per base URL that your application needs to communicate with. For example, if your site fetches data from both ",(0,a.jsx)(n.code,{children:"/api/posts"})," and ",(0,a.jsx)(n.code,{children:"/api/users"}),", you would have a single API slice with ",(0,a.jsx)(n.code,{children:"/api/"})," as the base URL, and separate endpoint definitions for ",(0,a.jsx)(n.code,{children:"posts"})," and ",(0,a.jsx)(n.code,{children:"users"}),". This allows you to effectively take advantage of ",(0,a.jsx)(n.a,{href:"/rtk-query/usage/automated-refetching",children:"automated re-fetching"})," by defining ",(0,a.jsx)(n.a,{href:"/rtk-query/usage/automated-refetching#tags",children:"tag"})," relationships across endpoints."]}),(0,a.jsx)(n.p,{children:"This is because:"}),(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Automatic tag invalidation only works within a single API slice. If you have multiple API slices, the automatic invalidation won't work across them."}),"\n",(0,a.jsxs)(n.li,{children:["Every ",(0,a.jsx)(n.code,{children:"createApi"})," call generates its own middleware, and each middleware added to the store will run checks against every dispatched action. That has a perf cost that adds up. So, if you called ",(0,a.jsx)(n.code,{children:"createApi"})," 10 times and added 10 separate API middleware to the store, that will be noticeably slower perf-wise."]}),"\n"]}),(0,a.jsxs)(n.p,{children:["For maintainability purposes, you may wish to split up endpoint definitions across multiple files, while still maintaining a single API slice which includes all of these endpoints. See ",(0,a.jsx)(n.a,{href:"/rtk-query/usage/code-splitting",children:"code splitting"})," for how you can use the ",(0,a.jsx)(n.code,{children:"injectEndpoints"})," property to inject API endpoints from other files into a single API slice definition."]})]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",metastring:'title="API Slice Contents" no-transpile',children:"const api = createApi({\n  baseQuery: fetchBaseQuery({ baseUrl: '/' }),\n  endpoints: (build) => ({\n    // ...\n  }),\n})\n\ntype Api = {\n  // Redux integration\n  reducerPath: string\n  reducer: Reducer\n  middleware: Middleware\n\n  // Endpoint interactions\n  endpoints: Record<string, EndpointDefinition>\n\n  // Code splitting and generation\n  injectEndpoints: (options: InjectEndpointsOptions) => UpdatedApi\n  enhanceEndpoints: (options: EnhanceEndpointsOptions) => UpdatedApi\n\n  // Utilities\n  utils: {\n    updateQueryData: UpdateQueryDataThunk\n    patchQueryData: PatchQueryDataThunk\n    prefetch: PrefetchThunk\n    invalidateTags: ActionCreatorWithPayload<\n      Array<TagTypes | FullTagDescription<TagTypes>>,\n      string\n    >\n    selectInvalidatedBy: (\n      state: FullState,\n      tags: Array<TagTypes | FullTagDescription<TagTypes>>,\n    ) => Array<{\n      endpointName: string\n      originalArgs: any\n      queryCacheKey: string\n    }>\n    selectCachedArgsForQuery: (\n      state: FullState,\n      endpointName: EndpointName,\n    ) => Array<QueryArg>\n    resetApiState: ActionCreator<ResetAction>\n    getRunningQueryThunk(\n      endpointName: EndpointName,\n      args: QueryArg,\n    ): ThunkWithReturnValue<QueryActionCreatorResult | undefined>\n    getRunningMutationThunk(\n      endpointName: EndpointName,\n      fixedCacheKeyOrRequestId: string,\n    ): ThunkWithReturnValue<MutationActionCreatorResult | undefined>\n    getRunningQueriesThunk(): ThunkWithReturnValue<\n      Array<QueryActionCreatorResult<any>>\n    >\n    getRunningMutationsThunk(): ThunkWithReturnValue<\n      Array<MutationActionCreatorResult<any>>\n    >\n  }\n\n  // Internal actions\n  internalActions: InternalActions\n\n  // React hooks (if applicable)\n  [key in GeneratedReactHooks]: GeneratedReactHooks[key]\n}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"redux-integration",children:"Redux Integration"}),"\n",(0,a.jsxs)(n.p,{children:["Internally, ",(0,a.jsx)(n.code,{children:"createApi"})," will call ",(0,a.jsxs)(n.a,{href:"https://redux-toolkit.js.org/api/createSlice",children:["the Redux Toolkit ",(0,a.jsx)(n.code,{children:"createSlice"})," API"]})," to generate a slice reducer and corresponding action creators with the appropriate logic for caching fetched data. It also automatically generates a custom Redux middleware that manages subscription counts and cache lifetimes."]}),"\n",(0,a.jsxs)(n.p,{children:["The generated slice reducer and the middleware both need to be adding to your Redux store setup in ",(0,a.jsx)(n.code,{children:"configureStore"})," in order to work correctly."]}),"\n",(0,a.jsx)(n.admonition,{title:"API Reference",type:"info",children:(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/rtk-query/api/created-api/redux-integration",children:"API Slices: Redux Integration"})}),"\n"]})}),"\n",(0,a.jsx)(n.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,a.jsxs)(n.p,{children:["The API slice object will have an ",(0,a.jsx)(n.code,{children:"endpoints"})," field inside. This section maps the endpoint names you provided to ",(0,a.jsx)(n.code,{children:"createApi"})," to the core Redux logic (thunks and selectors) used to trigger data fetches and read cached data for that endpoint. If you're using the React-specific version of ",(0,a.jsx)(n.code,{children:"createApi"}),", each endpoint definition will also contain the auto-generated React hooks for that endpoint."]}),"\n",(0,a.jsx)(n.admonition,{title:"API Reference",type:"info",children:(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/rtk-query/api/created-api/endpoints",children:"API Slices: Endpoints"})}),"\n"]})}),"\n",(0,a.jsx)(n.h2,{id:"code-splitting-and-generation",children:"Code Splitting and Generation"}),"\n",(0,a.jsxs)(n.p,{children:["Each API slice allows ",(0,a.jsx)(n.a,{href:"/rtk-query/usage/code-splitting",children:"additional endpoint definitions to be injected at runtime"})," after the initial API slice has been defined. This can be beneficial for apps that may have ",(0,a.jsx)(n.em,{children:"many"})," endpoints."]}),"\n",(0,a.jsxs)(n.p,{children:["The individual API slice endpoint definitions can also be split across multiple files. This is primarily useful for working with API slices that were ",(0,a.jsx)(n.a,{href:"/rtk-query/usage/code-generation",children:"code-generated from an API schema file"}),", allowing you to add additional custom behavior and configuration to a set of automatically-generated endpoint definitions."]}),"\n",(0,a.jsxs)(n.p,{children:["Each API slice object has ",(0,a.jsx)(n.code,{children:"injectEndpoints"})," and ",(0,a.jsx)(n.code,{children:"enhanceEndpoints"})," functions to support these use cases."]}),"\n",(0,a.jsx)(n.admonition,{title:"API Reference",type:"info",children:(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/rtk-query/api/created-api/code-splitting",children:"API Slices: Code Splitting and Generation"})}),"\n"]})}),"\n",(0,a.jsx)(n.h2,{id:"api-slice-utilities",children:"API Slice Utilities"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"util"})," field includes various utility functions that can be used to manage the cache, including\nmanually updating query cache data, triggering pre-fetching of data, manually invalidating tags,\nand manually resetting the api state, as well as other utility functions that can be used in\nvarious scenarios, including SSR."]}),"\n",(0,a.jsx)(n.admonition,{title:"API Reference",type:"info",children:(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/rtk-query/api/created-api/api-slice-utils",children:"API Slices: Utilities"})}),"\n"]})}),"\n",(0,a.jsx)(n.h2,{id:"internal-actions",children:"Internal Actions"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"internalActions"})," field contains a set of additional thunks that are used for internal behavior, such as managing updates based on focus."]}),"\n",(0,a.jsx)(n.h2,{id:"react-hooks",children:"React Hooks"}),"\n",(0,a.jsxs)(n.p,{children:["The core RTK Query ",(0,a.jsx)(n.code,{children:"createApi"})," method is UI-agnostic, in the same way that the Redux core library and Redux Toolkit are UI-agnostic. They are all plain JS logic that can be used anywhere."]}),"\n",(0,a.jsxs)(n.p,{children:["However, RTK Query also provides the ability to auto-generate React hooks for each of your endpoints. Since this specifically depends on React itself, RTK Query provides an alternate entry point that exposes a customized version of ",(0,a.jsx)(n.code,{children:"createApi"})," that includes that functionality:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"import { createApi } from '@reduxjs/toolkit/query/react'\n"})}),"\n",(0,a.jsxs)(n.p,{children:["If you have used the React-specific version of ",(0,a.jsx)(n.code,{children:"createApi"}),", the generated ",(0,a.jsx)(n.code,{children:"Api"})," slice structure will also contain a set of React hooks. These endpoint hooks are available as ",(0,a.jsx)(n.code,{children:"api.endpoints[endpointName].useQuery"})," or ",(0,a.jsx)(n.code,{children:"api.endpoints[endpointName].useMutation"}),", matching how you defined that endpoint."]}),"\n",(0,a.jsxs)(n.p,{children:["The same hooks are also added to the ",(0,a.jsx)(n.code,{children:"Api"})," object itself, and given auto-generated names based on the endpoint name and query/mutation type."]}),"\n",(0,a.jsxs)(n.p,{children:["For example, if you had endpoints for ",(0,a.jsx)(n.code,{children:"getPosts"})," and ",(0,a.jsx)(n.code,{children:"updatePost"}),", these options would be available:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",metastring:'title="Generated React Hook names" no-transpile',children:"// Hooks attached to the endpoint definition\nconst { data } = api.endpoints.getPosts.useQuery()\nconst { data } = api.endpoints.updatePost.useMutation()\n\n// Same hooks, but given unique names and attached to the API slice object\nconst { data } = api.useGetPostsQuery()\nconst [updatePost] = api.useUpdatePostMutation()\n"})}),"\n",(0,a.jsxs)(n.p,{children:["The React-specific version of ",(0,a.jsx)(n.code,{children:"createApi"})," also generates a ",(0,a.jsx)(n.code,{children:"usePrefetch"})," hook, attached to the ",(0,a.jsx)(n.code,{children:"Api"})," object, which can be used to initiate fetching data ahead of time."]}),"\n",(0,a.jsx)(n.admonition,{title:"API Reference",type:"info",children:(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"/rtk-query/api/created-api/hooks",children:"API Slices: React Hooks"})}),"\n"]})})]})}function u(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8049:function(e,n,t){t.d(n,{Z:()=>r});var i=t("4246");t("7378");var a=t("4870");function r(e){let{children:n,hidden:t,className:r}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,a.Z)("tabItem_wHwb",r),hidden:t,children:n})}},5181:function(e,n,t){t.d(n,{Z:()=>x});var i=t("4246"),a=t("7378"),r=t("4870"),s=t("5403"),o=t("3620"),l=t("7090"),c=t("6180"),d=t("3418"),u=t("9073");function h(e){var n,t;return null!==(t=null===(n=a.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){let{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw Error("Docusaurus error: Bad <Tabs> child <".concat("string"==typeof e.type?e.type:e.type.name,'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.'))}))||void 0===n?void 0:n.filter(Boolean))&&void 0!==t?t:[]}function p(e){let{value:n,tabValues:t}=e;return t.some(e=>e.value===n)}var f=t("3344");function g(e){let{className:n,block:t,selectedValue:a,selectValue:o,tabValues:l}=e,c=[],{blockElementScrollPositionUntilNextRender:d}=(0,s.o5)(),u=e=>{let n=e.currentTarget,t=l[c.indexOf(n)].value;t!==a&&(d(n),o(t))},h=e=>{var n,t;let i=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{let t=c.indexOf(e.currentTarget)+1;i=null!==(n=c[t])&&void 0!==n?n:c[0];break}case"ArrowLeft":{let n=c.indexOf(e.currentTarget)-1;i=null!==(t=c[n])&&void 0!==t?t:c[c.length-1]}}null==i||i.focus()};return(0,i.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":t},n),children:l.map(e=>{let{value:n,label:t,attributes:s}=e;return(0,i.jsx)("li",{role:"tab",tabIndex:a===n?0:-1,"aria-selected":a===n,ref:e=>c.push(e),onKeyDown:h,onClick:u,...s,className:(0,r.Z)("tabs__item","tabItem_l0OV",null==s?void 0:s.className,{"tabs__item--active":a===n}),children:null!=t?t:n},n)})})}function m(e){let{lazy:n,children:t,selectedValue:s}=e,o=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){let e=o.find(e=>e.props.value===s);return e?(0,a.cloneElement)(e,{className:(0,r.Z)("margin-top--md",e.props.className)}):null}return(0,i.jsx)("div",{className:"margin-top--md",children:o.map((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==s}))})}function y(e){let n=function(e){let{defaultValue:n,queryString:t=!1,groupId:i}=e,r=function(e){let{values:n,children:t}=e;return(0,a.useMemo)(()=>{let e=null!=n?n:h(t).map(e=>{let{props:{value:n,label:t,attributes:i,default:a}}=e;return{value:n,label:t,attributes:i,default:a}});return!function(e){let n=(0,d.lx)(e,(e,n)=>e.value===n.value);if(n.length>0)throw Error('Docusaurus error: Duplicate values "'.concat(n.map(e=>e.value).join(", "),'" found in <Tabs>. Every value needs to be unique.'))}(e),e},[n,t])}(e),[s,f]=(0,a.useState)(()=>(function(e){var n;let{defaultValue:t,tabValues:i}=e;if(0===i.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:i}))throw Error('Docusaurus error: The <Tabs> has a defaultValue "'.concat(t,'" but none of its children has the corresponding value. Available values are: ').concat(i.map(e=>e.value).join(", "),". If you intend to show no default tab, use defaultValue={null} instead."));return t}let a=null!==(n=i.find(e=>e.default))&&void 0!==n?n:i[0];if(!a)throw Error("Unexpected error: 0 tabValues");return a.value})({defaultValue:n,tabValues:r})),[g,m]=function(e){let{queryString:n=!1,groupId:t}=e,i=(0,o.k6)(),r=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=t?t:null}({queryString:n,groupId:t});return[(0,c._X)(r),(0,a.useCallback)(e=>{if(!r)return;let n=new URLSearchParams(i.location.search);n.set(r,e),i.replace({...i.location,search:n.toString()})},[r,i])]}({queryString:t,groupId:i}),[y,x]=function(e){let{groupId:n}=e,t=n?"docusaurus.tab.".concat(n):null,[i,r]=(0,u.Nk)(t);return[i,(0,a.useCallback)(e=>{t&&r.set(e)},[t,r])]}({groupId:i}),j=(()=>{let e=null!=g?g:y;return p({value:e,tabValues:r})?e:null})();return(0,l.Z)(()=>{j&&f(j)},[j]),{selectedValue:s,selectValue:(0,a.useCallback)(e=>{if(!p({value:e,tabValues:r}))throw Error("Can't select invalid tab value=".concat(e));f(e),m(e),x(e)},[m,x,r]),tabValues:r}}(e);return(0,i.jsxs)("div",{className:(0,r.Z)("tabs-container","tabList_J5MA"),children:[(0,i.jsx)(g,{...n,...e}),(0,i.jsx)(m,{...n,...e})]})}function x(e){let n=(0,f.Z)();return(0,i.jsx)(y,{...e,children:h(e.children)},String(n))}},980:function(e,n,t){t.d(n,{Z:function(){return o},a:function(){return s}});var i=t(7378);let a={},r=i.createContext(a);function s(e){let n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);