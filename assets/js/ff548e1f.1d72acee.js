"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1632],{3411:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(7378),a=r(7140),l="tabItem_wHwb";function o(e){var t=e.children,r=e.hidden,o=e.className;return n.createElement("div",{role:"tabpanel",className:(0,a.Z)(l,o),hidden:r},t)}},2453:function(e,t,r){r.d(t,{Z:function(){return f}});var n=r(2685),a=r(7378),l=r(7140),o=r(362),i=r(56),s=r(5720),c=r(9169),u="tabList_J5MA",d="tabItem_l0OV";function p(e){var t,r,o=e.lazy,p=e.block,f=e.defaultValue,m=e.values,h=e.groupId,b=e.className,v=a.Children.map(e.children,(function(e){if((0,a.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),k=null!=m?m:v.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),g=(0,i.l)(k,(function(e,t){return e.value===t.value}));if(g.length>0)throw new Error('Docusaurus error: Duplicate values "'+g.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var y=null===f?f:null!=(t=null!=f?f:null==(r=v.find((function(e){return e.props.default})))?void 0:r.props.value)?t:v[0].props.value;if(null!==y&&!k.some((function(e){return e.value===y})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+y+'" but none of its children has the corresponding value. Available values are: '+k.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var w=(0,s.U)(),S=w.tabGroupChoices,N=w.setTabGroupChoices,x=(0,a.useState)(y),C=x[0],O=x[1],E=[],T=(0,c.o5)().blockElementScrollPositionUntilNextRender;if(null!=h){var j=S[h];null!=j&&j!==C&&k.some((function(e){return e.value===j}))&&O(j)}var P=function(e){var t=e.currentTarget,r=E.indexOf(t),n=k[r].value;n!==C&&(T(t),O(n),null!=h&&N(h,String(n)))},I=function(e){var t,r=null;switch(e.key){case"ArrowRight":var n,a=E.indexOf(e.currentTarget)+1;r=null!=(n=E[a])?n:E[0];break;case"ArrowLeft":var l,o=E.indexOf(e.currentTarget)-1;r=null!=(l=E[o])?l:E[E.length-1]}null==(t=r)||t.focus()};return a.createElement("div",{className:(0,l.Z)("tabs-container",u)},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":p},b)},k.map((function(e){var t=e.value,r=e.label,o=e.attributes;return a.createElement("li",(0,n.Z)({role:"tab",tabIndex:C===t?0:-1,"aria-selected":C===t,key:t,ref:function(e){return E.push(e)},onKeyDown:I,onFocus:P,onClick:P},o,{className:(0,l.Z)("tabs__item",d,null==o?void 0:o.className,{"tabs__item--active":C===t})}),null!=r?r:t)}))),o?(0,a.cloneElement)(v.filter((function(e){return e.props.value===C}))[0],{className:"margin-top--md"}):a.createElement("div",{className:"margin-top--md"},v.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==C})}))))}function f(e){var t=(0,o.Z)();return a.createElement(p,(0,n.Z)({key:String(t)},e))}},2902:function(e,t,r){r.r(t),r.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return f},frontMatter:function(){return i},metadata:function(){return c},toc:function(){return d}});var n=r(2685),a=r(1244),l=(r(7378),r(5318)),o=(r(3411),r(2453),["components"]),i={id:"createSelector",title:"createSelector",sidebar_label:"createSelector",hide_title:!0},s=void 0,c={unversionedId:"api/createSelector",id:"api/createSelector",title:"createSelector",description:"&nbsp;",source:"@site/../docs/api/createSelector.mdx",sourceDirName:"api",slug:"/api/createSelector",permalink:"/redux-toolkit/api/createSelector",draft:!1,tags:[],version:"current",lastUpdatedAt:1681260993,formattedLastUpdatedAt:"Apr 12, 2023",frontMatter:{id:"createSelector",title:"createSelector",sidebar_label:"createSelector",hide_title:!0},sidebar:"docs",previous:{title:"createEntityAdapter",permalink:"/redux-toolkit/api/createEntityAdapter"},next:{title:"Matching Utilities",permalink:"/redux-toolkit/api/matching-utilities"}},u={},d=[],p={toc:d};function f(e){var t=e.components,r=(0,a.Z)(e,o);return(0,l.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"createselector"},(0,l.kt)("inlineCode",{parentName:"h1"},"createSelector")),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"createSelector")," utility from the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/reduxjs/reselect"},"Reselect library"),", re-exported for ease of use."),(0,l.kt)("p",null,"For more details on using ",(0,l.kt)("inlineCode",{parentName:"p"},"createSelector"),", see:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"The ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/reduxjs/reselect"},"Reselect API documentation")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://react-redux.js.org/next/api/hooks#using-memoizing-selectors"},"React-Redux docs: Hooks API - Using memoizing selectors")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://blog.isquaredsoftware.com/2017/12/idiomatic-redux-using-reselect-selectors/"},"Idiomatic Redux: Using Reselect Selectors for Encapsulation and Performance")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/markerikson/react-redux-links/blob/master/redux-reducers-selectors.md"},"React/Redux Links: Reducers and Selectors"))),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("strong",{parentName:"p"},"Note"),": Prior to v0.7, RTK re-exported ",(0,l.kt)("inlineCode",{parentName:"p"},"createSelector")," from ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/planttheidea/selectorator"},(0,l.kt)("inlineCode",{parentName:"a"},"selectorator")),", which\nallowed using string keypaths as input selectors. This was removed, as it ultimately did not provide enough benefits, and\nthe string keypaths made static typing for selectors difficult.")),(0,l.kt)("h1",{id:"createdraftsafeselector"},(0,l.kt)("inlineCode",{parentName:"h1"},"createDraftSafeSelector")),(0,l.kt)("p",null,"In general, we recommend against using selectors inside of reducers:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Selectors typically expect the entire Redux state object as an argument, while slice reducers only have access to a specific subset of the entire Redux state"),(0,l.kt)("li",{parentName:"ul"},"Reselect's ",(0,l.kt)("inlineCode",{parentName:"li"},"createSelector")," relies on reference comparisons to determine if inputs have changed, and if an Immer Proxy-wrapped draft value is passed in to a selector, the selector may see the same reference and think nothing has changed.")),(0,l.kt)("p",null,"However, some users have requested the ability to create selectors that will work correctly inside of Immer-powered reducers. One use case for this might be collecting an ordered set of items when using ",(0,l.kt)("inlineCode",{parentName:"p"},"createEntityAdapter"),", such as ",(0,l.kt)("inlineCode",{parentName:"p"},"const orderedTodos = todosSelectors.selectAll(todosState)"),", and then using ",(0,l.kt)("inlineCode",{parentName:"p"},"orderedTodos")," in the rest of the reducer logic."),(0,l.kt)("p",null,"Besides re-exporting ",(0,l.kt)("inlineCode",{parentName:"p"},"createSelector"),", RTK also exports a wrapped version of ",(0,l.kt)("inlineCode",{parentName:"p"},"createSelector")," named ",(0,l.kt)("inlineCode",{parentName:"p"},"createDraftSafeSelector")," that allows you to create selectors that can safely be used inside of ",(0,l.kt)("inlineCode",{parentName:"p"},"createReducer")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"createSlice")," reducers with Immer-powered mutable logic. When used with plain state values, the selector will still memoize normally based on the inputs. But, when used with Immer draft values, the selector will err on the side of recalculating the results, just to be safe."),(0,l.kt)("p",null,"All selectors created by ",(0,l.kt)("inlineCode",{parentName:"p"},"entityAdapter.getSelectors"),' are "draft safe" selectors by default.'),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const selectSelf = (state: State) => state\nconst unsafeSelector = createSelector(selectSelf, (state) => state.value)\nconst draftSafeSelector = createDraftSafeSelector(\n  selectSelf,\n  (state) => state.value\n)\n\n// in your reducer:\n\nstate.value = 1\n\nconst unsafe1 = unsafeSelector(state)\nconst safe1 = draftSafeSelector(state)\n\nstate.value = 2\n\nconst unsafe2 = unsafeSelector(state)\nconst safe2 = draftSafeSelector(state)\n")),(0,l.kt)("p",null,"After executing that, ",(0,l.kt)("inlineCode",{parentName:"p"},"unsafe1")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"unsafe2")," will be of the same value, because the memoized selector was\nexecuted on the same object - but ",(0,l.kt)("inlineCode",{parentName:"p"},"safe2")," will actually be different from ",(0,l.kt)("inlineCode",{parentName:"p"},"safe1")," (with the updated value of ",(0,l.kt)("inlineCode",{parentName:"p"},"2"),"),\nbecause the safe selector detected that it was executed on a Immer draft object and recalculated using the current\nvalue instead of returning a cached value."))}f.isMDXComponent=!0},5318:function(e,t,r){r.d(t,{Zo:function(){return u},kt:function(){return f}});var n=r(7378);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),c=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=c(r),f=a,m=p["".concat(s,".").concat(f)]||p[f]||d[f]||l;return r?n.createElement(m,o(o({ref:t},u),{},{components:r})):n.createElement(m,o({ref:t},u))}));function f(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=r.length,o=new Array(l);o[0]=p;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var c=2;c<l;c++)o[c]=r[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}p.displayName="MDXCreateElement"}}]);