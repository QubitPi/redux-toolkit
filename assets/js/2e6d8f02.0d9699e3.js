"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6627],{3411:function(e,t,n){n.d(t,{Z:function(){return o}});var a=n(7378),i=n(7140),r="tabItem_wHwb";function o(e){var t=e.children,n=e.hidden,o=e.className;return a.createElement("div",{role:"tabpanel",className:(0,i.Z)(r,o),hidden:n},t)}},2453:function(e,t,n){n.d(t,{Z:function(){return h}});var a=n(2685),i=n(7378),r=n(7140),o=n(362),l=n(56),s=n(5720),u=n(9169),p="tabList_J5MA",c="tabItem_l0OV";function d(e){var t,n,o=e.lazy,d=e.block,h=e.defaultValue,m=e.values,f=e.groupId,k=e.className,y=i.Children.map(e.children,(function(e){if((0,i.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),g=null!=m?m:y.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),v=(0,l.l)(g,(function(e,t){return e.value===t.value}));if(v.length>0)throw new Error('Docusaurus error: Duplicate values "'+v.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var b=null===h?h:null!=(t=null!=h?h:null==(n=y.find((function(e){return e.props.default})))?void 0:n.props.value)?t:y[0].props.value;if(null!==b&&!g.some((function(e){return e.value===b})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+b+'" but none of its children has the corresponding value. Available values are: '+g.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var A=(0,s.U)(),N=A.tabGroupChoices,w=A.setTabGroupChoices,T=(0,i.useState)(b),I=T[0],P=T[1],R=[],C=(0,u.o5)().blockElementScrollPositionUntilNextRender;if(null!=f){var x=N[f];null!=x&&x!==I&&g.some((function(e){return e.value===x}))&&P(x)}var E=function(e){var t=e.currentTarget,n=R.indexOf(t),a=g[n].value;a!==I&&(C(t),P(a),null!=f&&w(f,String(a)))},O=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a,i=R.indexOf(e.currentTarget)+1;n=null!=(a=R[i])?a:R[0];break;case"ArrowLeft":var r,o=R.indexOf(e.currentTarget)-1;n=null!=(r=R[o])?r:R[R.length-1]}null==(t=n)||t.focus()};return i.createElement("div",{className:(0,r.Z)("tabs-container",p)},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":d},k)},g.map((function(e){var t=e.value,n=e.label,o=e.attributes;return i.createElement("li",(0,a.Z)({role:"tab",tabIndex:I===t?0:-1,"aria-selected":I===t,key:t,ref:function(e){return R.push(e)},onKeyDown:O,onFocus:E,onClick:E},o,{className:(0,r.Z)("tabs__item",c,null==o?void 0:o.className,{"tabs__item--active":I===t})}),null!=n?n:t)}))),o?(0,i.cloneElement)(y.filter((function(e){return e.props.value===I}))[0],{className:"margin-top--md"}):i.createElement("div",{className:"margin-top--md"},y.map((function(e,t){return(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==I})}))))}function h(e){var t=(0,o.Z)();return i.createElement(d,(0,a.Z)({key:String(t)},e))}},6791:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return c}});var a=n(2685),i=n(1244),r=(n(7378),n(5318)),o=(n(3411),n(2453),["components"]),l={id:"overview",title:"Overview",sidebar_label:"API Slice Overview",hide_title:!0},s=void 0,u={unversionedId:"rtk-query/api/created-api/overview",id:"rtk-query/api/created-api/overview",title:"Overview",description:"&nbsp;",source:"@site/../docs/rtk-query/api/created-api/overview.mdx",sourceDirName:"rtk-query/api/created-api",slug:"/rtk-query/api/created-api/overview",permalink:"/redux-toolkit/rtk-query/api/created-api/overview",draft:!1,tags:[],version:"current",lastUpdatedAt:1681260993,formattedLastUpdatedAt:"Apr 12, 2023",frontMatter:{id:"overview",title:"Overview",sidebar_label:"API Slice Overview",hide_title:!0},sidebar:"docs",previous:{title:"setupListeners",permalink:"/redux-toolkit/rtk-query/api/setupListeners"},next:{title:"Redux Integration",permalink:"/redux-toolkit/rtk-query/api/created-api/redux-integration"}},p={},c=[{value:"API Slice Overview",id:"api-slice-overview",level:2},{value:"Redux Integration",id:"redux-integration",level:2},{value:"Endpoints",id:"endpoints",level:2},{value:"Code Splitting and Generation",id:"code-splitting-and-generation",level:2},{value:"API Slice Utilities",id:"api-slice-utilities",level:2},{value:"Internal Actions",id:"internal-actions",level:2},{value:"React Hooks",id:"react-hooks",level:2}],d={toc:c};function h(e){var t=e.components,n=(0,i.Z)(e,o);return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"generated-api-slices"},"Generated API Slices"),(0,r.kt)("h2",{id:"api-slice-overview"},"API Slice Overview"),(0,r.kt)("p",null,"When you call ",(0,r.kt)("a",{parentName:"p",href:"/redux-toolkit/rtk-query/api/createApi"},(0,r.kt)("inlineCode",{parentName:"a"},"createApi")),', it automatically generates and returns an API service "slice" object structure containing Redux logic you can use to interact with the endpoints you defined. This slice object includes a reducer to manage cached data, a middleware to manage cache lifetimes and subscriptions, and selectors and thunks for each endpoint. If you imported ',(0,r.kt)("inlineCode",{parentName:"p"},"createApi")," from the React-specific entry point, it also includes auto-generated React hooks for use in your components."),(0,r.kt)("p",null,"This section documents the contents of that API structure, with the different fields grouped by category. The API types and descriptions are listed on separate pages for each category."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Typically, you should only have one API slice per base URL that your application needs to communicate with. For example, if your site fetches data from both ",(0,r.kt)("inlineCode",{parentName:"p"},"/api/posts")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"/api/users"),", you would have a single API slice with ",(0,r.kt)("inlineCode",{parentName:"p"},"/api/")," as the base URL, and separate endpoint definitions for ",(0,r.kt)("inlineCode",{parentName:"p"},"posts")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"users"),". This allows you to effectively take advantage of ",(0,r.kt)("a",{parentName:"p",href:"/redux-toolkit/rtk-query/usage/automated-refetching"},"automated re-fetching")," by defining ",(0,r.kt)("a",{parentName:"p",href:"/redux-toolkit/rtk-query/usage/automated-refetching#tags"},"tag")," relationships across endpoints."),(0,r.kt)("p",{parentName:"admonition"},"For maintainability purposes, you may wish to split up endpoint definitions across multiple files, while still maintaining a single API slice which includes all of these endpoints. See ",(0,r.kt)("a",{parentName:"p",href:"/redux-toolkit/rtk-query/usage/code-splitting"},"code splitting")," for how you can use the ",(0,r.kt)("inlineCode",{parentName:"p"},"injectEndpoints")," property to inject API endpoints from other files into a single API slice definition.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="API Slice Contents" no-transpile',title:'"API',Slice:!0,'Contents"':!0,"no-transpile":!0},"const api = createApi({\n  baseQuery: fetchBaseQuery({ baseUrl: '/' }),\n  endpoints: (build) => ({\n    // ...\n  }),\n})\n\ntype Api = {\n  // Redux integration\n  reducerPath: string\n  reducer: Reducer\n  middleware: Middleware\n\n  // Endpoint interactions\n  endpoints: Record<string, EndpointDefinition>\n\n  // Code splitting and generation\n  injectEndpoints: (options: InjectEndpointsOptions) => UpdatedApi\n  enhanceEndpoints: (options: EnhanceEndpointsOptions) => UpdatedApi\n\n  // Utilities\n  utils: {\n    updateQueryData: UpdateQueryDataThunk\n    patchQueryData: PatchQueryDataThunk\n    prefetch: PrefetchThunk\n    invalidateTags: ActionCreatorWithPayload<\n      Array<TagTypes | FullTagDescription<TagTypes>>,\n      string\n    >\n    selectInvalidatedBy: (\n      state: FullState,\n      tags: Array<TagTypes | FullTagDescription<TagTypes>>\n    ) => Array<{\n      endpointName: string\n      originalArgs: any\n      queryCacheKey: string\n    }>\n    resetApiState: ActionCreator<ResetAction>\n    getRunningQueryThunk(\n      endpointName: EndpointName,\n      args: QueryArg\n    ): ThunkWithReturnValue<QueryActionCreatorResult | undefined>\n    getRunningMutationThunk(\n      endpointName: EndpointName,\n      fixedCacheKeyOrRequestId: string\n    ): ThunkWithReturnValue<MutationActionCreatorResult | undefined>\n    getRunningQueriesThunk(): ThunkWithReturnValue<\n      Array<QueryActionCreatorResult<any>>\n    >\n    getRunningMutationsThunk(): ThunkWithReturnValue<\n      Array<MutationActionCreatorResult<any>>\n    >\n  }\n\n  // Internal actions\n  internalActions: InternalActions\n\n  // React hooks (if applicable)\n  [key in GeneratedReactHooks]: GeneratedReactHooks[key]\n}\n")),(0,r.kt)("h2",{id:"redux-integration"},"Redux Integration"),(0,r.kt)("p",null,"Internally, ",(0,r.kt)("inlineCode",{parentName:"p"},"createApi")," will call ",(0,r.kt)("a",{parentName:"p",href:"https://redux-toolkit.js.org/api/createSlice"},"the Redux Toolkit ",(0,r.kt)("inlineCode",{parentName:"a"},"createSlice")," API")," to generate a slice reducer and corresponding action creators with the appropriate logic for caching fetched data. It also automatically generates a custom Redux middleware that manages subscription counts and cache lifetimes."),(0,r.kt)("p",null,"The generated slice reducer and the middleware both need to be adding to your Redux store setup in ",(0,r.kt)("inlineCode",{parentName:"p"},"configureStore")," in order to work correctly."),(0,r.kt)("admonition",{title:"API Reference",type:"info"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/redux-toolkit/rtk-query/api/created-api/redux-integration"},"API Slices: Redux Integration")))),(0,r.kt)("h2",{id:"endpoints"},"Endpoints"),(0,r.kt)("p",null,"The API slice object will have an ",(0,r.kt)("inlineCode",{parentName:"p"},"endpoints")," field inside. This section maps the endpoint names you provided to ",(0,r.kt)("inlineCode",{parentName:"p"},"createApi")," to the core Redux logic (thunks and selectors) used to trigger data fetches and read cached data for that endpoint. If you're using the React-specific version of ",(0,r.kt)("inlineCode",{parentName:"p"},"createApi"),", each endpoint definition will also contain the auto-generated React hooks for that endpoint."),(0,r.kt)("admonition",{title:"API Reference",type:"info"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/redux-toolkit/rtk-query/api/created-api/endpoints"},"API Slices: Endpoints")))),(0,r.kt)("h2",{id:"code-splitting-and-generation"},"Code Splitting and Generation"),(0,r.kt)("p",null,"Each API slice allows ",(0,r.kt)("a",{parentName:"p",href:"/redux-toolkit/rtk-query/usage/code-splitting"},"additional endpoint definitions to be injected at runtime")," after the initial API slice has been defined. This can be beneficial for apps that may have ",(0,r.kt)("em",{parentName:"p"},"many")," endpoints."),(0,r.kt)("p",null,"The individual API slice endpoint definitions can also be split across multiple files. This is primarily useful for working with API slices that were ",(0,r.kt)("a",{parentName:"p",href:"/redux-toolkit/rtk-query/usage/code-generation"},"code-generated from an API schema file"),", allowing you to add additional custom behavior and configuration to a set of automatically-generated endpoint definitions."),(0,r.kt)("p",null,"Each API slice object has ",(0,r.kt)("inlineCode",{parentName:"p"},"injectEndpoints")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"enhanceEndpoints")," functions to support these use cases."),(0,r.kt)("admonition",{title:"API Reference",type:"info"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/redux-toolkit/rtk-query/api/created-api/code-splitting"},"API Slices: Code Splitting and Generation")))),(0,r.kt)("h2",{id:"api-slice-utilities"},"API Slice Utilities"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"util")," field includes various utility functions that can be used to manage the cache, including\nmanually updating query cache data, triggering pre-fetching of data, manually invalidating tags,\nand manually resetting the api state, as well as other utility functions that can be used in\nvarious scenarios, including SSR."),(0,r.kt)("admonition",{title:"API Reference",type:"info"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/redux-toolkit/rtk-query/api/created-api/api-slice-utils"},"API Slices: Utilities")))),(0,r.kt)("h2",{id:"internal-actions"},"Internal Actions"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"internalActions")," field contains a set of additional thunks that are used for internal behavior, such as managing updates based on focus."),(0,r.kt)("h2",{id:"react-hooks"},"React Hooks"),(0,r.kt)("p",null,"The core RTK Query ",(0,r.kt)("inlineCode",{parentName:"p"},"createApi")," method is UI-agnostic, in the same way that the Redux core library and Redux Toolkit are UI-agnostic. They are all plain JS logic that can be used anywhere."),(0,r.kt)("p",null,"However, RTK Query also provides the ability to auto-generate React hooks for each of your endpoints. Since this specifically depends on React itself, RTK Query provides an alternate entry point that exposes a customized version of ",(0,r.kt)("inlineCode",{parentName:"p"},"createApi")," that includes that functionality:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import { createApi } from '@reduxjs/toolkit/query/react'\n")),(0,r.kt)("p",null,"If you have used the React-specific version of ",(0,r.kt)("inlineCode",{parentName:"p"},"createApi"),", the generated ",(0,r.kt)("inlineCode",{parentName:"p"},"Api")," slice structure will also contain a set of React hooks. These endpoint hooks are available as ",(0,r.kt)("inlineCode",{parentName:"p"},"api.endpoints[endpointName].useQuery")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"api.endpoints[endpointName].useMutation"),", matching how you defined that endpoint."),(0,r.kt)("p",null,"The same hooks are also added to the ",(0,r.kt)("inlineCode",{parentName:"p"},"Api")," object itself, and given auto-generated names based on the endpoint name and query/mutation type."),(0,r.kt)("p",null,"For example, if you had endpoints for ",(0,r.kt)("inlineCode",{parentName:"p"},"getPosts")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"updatePost"),", these options would be available:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="Generated React Hook names" no-transpile',title:'"Generated',React:!0,Hook:!0,'names"':!0,"no-transpile":!0},"// Hooks attached to the endpoint definition\nconst { data } = api.endpoints.getPosts.useQuery()\nconst { data } = api.endpoints.updatePost.useMutation()\n\n// Same hooks, but given unique names and attached to the API slice object\nconst { data } = api.useGetPostsQuery()\nconst [updatePost] = api.useUpdatePostMutation()\n")),(0,r.kt)("p",null,"The React-specific version of ",(0,r.kt)("inlineCode",{parentName:"p"},"createApi")," also generates a ",(0,r.kt)("inlineCode",{parentName:"p"},"usePrefetch")," hook, attached to the ",(0,r.kt)("inlineCode",{parentName:"p"},"Api")," object, which can be used to initiate fetching data ahead of time."),(0,r.kt)("admonition",{title:"API Reference",type:"info"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/redux-toolkit/rtk-query/api/created-api/hooks"},"API Slices: React Hooks")))))}h.isMDXComponent=!0},5318:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return h}});var a=n(7378);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=u(n),h=i,m=d["".concat(s,".").concat(h)]||d[h]||c[h]||r;return n?a.createElement(m,o(o({ref:t},p),{},{components:n})):a.createElement(m,o({ref:t},p))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var u=2;u<r;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);