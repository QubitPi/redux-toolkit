"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["2395"],{3573:function(e,a,n){n.r(a),n.d(a,{default:()=>p,frontMatter:()=>o,metadata:()=>i,assets:()=>u,toc:()=>c,contentTitle:()=>d});var i=JSON.parse('{"id":"api/serializabilityMiddleware","title":"Serializability Middleware","description":"&nbsp;","source":"@site/../docs/api/serializabilityMiddleware.mdx","sourceDirName":"api","slug":"/api/serializabilityMiddleware","permalink":"/api/serializabilityMiddleware","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1747228365000,"frontMatter":{"id":"serializabilityMiddleware","title":"Serializability Middleware","sidebar_label":"Serializability Middleware","hide_title":true},"sidebar":"docs","previous":{"title":"Immutability Middleware","permalink":"/api/immutabilityMiddleware"},"next":{"title":"Action Creator Middleware","permalink":"/api/actionCreatorMiddleware"}}'),r=n("4246"),t=n("980"),l=n("8049"),s=n("5181");let o={id:"serializabilityMiddleware",title:"Serializability Middleware",sidebar_label:"Serializability Middleware",hide_title:!0},d="Serializability Middleware",u={},c=[{value:"Options",id:"options",level:2},{value:"Exports",id:"exports",level:2},{value:"<code>createSerializableStateInvariantMiddleware</code>",id:"createserializablestateinvariantmiddleware",level:3},{value:"<code>isPlain</code>",id:"isplain",level:3}];function h(e){let a={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,t.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.p,{children:"\xa0"}),"\n",(0,r.jsx)(a.header,{children:(0,r.jsx)(a.h1,{id:"serializability-middleware",children:"Serializability Middleware"})}),"\n",(0,r.jsxs)(a.p,{children:["A custom middleware that detects if any non-serializable values have been included in state or dispatched actions, modeled after ",(0,r.jsx)(a.code,{children:"redux-immutable-state-invariant"}),". Any detected non-serializable values will be logged to the console."]}),"\n",(0,r.jsxs)(a.p,{children:["This middleware is added to the store by default by ",(0,r.jsx)(a.a,{href:"/api/configureStore",children:(0,r.jsx)(a.code,{children:"configureStore"})})," and ",(0,r.jsx)(a.a,{href:"/api/getDefaultMiddleware",children:(0,r.jsx)(a.code,{children:"getDefaultMiddleware"})}),"."]}),"\n",(0,r.jsxs)(a.p,{children:["You can customize the behavior of this middleware by passing any of the supported options as the ",(0,r.jsx)(a.code,{children:"serializableCheck"})," value for ",(0,r.jsx)(a.code,{children:"getDefaultMiddleware"}),"."]}),"\n",(0,r.jsx)(a.h2,{id:"options",children:"Options"}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-ts",metastring:"no-transpile",children:"interface SerializableStateInvariantMiddlewareOptions {\n  /**\n   * The function to check if a value is considered serializable. This\n   * function is applied recursively to every value contained in the\n   * state. Defaults to `isPlain()`.\n   */\n  isSerializable?: (value: any) => boolean\n  /**\n   * The function that will be used to retrieve entries from each\n   * value.  If unspecified, `Object.entries` will be used. Defaults\n   * to `undefined`.\n   */\n  getEntries?: (value: any) => [string, any][]\n\n  /**\n   * An array of action types to ignore when checking for serializability.\n   * Defaults to []\n   */\n  ignoredActions?: string[]\n\n  /**\n   * An array of dot-separated path strings or regular expressions to ignore\n   * when checking for serializability, Defaults to\n   * ['meta.arg', 'meta.baseQueryMeta']\n   */\n  ignoredActionPaths?: (string | RegExp)[]\n\n  /**\n   * An array of dot-separated path strings or regular expressions to ignore\n   * when checking for serializability, Defaults to []\n   */\n  ignoredPaths?: (string | RegExp)[]\n  /**\n   * Execution time warning threshold. If the middleware takes longer\n   * than `warnAfter` ms, a warning will be displayed in the console.\n   * Defaults to 32ms.\n   */\n  warnAfter?: number\n\n  /**\n   * Opt out of checking state. When set to `true`, other state-related params will be ignored.\n   */\n  ignoreState?: boolean\n\n  /**\n   * Opt out of checking actions. When set to `true`, other action-related params will be ignored.\n   */\n  ignoreActions?: boolean\n}\n"})}),"\n",(0,r.jsx)(a.h2,{id:"exports",children:"Exports"}),"\n",(0,r.jsx)(a.h3,{id:"createserializablestateinvariantmiddleware",children:(0,r.jsx)(a.code,{children:"createSerializableStateInvariantMiddleware"})}),"\n",(0,r.jsx)(a.p,{children:"Creates an instance of the serializability check middleware, with the given options."}),"\n",(0,r.jsxs)(a.p,{children:["You will most likely not need to call this yourself, as ",(0,r.jsx)(a.code,{children:"getDefaultMiddleware"})," already does so."]}),"\n",(0,r.jsx)(a.p,{children:"Example:"}),"\n",(0,r.jsxs)(s.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],children:[(0,r.jsx)(l.Z,{value:"ts",children:(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-ts",children:"import { Iterable } from 'immutable'\nimport {\n  configureStore,\n  createSerializableStateInvariantMiddleware,\n  isPlain,\n  Tuple,\n} from '@reduxjs/toolkit'\nimport reducer from './reducer'\n\n// Augment middleware to consider Immutable.JS iterables serializable\nconst isSerializable = (value: any) =>\n  Iterable.isIterable(value) || isPlain(value)\n\nconst getEntries = (value: any) =>\n  Iterable.isIterable(value) ? value.entries() : Object.entries(value)\n\nconst serializableMiddleware = createSerializableStateInvariantMiddleware({\n  isSerializable,\n  getEntries,\n})\n\nconst store = configureStore({\n  reducer,\n  middleware: () => new Tuple(serializableMiddleware),\n})\n"})})}),(0,r.jsx)(l.Z,{value:"js",children:(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-js",children:"import { Iterable } from 'immutable'\nimport {\n  configureStore,\n  createSerializableStateInvariantMiddleware,\n  isPlain,\n  Tuple,\n} from '@reduxjs/toolkit'\nimport reducer from './reducer'\n\n// Augment middleware to consider Immutable.JS iterables serializable\nconst isSerializable = (value) => Iterable.isIterable(value) || isPlain(value)\n\nconst getEntries = (value) =>\n  Iterable.isIterable(value) ? value.entries() : Object.entries(value)\n\nconst serializableMiddleware = createSerializableStateInvariantMiddleware({\n  isSerializable,\n  getEntries,\n})\n\nconst store = configureStore({\n  reducer,\n  middleware: () => new Tuple(serializableMiddleware),\n})\n"})})})]}),"\n",(0,r.jsx)(a.h3,{id:"isplain",children:(0,r.jsx)(a.code,{children:"isPlain"})}),"\n",(0,r.jsx)(a.p,{children:'Checks whether the given value is considered a "plain value" or not.'}),"\n",(0,r.jsx)(a.p,{children:"Currently implemented as:"}),"\n",(0,r.jsxs)(s.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],children:[(0,r.jsx)(l.Z,{value:"ts",children:(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-ts",children:"import isPlainObject from './isPlainObject'\n\nexport function isPlain(val: any) {\n  return (\n    typeof val === 'undefined' ||\n    val === null ||\n    typeof val === 'string' ||\n    typeof val === 'boolean' ||\n    typeof val === 'number' ||\n    Array.isArray(val) ||\n    isPlainObject(val)\n  )\n}\n"})})}),(0,r.jsx)(l.Z,{value:"js",children:(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-js",children:"import isPlainObject from './isPlainObject'\n\nexport function isPlain(val) {\n  return (\n    typeof val === 'undefined' ||\n    val === null ||\n    typeof val === 'string' ||\n    typeof val === 'boolean' ||\n    typeof val === 'number' ||\n    Array.isArray(val) ||\n    isPlainObject(val)\n  )\n}\n"})})})]}),"\n",(0,r.jsxs)(a.p,{children:["This will accept all standard JS objects, arrays, and primitives, but return false for ",(0,r.jsx)(a.code,{children:"Date"}),"s, ",(0,r.jsx)(a.code,{children:"Map"}),"s, and other similar class instances."]})]})}function p(e={}){let{wrapper:a}={...(0,t.a)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8049:function(e,a,n){n.d(a,{Z:()=>t});var i=n("4246");n("7378");var r=n("4870");function t(e){let{children:a,hidden:n,className:t}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.Z)("tabItem_wHwb",t),hidden:n,children:a})}},5181:function(e,a,n){n.d(a,{Z:()=>g});var i=n("4246"),r=n("7378"),t=n("4870"),l=n("5403"),s=n("3620"),o=n("7090"),d=n("6180"),u=n("3418"),c=n("9073");function h(e){var a,n;return null!==(n=null===(a=r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){let{props:a}=e;return!!a&&"object"==typeof a&&"value"in a}(e))return e;throw Error("Docusaurus error: Bad <Tabs> child <".concat("string"==typeof e.type?e.type:e.type.name,'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.'))}))||void 0===a?void 0:a.filter(Boolean))&&void 0!==n?n:[]}function p(e){let{value:a,tabValues:n}=e;return n.some(e=>e.value===a)}var b=n("3344");function f(e){let{className:a,block:n,selectedValue:r,selectValue:s,tabValues:o}=e,d=[],{blockElementScrollPositionUntilNextRender:u}=(0,l.o5)(),c=e=>{let a=e.currentTarget,n=o[d.indexOf(a)].value;n!==r&&(u(a),s(n))},h=e=>{var a,n;let i=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{let n=d.indexOf(e.currentTarget)+1;i=null!==(a=d[n])&&void 0!==a?a:d[0];break}case"ArrowLeft":{let a=d.indexOf(e.currentTarget)-1;i=null!==(n=d[a])&&void 0!==n?n:d[d.length-1]}}null==i||i.focus()};return(0,i.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.Z)("tabs",{"tabs--block":n},a),children:o.map(e=>{let{value:a,label:n,attributes:l}=e;return(0,i.jsx)("li",{role:"tab",tabIndex:r===a?0:-1,"aria-selected":r===a,ref:e=>d.push(e),onKeyDown:h,onClick:c,...l,className:(0,t.Z)("tabs__item","tabItem_l0OV",null==l?void 0:l.className,{"tabs__item--active":r===a}),children:null!=n?n:a},a)})})}function v(e){let{lazy:a,children:n,selectedValue:l}=e,s=(Array.isArray(n)?n:[n]).filter(Boolean);if(a){let e=s.find(e=>e.props.value===l);return e?(0,r.cloneElement)(e,{className:(0,t.Z)("margin-top--md",e.props.className)}):null}return(0,i.jsx)("div",{className:"margin-top--md",children:s.map((e,a)=>(0,r.cloneElement)(e,{key:a,hidden:e.props.value!==l}))})}function m(e){let a=function(e){let{defaultValue:a,queryString:n=!1,groupId:i}=e,t=function(e){let{values:a,children:n}=e;return(0,r.useMemo)(()=>{let e=null!=a?a:h(n).map(e=>{let{props:{value:a,label:n,attributes:i,default:r}}=e;return{value:a,label:n,attributes:i,default:r}});return!function(e){let a=(0,u.lx)(e,(e,a)=>e.value===a.value);if(a.length>0)throw Error('Docusaurus error: Duplicate values "'.concat(a.map(e=>e.value).join(", "),'" found in <Tabs>. Every value needs to be unique.'))}(e),e},[a,n])}(e),[l,b]=(0,r.useState)(()=>(function(e){var a;let{defaultValue:n,tabValues:i}=e;if(0===i.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:i}))throw Error('Docusaurus error: The <Tabs> has a defaultValue "'.concat(n,'" but none of its children has the corresponding value. Available values are: ').concat(i.map(e=>e.value).join(", "),". If you intend to show no default tab, use defaultValue={null} instead."));return n}let r=null!==(a=i.find(e=>e.default))&&void 0!==a?a:i[0];if(!r)throw Error("Unexpected error: 0 tabValues");return r.value})({defaultValue:a,tabValues:t})),[f,v]=function(e){let{queryString:a=!1,groupId:n}=e,i=(0,s.k6)(),t=function(e){let{queryString:a=!1,groupId:n}=e;if("string"==typeof a)return a;if(!1===a)return null;if(!0===a&&!n)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=n?n:null}({queryString:a,groupId:n});return[(0,d._X)(t),(0,r.useCallback)(e=>{if(!t)return;let a=new URLSearchParams(i.location.search);a.set(t,e),i.replace({...i.location,search:a.toString()})},[t,i])]}({queryString:n,groupId:i}),[m,g]=function(e){let{groupId:a}=e,n=a?"docusaurus.tab.".concat(a):null,[i,t]=(0,c.Nk)(n);return[i,(0,r.useCallback)(e=>{n&&t.set(e)},[n,t])]}({groupId:i}),w=(()=>{let e=null!=f?f:m;return p({value:e,tabValues:t})?e:null})();return(0,o.Z)(()=>{w&&b(w)},[w]),{selectedValue:l,selectValue:(0,r.useCallback)(e=>{if(!p({value:e,tabValues:t}))throw Error("Can't select invalid tab value=".concat(e));b(e),v(e),g(e)},[v,g,t]),tabValues:t}}(e);return(0,i.jsxs)("div",{className:(0,t.Z)("tabs-container","tabList_J5MA"),children:[(0,i.jsx)(f,{...a,...e}),(0,i.jsx)(v,{...a,...e})]})}function g(e){let a=(0,b.Z)();return(0,i.jsx)(m,{...e,children:h(e.children)},String(a))}},980:function(e,a,n){n.d(a,{Z:function(){return s},a:function(){return l}});var i=n(7378);let r={},t=i.createContext(r);function l(e){let a=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(t.Provider,{value:a},e.children)}}}]);