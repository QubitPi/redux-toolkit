"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["3778"],{1583:function(e,t,n){n.r(t),n.d(t,{default:()=>h,frontMatter:()=>s,metadata:()=>a,assets:()=>u,toc:()=>c,contentTitle:()=>d});var a=JSON.parse('{"id":"api/immutabilityMiddleware","title":"Immutability Middleware","description":"&nbsp;","source":"@site/../docs/api/immutabilityMiddleware.mdx","sourceDirName":"api","slug":"/api/immutabilityMiddleware","permalink":"/api/immutabilityMiddleware","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1747236559000,"frontMatter":{"id":"immutabilityMiddleware","title":"Immutability Middleware","sidebar_label":"Immutability Middleware","hide_title":true},"sidebar":"docs","previous":{"title":"getDefaultMiddleware","permalink":"/api/getDefaultMiddleware"},"next":{"title":"Serializability Middleware","permalink":"/api/serializabilityMiddleware"}}'),r=n("4246"),l=n("980"),i=n("8049"),o=n("5181");let s={id:"immutabilityMiddleware",title:"Immutability Middleware",sidebar_label:"Immutability Middleware",hide_title:!0},d="Immutability Middleware",u={},c=[{value:"Options",id:"options",level:2},{value:"Exports",id:"exports",level:2},{value:"<code>createImmutableStateInvariantMiddleware</code>",id:"createimmutablestateinvariantmiddleware",level:3},{value:"<code>isImmutableDefault</code>",id:"isimmutabledefault",level:3}];function m(e){let t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,l.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"\xa0"}),"\n",(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"immutability-middleware",children:"Immutability Middleware"})}),"\n",(0,r.jsxs)(t.p,{children:["A port of the ",(0,r.jsx)(t.a,{href:"https://github.com/leoasis/redux-immutable-state-invariant",children:(0,r.jsx)(t.code,{children:"redux-immutable-state-invariant"})})," middleware, customized for use with Redux Toolkit. Any detected mutations will be thrown as errors."]}),"\n",(0,r.jsxs)(t.p,{children:["This middleware is added to the store by default by ",(0,r.jsx)(t.a,{href:"/api/configureStore",children:(0,r.jsx)(t.code,{children:"configureStore"})})," and ",(0,r.jsx)(t.a,{href:"/api/getDefaultMiddleware",children:(0,r.jsx)(t.code,{children:"getDefaultMiddleware"})}),"."]}),"\n",(0,r.jsxs)(t.p,{children:["You can customize the behavior of this middleware by passing any of the supported options as the ",(0,r.jsx)(t.code,{children:"immutableCheck"})," value for ",(0,r.jsx)(t.code,{children:"getDefaultMiddleware"}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"options",children:"Options"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",metastring:"no-transpile",children:"type IsImmutableFunc = (value: any) => boolean\n\ninterface ImmutableStateInvariantMiddlewareOptions {\n  /**\n    Callback function to check if a value is considered to be immutable.\n    This function is applied recursively to every value contained in the state.\n    The default implementation will return true for primitive types \n    (like numbers, strings, booleans, null and undefined).\n   */\n  isImmutable?: IsImmutableFunc\n  /** \n    An array of dot-separated path strings or RegExps that match named nodes from \n    the root state to ignore when checking for immutability.\n    Defaults to undefined\n   */\n  ignoredPaths?: (string | RegExp)[]\n  /** Print a warning if checks take longer than N ms. Default: 32ms */\n  warnAfter?: number\n}\n"})}),"\n",(0,r.jsx)(t.h2,{id:"exports",children:"Exports"}),"\n",(0,r.jsx)(t.h3,{id:"createimmutablestateinvariantmiddleware",children:(0,r.jsx)(t.code,{children:"createImmutableStateInvariantMiddleware"})}),"\n",(0,r.jsx)(t.p,{children:"Creates an instance of the immutability check middleware, with the given options."}),"\n",(0,r.jsxs)(t.p,{children:["You will most likely not need to call this yourself, as ",(0,r.jsx)(t.code,{children:"getDefaultMiddleware"})," already does so."]}),"\n",(0,r.jsx)(t.p,{children:"Example:"}),"\n",(0,r.jsxs)(o.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],children:[(0,r.jsx)(i.Z,{value:"ts",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"// file: exampleSlice.ts\nimport { createSlice } from '@reduxjs/toolkit'\n\nexport const exampleSlice = createSlice({\n  name: 'example',\n  initialState: {\n    user: 'will track changes',\n    ignoredPath: 'single level',\n    ignoredNested: {\n      one: 'one',\n      two: 'two',\n    },\n  },\n  reducers: {},\n})\n\nexport default exampleSlice.reducer\n\n\n// file: store.ts\nimport {\n  configureStore,\n  createImmutableStateInvariantMiddleware,\n  Tuple,\n} from '@reduxjs/toolkit'\n\nimport exampleSliceReducer from './exampleSlice'\n\nconst immutableInvariantMiddleware = createImmutableStateInvariantMiddleware({\n  ignoredPaths: ['ignoredPath', 'ignoredNested.one', 'ignoredNested.two'],\n})\n\nconst store = configureStore({\n  reducer: exampleSliceReducer,\n  // Note that this will replace all default middleware\n  middleware: () => new Tuple(immutableInvariantMiddleware),\n})\n"})})}),(0,r.jsx)(i.Z,{value:"js",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"// file: exampleSlice.js\nimport { createSlice } from '@reduxjs/toolkit'\n\nexport const exampleSlice = createSlice({\n  name: 'example',\n  initialState: {\n    user: 'will track changes',\n    ignoredPath: 'single level',\n    ignoredNested: {\n      one: 'one',\n      two: 'two',\n    },\n  },\n  reducers: {},\n})\n\nexport default exampleSlice.reducer\n\n\n// file: store.js\nimport {\n  configureStore,\n  createImmutableStateInvariantMiddleware,\n  Tuple,\n} from '@reduxjs/toolkit'\n\nimport exampleSliceReducer from './exampleSlice'\n\nconst immutableInvariantMiddleware = createImmutableStateInvariantMiddleware({\n  ignoredPaths: ['ignoredPath', 'ignoredNested.one', 'ignoredNested.two'],\n})\n\nconst store = configureStore({\n  reducer: exampleSliceReducer,\n  // Note that this will replace all default middleware\n  middleware: () => new Tuple(immutableInvariantMiddleware),\n})\n"})})})]}),"\n",(0,r.jsxs)(t.p,{children:["doing the same without removing all other middlewares, using ",(0,r.jsx)(t.a,{href:"./getDefaultMiddleware",children:"getDetfaultMiddleware"}),":"]}),"\n",(0,r.jsxs)(o.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],children:[(0,r.jsx)(i.Z,{value:"ts",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"import { configureStore } from '@reduxjs/toolkit'\n\nimport exampleSliceReducer from './exampleSlice'\n\nconst store = configureStore({\n  reducer: exampleSliceReducer,\n  // This replaces the original default middleware with the customized versions\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      immutableCheck: {\n        ignoredPaths: ['ignoredPath', 'ignoredNested.one', 'ignoredNested.two'],\n      },\n    }),\n})\n"})})}),(0,r.jsx)(i.Z,{value:"js",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"import { configureStore } from '@reduxjs/toolkit'\n\nimport exampleSliceReducer from './exampleSlice'\n\nconst store = configureStore({\n  reducer: exampleSliceReducer,\n  // This replaces the original default middleware with the customized versions\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      immutableCheck: {\n        ignoredPaths: ['ignoredPath', 'ignoredNested.one', 'ignoredNested.two'],\n      },\n    }),\n})\n"})})})]}),"\n",(0,r.jsx)(t.h3,{id:"isimmutabledefault",children:(0,r.jsx)(t.code,{children:"isImmutableDefault"})}),"\n",(0,r.jsx)(t.p,{children:'Default implementation of the "is this value immutable?" check. Currently implemented as:'}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"return (\n  typeof value !== 'object' || value === null || typeof value === 'undefined'\n)\n"})}),"\n",(0,r.jsx)(t.p,{children:"This will return true for primitive types (like numbers, strings, booleans, null and undefined)"})]})}function h(e={}){let{wrapper:t}={...(0,l.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},8049:function(e,t,n){n.d(t,{Z:()=>l});var a=n("4246");n("7378");var r=n("4870");function l(e){let{children:t,hidden:n,className:l}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,r.Z)("tabItem_wHwb",l),hidden:n,children:t})}},5181:function(e,t,n){n.d(t,{Z:()=>v});var a=n("4246"),r=n("7378"),l=n("4870"),i=n("5403"),o=n("3620"),s=n("7090"),d=n("6180"),u=n("3418"),c=n("9073");function m(e){var t,n;return null!==(n=null===(t=r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){let{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw Error("Docusaurus error: Bad <Tabs> child <".concat("string"==typeof e.type?e.type:e.type.name,'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.'))}))||void 0===t?void 0:t.filter(Boolean))&&void 0!==n?n:[]}function h(e){let{value:t,tabValues:n}=e;return n.some(e=>e.value===t)}var p=n("3344");function f(e){let{className:t,block:n,selectedValue:r,selectValue:o,tabValues:s}=e,d=[],{blockElementScrollPositionUntilNextRender:u}=(0,i.o5)(),c=e=>{let t=e.currentTarget,n=s[d.indexOf(t)].value;n!==r&&(u(t),o(n))},m=e=>{var t,n;let a=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{let n=d.indexOf(e.currentTarget)+1;a=null!==(t=d[n])&&void 0!==t?t:d[0];break}case"ArrowLeft":{let t=d.indexOf(e.currentTarget)-1;a=null!==(n=d[t])&&void 0!==n?n:d[d.length-1]}}null==a||a.focus()};return(0,a.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":n},t),children:s.map(e=>{let{value:t,label:n,attributes:i}=e;return(0,a.jsx)("li",{role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,ref:e=>d.push(e),onKeyDown:m,onClick:c,...i,className:(0,l.Z)("tabs__item","tabItem_l0OV",null==i?void 0:i.className,{"tabs__item--active":r===t}),children:null!=n?n:t},t)})})}function b(e){let{lazy:t,children:n,selectedValue:i}=e,o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){let e=o.find(e=>e.props.value===i);return e?(0,r.cloneElement)(e,{className:(0,l.Z)("margin-top--md",e.props.className)}):null}return(0,a.jsx)("div",{className:"margin-top--md",children:o.map((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==i}))})}function x(e){let t=function(e){let{defaultValue:t,queryString:n=!1,groupId:a}=e,l=function(e){let{values:t,children:n}=e;return(0,r.useMemo)(()=>{let e=null!=t?t:m(n).map(e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}});return!function(e){let t=(0,u.lx)(e,(e,t)=>e.value===t.value);if(t.length>0)throw Error('Docusaurus error: Duplicate values "'.concat(t.map(e=>e.value).join(", "),'" found in <Tabs>. Every value needs to be unique.'))}(e),e},[t,n])}(e),[i,p]=(0,r.useState)(()=>(function(e){var t;let{defaultValue:n,tabValues:a}=e;if(0===a.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:a}))throw Error('Docusaurus error: The <Tabs> has a defaultValue "'.concat(n,'" but none of its children has the corresponding value. Available values are: ').concat(a.map(e=>e.value).join(", "),". If you intend to show no default tab, use defaultValue={null} instead."));return n}let r=null!==(t=a.find(e=>e.default))&&void 0!==t?t:a[0];if(!r)throw Error("Unexpected error: 0 tabValues");return r.value})({defaultValue:t,tabValues:l})),[f,b]=function(e){let{queryString:t=!1,groupId:n}=e,a=(0,o.k6)(),l=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=n?n:null}({queryString:t,groupId:n});return[(0,d._X)(l),(0,r.useCallback)(e=>{if(!l)return;let t=new URLSearchParams(a.location.search);t.set(l,e),a.replace({...a.location,search:t.toString()})},[l,a])]}({queryString:n,groupId:a}),[x,v]=function(e){let{groupId:t}=e,n=t?"docusaurus.tab.".concat(t):null,[a,l]=(0,c.Nk)(n);return[a,(0,r.useCallback)(e=>{n&&l.set(e)},[n,l])]}({groupId:a}),g=(()=>{let e=null!=f?f:x;return h({value:e,tabValues:l})?e:null})();return(0,s.Z)(()=>{g&&p(g)},[g]),{selectedValue:i,selectValue:(0,r.useCallback)(e=>{if(!h({value:e,tabValues:l}))throw Error("Can't select invalid tab value=".concat(e));p(e),b(e),v(e)},[b,v,l]),tabValues:l}}(e);return(0,a.jsxs)("div",{className:(0,l.Z)("tabs-container","tabList_J5MA"),children:[(0,a.jsx)(f,{...t,...e}),(0,a.jsx)(b,{...t,...e})]})}function v(e){let t=(0,p.Z)();return(0,a.jsx)(x,{...e,children:m(e.children)},String(t))}},980:function(e,t,n){n.d(t,{Z:function(){return o},a:function(){return i}});var a=n(7378);let r={},l=a.createContext(r);function i(e){let t=a.useContext(l);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(l.Provider,{value:t},e.children)}}}]);