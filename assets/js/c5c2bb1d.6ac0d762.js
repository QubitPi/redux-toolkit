"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[127],{3411:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(7378),a=n(7140),r="tabItem_wHwb";function l(e){var t=e.children,n=e.hidden,l=e.className;return i.createElement("div",{role:"tabpanel",className:(0,a.Z)(r,l),hidden:n},t)}},2453:function(e,t,n){n.d(t,{Z:function(){return m}});var i=n(2685),a=n(7378),r=n(7140),l=n(362),s=n(56),o=n(5720),c=n(9169),u="tabList_J5MA",p="tabItem_l0OV";function d(e){var t,n,l=e.lazy,d=e.block,m=e.defaultValue,h=e.values,f=e.groupId,k=e.className,g=a.Children.map(e.children,(function(e){if((0,a.isValidElement)(e)&&"value"in e.props)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),y=null!=h?h:g.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),v=(0,s.l)(y,(function(e,t){return e.value===t.value}));if(v.length>0)throw new Error('Docusaurus error: Duplicate values "'+v.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var T=null===m?m:null!=(t=null!=m?m:null==(n=g.find((function(e){return e.props.default})))?void 0:n.props.value)?t:g[0].props.value;if(null!==T&&!y.some((function(e){return e.value===T})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+T+'" but none of its children has the corresponding value. Available values are: '+y.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var A=(0,o.U)(),b=A.tabGroupChoices,j=A.setTabGroupChoices,N=(0,a.useState)(T),w=N[0],x=N[1],S=[],I=(0,c.o5)().blockElementScrollPositionUntilNextRender;if(null!=f){var O=b[f];null!=O&&O!==w&&y.some((function(e){return e.value===O}))&&x(O)}var q=function(e){var t=e.currentTarget,n=S.indexOf(t),i=y[n].value;i!==w&&(I(t),x(i),null!=f&&j(f,String(i)))},R=function(e){var t,n=null;switch(e.key){case"ArrowRight":var i,a=S.indexOf(e.currentTarget)+1;n=null!=(i=S[a])?i:S[0];break;case"ArrowLeft":var r,l=S.indexOf(e.currentTarget)-1;n=null!=(r=S[l])?r:S[S.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:(0,r.Z)("tabs-container",u)},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":d},k)},y.map((function(e){var t=e.value,n=e.label,l=e.attributes;return a.createElement("li",(0,i.Z)({role:"tab",tabIndex:w===t?0:-1,"aria-selected":w===t,key:t,ref:function(e){return S.push(e)},onKeyDown:R,onFocus:q,onClick:q},l,{className:(0,r.Z)("tabs__item",p,null==l?void 0:l.className,{"tabs__item--active":w===t})}),null!=n?n:t)}))),l?(0,a.cloneElement)(g.filter((function(e){return e.props.value===w}))[0],{className:"margin-top--md"}):a.createElement("div",{className:"margin-top--md"},g.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==w})}))))}function m(e){var t=(0,l.Z)();return a.createElement(d,(0,i.Z)({key:String(t)},e))}},6425:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return u},default:function(){return f},frontMatter:function(){return c},metadata:function(){return p},toc:function(){return m}});var i=n(2685),a=n(1244),r=(n(7378),n(5318)),l=n(3411),s=n(2453),o=["components"],c={id:"matching-utilities",title:"Matching Utilities",sidebar_label:"Matching Utilities",hide_title:!0},u=void 0,p={unversionedId:"api/matching-utilities",id:"api/matching-utilities",title:"Matching Utilities",description:"&nbsp;",source:"@site/../docs/api/matching-utilities.mdx",sourceDirName:"api",slug:"/api/matching-utilities",permalink:"/api/matching-utilities",draft:!1,tags:[],version:"current",lastUpdatedAt:1716195420,formattedLastUpdatedAt:"May 20, 2024",frontMatter:{id:"matching-utilities",title:"Matching Utilities",sidebar_label:"Matching Utilities",hide_title:!0},sidebar:"docs",previous:{title:"createSelector",permalink:"/api/createSelector"},next:{title:"Other Exports",permalink:"/api/other-exports"}},d={},m=[{value:"General Purpose",id:"general-purpose",level:3},{value:"<code>createAsyncThunk</code>-specific matchers",id:"createasyncthunk-specific-matchers",level:3},{value:"<code>isAllOf</code>",id:"isallof",level:2},{value:"<code>isAnyOf</code>",id:"isanyof",level:2},{value:"<code>isAsyncThunkAction</code>",id:"isasyncthunkaction",level:2},{value:"<code>isPending</code>",id:"ispending",level:2},{value:"<code>isFulfilled</code>",id:"isfulfilled",level:2},{value:"<code>isRejected</code>",id:"isrejected",level:2},{value:"<code>isRejectedWithValue</code>",id:"isrejectedwithvalue",level:2},{value:"Using matchers to reduce code complexity, duplication and boilerplate",id:"using-matchers-to-reduce-code-complexity-duplication-and-boilerplate",level:2},{value:"Using matchers as a TypeScript Type Guard",id:"using-matchers-as-a-typescript-type-guard",level:2},{value:"Example",id:"example",level:2}],h={toc:m};function f(e){var t=e.components,n=(0,a.Z)(e,o);return(0,r.kt)("wrapper",(0,i.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"matching-utilities"},"Matching Utilities"),(0,r.kt)("p",null,"Redux Toolkit exports several type-safe action matching utilities that you can leverage when checking for specific kinds of actions. These are primarily useful for the ",(0,r.kt)("inlineCode",{parentName:"p"},"builder.addMatcher()")," cases in ",(0,r.kt)("inlineCode",{parentName:"p"},"createSlice")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"createReducer"),", as well as when writing custom middleware."),(0,r.kt)("h3",{id:"general-purpose"},"General Purpose"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#isallof"},(0,r.kt)("inlineCode",{parentName:"a"},"isAllOf"))," - returns true when ",(0,r.kt)("strong",{parentName:"li"},"all")," conditions are met"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#isanyof"},(0,r.kt)("inlineCode",{parentName:"a"},"isAnyOf"))," - returns true when ",(0,r.kt)("strong",{parentName:"li"},"at least one of")," the conditions are met")),(0,r.kt)("h3",{id:"createasyncthunk-specific-matchers"},(0,r.kt)("inlineCode",{parentName:"h3"},"createAsyncThunk"),"-specific matchers"),(0,r.kt)("p",null,"All these matchers can either be called with one or more thunks as arguments, in which case they will return a matcher function for that condition and thunks, or with one actions, in which case they will match for any thunk action with said condition."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#isasyncthunkaction"},(0,r.kt)("inlineCode",{parentName:"a"},"isAsyncThunkAction"))," - accepts one or more action creators and returns true when all match"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#ispending"},(0,r.kt)("inlineCode",{parentName:"a"},"isPending"))," - accepts one or more action creators and returns true when all match"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#isfulfilled"},(0,r.kt)("inlineCode",{parentName:"a"},"isFulfilled"))," - accepts one or more action creators and returns true when all match"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#isrejected"},(0,r.kt)("inlineCode",{parentName:"a"},"isRejected"))," - accepts one or more action creators and returns true when all match"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#isrejectedwithvalue"},(0,r.kt)("inlineCode",{parentName:"a"},"isRejectedWithValue"))," - accepts one or more action creators and returns true when all match")),(0,r.kt)("h2",{id:"isallof"},(0,r.kt)("inlineCode",{parentName:"h2"},"isAllOf")),(0,r.kt)("p",null,"A higher-order function that accepts one or more of:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"redux-toolkit")," action creator functions such as the ones produced by:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/api/createAction"},(0,r.kt)("inlineCode",{parentName:"a"},"createAction"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/api/createSlice#return-value"},(0,r.kt)("inlineCode",{parentName:"a"},"createSlice"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/api/createAsyncThunk#promise-lifecycle-actions"},(0,r.kt)("inlineCode",{parentName:"a"},"createAsyncThunk"))))),(0,r.kt)("li",{parentName:"ul"},"type guard functions"),(0,r.kt)("li",{parentName:"ul"},"custom action creator functions that have a ",(0,r.kt)("inlineCode",{parentName:"li"},".match")," property that is a type guard")),(0,r.kt)("p",null,"It will return a type guard function that returns ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," if ",(0,r.kt)("em",{parentName:"p"},"all")," of the provided functions match."),(0,r.kt)("h2",{id:"isanyof"},(0,r.kt)("inlineCode",{parentName:"h2"},"isAnyOf")),(0,r.kt)("p",null,"Accepts the same inputs as ",(0,r.kt)("inlineCode",{parentName:"p"},"isAllOf")," and will return a type guard function that returns ",(0,r.kt)("inlineCode",{parentName:"p"},"true")," if at least one of the provided functions match."),(0,r.kt)("h2",{id:"isasyncthunkaction"},(0,r.kt)("inlineCode",{parentName:"h2"},"isAsyncThunkAction")),(0,r.kt)("p",null,"A higher-order function that returns a type guard function that may be used to check whether an action was created by ",(0,r.kt)("a",{parentName:"p",href:"/api/createAsyncThunk"},(0,r.kt)("inlineCode",{parentName:"a"},"createAsyncThunk")),"."),(0,r.kt)(s.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"ts",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="isAsyncThunkAction usage"',title:'"isAsyncThunkAction','usage"':!0},"import { isAsyncThunkAction } from '@reduxjs/toolkit'\nimport type { UnknownAction } from '@reduxjs/toolkit'\nimport { requestThunk1, requestThunk2 } from '@virtual/matchers'\n\nconst isARequestAction = isAsyncThunkAction(requestThunk1, requestThunk2)\n\nfunction handleRequestAction(action: UnknownAction) {\n  if (isARequestAction(action)) {\n    // action is an action dispatched by either `requestThunk1` or `requestThunk2`\n  }\n}\n"))),(0,r.kt)(l.Z,{value:"js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="isAsyncThunkAction usage"',title:'"isAsyncThunkAction','usage"':!0},"import { isAsyncThunkAction } from '@reduxjs/toolkit'\nimport { requestThunk1, requestThunk2 } from '@virtual/matchers'\n\nconst isARequestAction = isAsyncThunkAction(requestThunk1, requestThunk2)\n\nfunction handleRequestAction(action) {\n  if (isARequestAction(action)) {\n    // action is an action dispatched by either `requestThunk1` or `requestThunk2`\n  }\n}\n")))),(0,r.kt)("h2",{id:"ispending"},(0,r.kt)("inlineCode",{parentName:"h2"},"isPending")),(0,r.kt)("p",null,"A higher-order function that returns a type guard function that may be used to check whether an action is a 'pending' action creator from the ",(0,r.kt)("inlineCode",{parentName:"p"},"createAsyncThunk")," promise lifecycle."),(0,r.kt)(s.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"ts",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="isPending usage"',title:'"isPending','usage"':!0},"import { isPending } from '@reduxjs/toolkit'\nimport type { UnknownAction } from '@reduxjs/toolkit'\nimport { requestThunk1, requestThunk2 } from '@virtual/matchers'\n\nconst isAPendingAction = isPending(requestThunk1, requestThunk2)\n\nfunction handlePendingAction(action: UnknownAction) {\n  if (isAPendingAction(action)) {\n    // action is a pending action dispatched by either `requestThunk1` or `requestThunk2`\n  }\n}\n"))),(0,r.kt)(l.Z,{value:"js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="isPending usage"',title:'"isPending','usage"':!0},"import { isPending } from '@reduxjs/toolkit'\nimport { requestThunk1, requestThunk2 } from '@virtual/matchers'\n\nconst isAPendingAction = isPending(requestThunk1, requestThunk2)\n\nfunction handlePendingAction(action) {\n  if (isAPendingAction(action)) {\n    // action is a pending action dispatched by either `requestThunk1` or `requestThunk2`\n  }\n}\n")))),(0,r.kt)("h2",{id:"isfulfilled"},(0,r.kt)("inlineCode",{parentName:"h2"},"isFulfilled")),(0,r.kt)("p",null,"A higher-order function that returns a type guard function that may be used to check whether an action is a 'fulfilled'' action creator from the ",(0,r.kt)("inlineCode",{parentName:"p"},"createAsyncThunk")," promise lifecycle."),(0,r.kt)(s.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"ts",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="isFulfilled usage"',title:'"isFulfilled','usage"':!0},"import { isFulfilled } from '@reduxjs/toolkit'\nimport type { UnknownAction } from '@reduxjs/toolkit'\nimport { requestThunk1, requestThunk2 } from '@virtual/matchers'\n\nconst isAFulfilledAction = isFulfilled(requestThunk1, requestThunk2)\n\nfunction handleFulfilledAction(action: UnknownAction) {\n  if (isAFulfilledAction(action)) {\n    // action is a fulfilled action dispatched by either `requestThunk1` or `requestThunk2`\n  }\n}\n"))),(0,r.kt)(l.Z,{value:"js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="isFulfilled usage"',title:'"isFulfilled','usage"':!0},"import { isFulfilled } from '@reduxjs/toolkit'\nimport { requestThunk1, requestThunk2 } from '@virtual/matchers'\n\nconst isAFulfilledAction = isFulfilled(requestThunk1, requestThunk2)\n\nfunction handleFulfilledAction(action) {\n  if (isAFulfilledAction(action)) {\n    // action is a fulfilled action dispatched by either `requestThunk1` or `requestThunk2`\n  }\n}\n")))),(0,r.kt)("h2",{id:"isrejected"},(0,r.kt)("inlineCode",{parentName:"h2"},"isRejected")),(0,r.kt)("p",null,"A higher-order function that returns a type guard function that may be used to check whether an action is a 'rejected' action creator from the ",(0,r.kt)("inlineCode",{parentName:"p"},"createAsyncThunk")," promise lifecycle."),(0,r.kt)(s.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"ts",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="isRejected usage"',title:'"isRejected','usage"':!0},"import { isRejected } from '@reduxjs/toolkit'\nimport type { UnknownAction } from '@reduxjs/toolkit'\nimport { requestThunk1, requestThunk2 } from '@virtual/matchers'\n\nconst isARejectedAction = isRejected(requestThunk1, requestThunk2)\n\nfunction handleRejectedAction(action: UnknownAction) {\n  if (isARejectedAction(action)) {\n    // action is a rejected action dispatched by either `requestThunk1` or `requestThunk2`\n  }\n}\n"))),(0,r.kt)(l.Z,{value:"js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="isRejected usage"',title:'"isRejected','usage"':!0},"import { isRejected } from '@reduxjs/toolkit'\nimport { requestThunk1, requestThunk2 } from '@virtual/matchers'\n\nconst isARejectedAction = isRejected(requestThunk1, requestThunk2)\n\nfunction handleRejectedAction(action) {\n  if (isARejectedAction(action)) {\n    // action is a rejected action dispatched by either `requestThunk1` or `requestThunk2`\n  }\n}\n")))),(0,r.kt)("h2",{id:"isrejectedwithvalue"},(0,r.kt)("inlineCode",{parentName:"h2"},"isRejectedWithValue")),(0,r.kt)("p",null,"A higher-order function that returns a type guard function that may be used to check whether an action is a 'rejected' action creator from the ",(0,r.kt)("inlineCode",{parentName:"p"},"createAsyncThunk")," promise lifecycle that was created by ",(0,r.kt)("a",{parentName:"p",href:"/api/createAsyncThunk#handling-thunk-errors"},(0,r.kt)("inlineCode",{parentName:"a"},"rejectWithValue")),"."),(0,r.kt)(s.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"ts",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="isRejectedWithValue usage"',title:'"isRejectedWithValue','usage"':!0},"import { isRejectedWithValue } from '@reduxjs/toolkit'\nimport type { UnknownAction } from '@reduxjs/toolkit'\nimport { requestThunk1, requestThunk2 } from '@virtual/matchers'\n\nconst isARejectedWithValueAction = isRejectedWithValue(\n  requestThunk1,\n  requestThunk2\n)\n\nfunction handleRejectedWithValueAction(action: UnknownAction) {\n  if (isARejectedWithValueAction(action)) {\n    // action is a rejected action dispatched by either `requestThunk1` or `requestThunk2`\n    // where rejectWithValue was used\n  }\n}\n"))),(0,r.kt)(l.Z,{value:"js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="isRejectedWithValue usage"',title:'"isRejectedWithValue','usage"':!0},"import { isRejectedWithValue } from '@reduxjs/toolkit'\nimport { requestThunk1, requestThunk2 } from '@virtual/matchers'\n\nconst isARejectedWithValueAction = isRejectedWithValue(\n  requestThunk1,\n  requestThunk2\n)\n\nfunction handleRejectedWithValueAction(action) {\n  if (isARejectedWithValueAction(action)) {\n    // action is a rejected action dispatched by either `requestThunk1` or `requestThunk2`\n    // where rejectWithValue was used\n  }\n}\n")))),(0,r.kt)("h2",{id:"using-matchers-to-reduce-code-complexity-duplication-and-boilerplate"},"Using matchers to reduce code complexity, duplication and boilerplate"),(0,r.kt)("p",null,"When using the ",(0,r.kt)("inlineCode",{parentName:"p"},"builder")," pattern to construct a reducer, we add cases or matchers one at a time. However, by using ",(0,r.kt)("inlineCode",{parentName:"p"},"isAnyOf")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"isAllOf"),",\nwe're able to easily use the same matcher for several cases in a type-safe manner."),(0,r.kt)("p",null,"First, let's examine an unnecessarily complex example:"),(0,r.kt)(s.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"ts",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="Example without using a matcher utility"',title:'"Example',without:!0,using:!0,a:!0,matcher:!0,'utility"':!0},"import { createAsyncThunk, createReducer } from '@reduxjs/toolkit'\nimport type { PayloadAction } from '@reduxjs/toolkit'\n\ninterface Data {\n  isInteresting: boolean\n  isSpecial: boolean\n}\n\ninterface Special extends Data {\n  isSpecial: true\n}\n\ninterface Interesting extends Data {\n  isInteresting: true\n}\n\nfunction isSpecial(\n  action: PayloadAction<Data>\n): action is PayloadAction<Special> {\n  return action.payload.isSpecial\n}\n\nfunction isInteresting(\n  action: PayloadAction<Data>\n): action is PayloadAction<Interesting> {\n  return action.payload.isInteresting\n}\n\ninterface ExampleState {\n  isSpecial: boolean\n  isInteresting: boolean\n}\n\nconst initialState = {\n  isSpecial: false,\n  isInteresting: false,\n} satisfies ExampleState as ExampleState\n\nexport const isSpecialAndInterestingThunk = createAsyncThunk(\n  'isSpecialAndInterestingThunk',\n  () => {\n    return {\n      isSpecial: true,\n      isInteresting: true,\n    }\n  }\n)\n\n// This has unnecessary complexity\nconst loadingReducer = createReducer(initialState, (builder) => {\n  builder.addCase(isSpecialAndInterestingThunk.fulfilled, (state, action) => {\n    if (isSpecial(action)) {\n      state.isSpecial = true\n    }\n    if (isInteresting(action)) {\n      state.isInteresting = true\n    }\n  })\n})\n"))),(0,r.kt)(l.Z,{value:"js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Example without using a matcher utility"',title:'"Example',without:!0,using:!0,a:!0,matcher:!0,'utility"':!0},"import { createAsyncThunk, createReducer } from '@reduxjs/toolkit'\n\nfunction isSpecial(action) {\n  return action.payload.isSpecial\n}\n\nfunction isInteresting(action) {\n  return action.payload.isInteresting\n}\n\nconst initialState = {\n  isSpecial: false,\n  isInteresting: false,\n}\n\nexport const isSpecialAndInterestingThunk = createAsyncThunk(\n  'isSpecialAndInterestingThunk',\n  () => {\n    return {\n      isSpecial: true,\n      isInteresting: true,\n    }\n  }\n)\n\n// This has unnecessary complexity\nconst loadingReducer = createReducer(initialState, (builder) => {\n  builder.addCase(isSpecialAndInterestingThunk.fulfilled, (state, action) => {\n    if (isSpecial(action)) {\n      state.isSpecial = true\n    }\n    if (isInteresting(action)) {\n      state.isInteresting = true\n    }\n  })\n})\n")))),(0,r.kt)("p",null,"In this scenario, we can use ",(0,r.kt)("inlineCode",{parentName:"p"},"isAllOf")," to simplify our code and reduce some of the boilerplate."),(0,r.kt)(s.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"ts",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="Refactoring with isAllOf"',title:'"Refactoring',with:!0,'isAllOf"':!0},"import { createReducer, isAllOf } from '@reduxjs/toolkit'\nimport {\n  isSpecialAndInterestingThunk,\n  initialState,\n  isSpecial,\n  isInteresting,\n} from '@virtual/matchers' // This is a fake pkg that provides the types shown above\nimport type { Data } from '@virtual/matchers' // This is a fake pkg that provides the types shown above\n\nconst loadingReducer = createReducer(initialState, (builder) => {\n  builder\n    .addMatcher(\n      isAllOf(isSpecialAndInterestingThunk.fulfilled, isSpecial),\n      (state, action) => {\n        state.isSpecial = true\n      }\n    )\n    .addMatcher(\n      isAllOf(isSpecialAndInterestingThunk.fulfilled, isInteresting),\n      (state, action) => {\n        state.isInteresting = true\n      }\n    )\n})\n"))),(0,r.kt)(l.Z,{value:"js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Refactoring with isAllOf"',title:'"Refactoring',with:!0,'isAllOf"':!0},"import { createReducer, isAllOf } from '@reduxjs/toolkit'\nimport {\n  isSpecialAndInterestingThunk,\n  initialState,\n  isSpecial,\n  isInteresting,\n} from '@virtual/matchers' // This is a fake pkg that provides the types shown above\n\nconst loadingReducer = createReducer(initialState, (builder) => {\n  builder\n    .addMatcher(\n      isAllOf(isSpecialAndInterestingThunk.fulfilled, isSpecial),\n      (state, action) => {\n        state.isSpecial = true\n      }\n    )\n    .addMatcher(\n      isAllOf(isSpecialAndInterestingThunk.fulfilled, isInteresting),\n      (state, action) => {\n        state.isInteresting = true\n      }\n    )\n})\n")))),(0,r.kt)("h2",{id:"using-matchers-as-a-typescript-type-guard"},"Using matchers as a TypeScript Type Guard"),(0,r.kt)("p",null,"The function returned by ",(0,r.kt)("inlineCode",{parentName:"p"},"isAllOf")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"isAnyOf")," can also be used as a TypeScript type guard in other contexts."),(0,r.kt)(s.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"ts",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="Using isAllOf as a type guard"',title:'"Using',isAllOf:!0,as:!0,a:!0,type:!0,'guard"':!0},"import { isAllOf } from '@reduxjs/toolkit'\nimport type { PayloadAction } from '@reduxjs/toolkit'\nimport { isSpecial, isInteresting } from '@virtual/matchers' // This is a fake pkg that provides the types shown above\nimport type { Data } from '@virtual/matchers' // This is a fake pkg that provides the types shown above\n\nconst isSpecialAndInteresting = isAllOf(isSpecial, isInteresting)\n\nfunction someFunction(action: PayloadAction<Data>) {\n  if (isSpecialAndInteresting(action)) {\n    // \"action\" will be correctly typed as:\n    // `PayloadAction<Special> & PayloadAction<Interesting>`\n  }\n}\n"))),(0,r.kt)(l.Z,{value:"js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Using isAllOf as a type guard"',title:'"Using',isAllOf:!0,as:!0,a:!0,type:!0,'guard"':!0},"import { isAllOf } from '@reduxjs/toolkit'\nimport { isSpecial, isInteresting } from '@virtual/matchers' // This is a fake pkg that provides the types shown above\n\nconst isSpecialAndInteresting = isAllOf(isSpecial, isInteresting)\n\nfunction someFunction(action) {\n  if (isSpecialAndInteresting(action)) {\n    // \"action\" will be correctly typed as:\n    // `PayloadAction<Special> & PayloadAction<Interesting>`\n  }\n}\n")))),(0,r.kt)(s.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"ts",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="Using isAnyOf as a type guard"',title:'"Using',isAnyOf:!0,as:!0,a:!0,type:!0,'guard"':!0},"import { isAnyOf } from '@reduxjs/toolkit'\nimport type { PayloadAction } from '@reduxjs/toolkit'\nimport { Data, isSpecial, isInteresting } from '@virtual/matchers' // this is a fake pkg that provides the types shown above\n\nconst isSpecialOrInteresting = isAnyOf(isSpecial, isInteresting)\n\nfunction someFunction(action: PayloadAction<Data>) {\n  if (isSpecialOrInteresting(action)) {\n    // \"action\" will be correctly typed as:\n    // `PayloadAction<Special> | PayloadAction<Interesting>`\n  }\n}\n"))),(0,r.kt)(l.Z,{value:"js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Using isAnyOf as a type guard"',title:'"Using',isAnyOf:!0,as:!0,a:!0,type:!0,'guard"':!0},"import { isAnyOf } from '@reduxjs/toolkit'\nimport { isSpecial, isInteresting } from '@virtual/matchers' // this is a fake pkg that provides the types shown above\n\nconst isSpecialOrInteresting = isAnyOf(isSpecial, isInteresting)\n\nfunction someFunction(action) {\n  if (isSpecialOrInteresting(action)) {\n    // \"action\" will be correctly typed as:\n    // `PayloadAction<Special> | PayloadAction<Interesting>`\n  }\n}\n")))),(0,r.kt)("h2",{id:"example"},"Example"),(0,r.kt)("iframe",{src:"https://codesandbox.io/embed/redux-toolkit-matchers-example-e765q?fontsize=14&hidenavigation=1&module=%2Fsrc%2Ffeatures%2Fcounter%2FcounterSlice.ts&theme=dark&runonclick=1",style:{width:"100%",height:"500px",border:0,borderRadius:4,overflow:"hidden"},title:"redux-toolkit-matchers-example",allow:"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking",sandbox:"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"}))}f.isMDXComponent=!0},5318:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var i=n(7378);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var o=i.createContext({}),c=function(e){var t=i.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=c(e.components);return i.createElement(o.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(n),m=a,h=d["".concat(o,".").concat(m)]||d[m]||p[m]||r;return n?i.createElement(h,l(l({ref:t},u),{},{components:n})):i.createElement(h,l({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=d;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:a,l[1]=s;for(var c=2;c<r;c++)l[c]=n[c];return i.createElement.apply(null,l)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);