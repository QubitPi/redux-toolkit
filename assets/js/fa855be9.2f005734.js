"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["4717"],{3523:function(e,n,i){i.r(n),i.d(n,{default:()=>h,frontMatter:()=>l,metadata:()=>t,assets:()=>c,toc:()=>u,contentTitle:()=>d});var t=JSON.parse('{"id":"rtk-query/api/created-api/code-splitting","title":"API Slices: Code Splitting and Generation","description":"&nbsp;","source":"@site/../docs/rtk-query/api/created-api/code-splitting.mdx","sourceDirName":"rtk-query/api/created-api","slug":"/rtk-query/api/created-api/code-splitting","permalink":"/rtk-query/api/created-api/code-splitting","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1754248441000,"frontMatter":{"id":"code-splitting","title":"API Slices: Code Splitting and Generation","sidebar_label":"Code Splitting","hide_title":true},"sidebar":"docs","previous":{"title":"React Hooks","permalink":"/rtk-query/api/created-api/hooks"},"next":{"title":"API Slice Utilities","permalink":"/rtk-query/api/created-api/api-slice-utils"}}'),a=i("4246"),r=i("980"),s=i("8049"),o=i("5181");let l={id:"code-splitting",title:"API Slices: Code Splitting and Generation",sidebar_label:"Code Splitting",hide_title:!0},d="API Slices: Code Splitting and Generation",c={},u=[{value:"<code>injectEndpoints</code>",id:"injectendpoints",level:2},{value:"Signature",id:"signature",level:4},{value:"Description",id:"description",level:4},{value:"<code>enhanceEndpoints</code>",id:"enhanceendpoints",level:2},{value:"Signature",id:"signature-1",level:4},{value:"Description",id:"description-1",level:4}];function p(e){let n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h4:"h4",header:"header",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"\xa0"}),"\n",(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"api-slices-code-splitting-and-generation",children:"API Slices: Code Splitting and Generation"})}),"\n",(0,a.jsxs)(n.p,{children:["Each API slice allows ",(0,a.jsx)(n.a,{href:"/rtk-query/usage/code-splitting",children:"additional endpoint definitions to be injected at runtime"})," after the initial API slice has been defined. This can be beneficial for apps that may have ",(0,a.jsx)(n.em,{children:"many"})," endpoints."]}),"\n",(0,a.jsxs)(n.p,{children:["The individual API slice endpoint definitions can also be split across multiple files. This is primarily useful for working with API slices that were ",(0,a.jsx)(n.a,{href:"/rtk-query/usage/code-generation",children:"code-generated from an API schema file"}),", allowing you to add additional custom behavior and configuration to a set of automatically-generated endpoint definitions."]}),"\n",(0,a.jsxs)(n.p,{children:["Each API slice object has ",(0,a.jsx)(n.code,{children:"injectEndpoints"})," and ",(0,a.jsx)(n.code,{children:"enhanceEndpoints"})," functions to support these use cases."]}),"\n",(0,a.jsx)(n.h2,{id:"injectendpoints",children:(0,a.jsx)(n.code,{children:"injectEndpoints"})}),"\n",(0,a.jsx)(n.h4,{id:"signature",children:"Signature"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",metastring:"no-transpile",children:"const injectEndpoints = (endpointOptions: InjectedEndpointOptions) =>\n  EnhancedApiSlice\n\ninterface InjectedEndpointOptions {\n  endpoints: (build: EndpointBuilder) => NewEndpointDefinitions\n  /**\n   * Optionally allows endpoints to be overridden if defined by multiple `injectEndpoints` calls.\n   *\n   * If set to `true`, will override existing endpoints with the new definition.\n   * If set to `'throw'`, will throw an error if an endpoint is redefined with a different definition.\n   * If set to `false` (or unset), will not override existing endpoints with the new definition, and log a warning in development.\n   */\n  overrideExisting?: boolean | 'throw'\n}\n"})}),"\n",(0,a.jsx)(n.h4,{id:"description",children:"Description"}),"\n",(0,a.jsxs)(n.p,{children:["Accepts an options object containing the same ",(0,a.jsx)(n.code,{children:"endpoints"})," builder callback you would pass to ",(0,a.jsx)(n.a,{href:"/rtk-query/api/createApi#endpoints",children:(0,a.jsx)(n.code,{children:"createApi.endpoints"})}),". Any endpoint definitions defined using that builder will be merged into the existing endpoint definitions for this API slice using a shallow merge, so any new endpoint definitions will override existing endpoints with the same name."]}),"\n",(0,a.jsx)(n.p,{children:"Returns an updated and enhanced version of the API slice object, containing the combined endpoint definitions."}),"\n",(0,a.jsxs)(n.p,{children:["Endpoints will not be overridden unless ",(0,a.jsx)(n.code,{children:"overrideExisting"})," is set to ",(0,a.jsx)(n.code,{children:"true"}),". If not, a development mode warning will be shown to notify you if there is a name clash between endpoint definitions."]}),"\n",(0,a.jsx)(n.p,{children:"This method is primarily useful for code splitting and hot reloading."}),"\n",(0,a.jsx)(n.h2,{id:"enhanceendpoints",children:(0,a.jsx)(n.code,{children:"enhanceEndpoints"})}),"\n",(0,a.jsx)(n.h4,{id:"signature-1",children:"Signature"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",metastring:"no-transpile",children:"const enhanceEndpoints = (endpointOptions: EnhanceEndpointsOptions) =>\n  EnhancedApiSlice\n\ninterface EnhanceEndpointsOptions {\n  addTagTypes?: readonly string[]\n  endpoints?: Record<string, Partial<EndpointDefinition>>\n}\n"})}),"\n",(0,a.jsx)(n.h4,{id:"description-1",children:"Description"}),"\n",(0,a.jsxs)(n.p,{children:["Any provided tag types or endpoint definitions will be merged into the existing endpoint definitions for this API slice. Unlike ",(0,a.jsx)(n.code,{children:"injectEndpoints"}),", the partial endpoint definitions will not ",(0,a.jsx)(n.em,{children:"replace"})," existing definitions, but are rather merged together on a per-definition basis (ie, ",(0,a.jsx)(n.code,{children:"Object.assign(existingEndpoint, newPartialEndpoint)"}),")."]}),"\n",(0,a.jsx)(n.p,{children:"Returns an updated and enhanced version of the API slice object, containing the combined endpoint definitions."}),"\n",(0,a.jsx)(n.p,{children:"This is primarily useful for taking an API slice object that was code-generated from an API schema file like OpenAPI, and adding additional specific hand-written configuration for cache invalidation management on top of the generated endpoint definitions."}),"\n",(0,a.jsxs)(n.p,{children:["For example, ",(0,a.jsx)(n.code,{children:"enhanceEndpoints"})," can be used to modify caching behavior by changing the values of ",(0,a.jsx)(n.code,{children:"providesTags"}),", ",(0,a.jsx)(n.code,{children:"invalidatesTags"}),", and ",(0,a.jsx)(n.code,{children:"keepUnusedDataFor"}),":"]}),"\n",(0,a.jsxs)(o.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],children:[(0,a.jsx)(s.Z,{value:"ts",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"import { api } from './api'\n\nconst enhancedApi = api.enhanceEndpoints({\n  addTagTypes: ['User'],\n  endpoints: {\n    getUserByUserId: {\n      providesTags: ['User'],\n    },\n    patchUserByUserId: {\n      invalidatesTags: ['User'],\n    },\n    // alternatively, define a function which is called with the endpoint definition as an argument\n    getUsers(endpoint) {\n      endpoint.providesTags = ['User']\n      endpoint.keepUnusedDataFor = 120\n    },\n  },\n})\n"})})}),(0,a.jsx)(s.Z,{value:"js",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"import { api } from './api'\n\nconst enhancedApi = api.enhanceEndpoints({\n  addTagTypes: ['User'],\n  endpoints: {\n    getUserByUserId: {\n      providesTags: ['User'],\n    },\n    patchUserByUserId: {\n      invalidatesTags: ['User'],\n    },\n    // alternatively, define a function which is called with the endpoint definition as an argument\n    getUsers(endpoint) {\n      endpoint.providesTags = ['User']\n      endpoint.keepUnusedDataFor = 120\n    },\n  },\n})\n"})})})]})]})}function h(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},8049:function(e,n,i){i.d(n,{Z:()=>r});var t=i("4246");i("7378");var a=i("4870");function r(e){let{children:n,hidden:i,className:r}=e;return(0,t.jsx)("div",{role:"tabpanel",className:(0,a.Z)("tabItem_wHwb",r),hidden:i,children:n})}},5181:function(e,n,i){i.d(n,{Z:()=>j});var t=i("4246"),a=i("7378"),r=i("4870"),s=i("5403"),o=i("3620"),l=i("7090"),d=i("6180"),c=i("3418"),u=i("9073");function p(e){var n,i;return null!==(i=null===(n=a.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){let{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw Error("Docusaurus error: Bad <Tabs> child <".concat("string"==typeof e.type?e.type:e.type.name,'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.'))}))||void 0===n?void 0:n.filter(Boolean))&&void 0!==i?i:[]}function h(e){let{value:n,tabValues:i}=e;return i.some(e=>e.value===n)}var f=i("3344");function g(e){let{className:n,block:i,selectedValue:a,selectValue:o,tabValues:l}=e,d=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.o5)(),u=e=>{let n=e.currentTarget,i=l[d.indexOf(n)].value;i!==a&&(c(n),o(i))},p=e=>{var n,i;let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{let i=d.indexOf(e.currentTarget)+1;t=null!==(n=d[i])&&void 0!==n?n:d[0];break}case"ArrowLeft":{let n=d.indexOf(e.currentTarget)-1;t=null!==(i=d[n])&&void 0!==i?i:d[d.length-1]}}null==t||t.focus()};return(0,t.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":i},n),children:l.map(e=>{let{value:n,label:i,attributes:s}=e;return(0,t.jsx)("li",{role:"tab",tabIndex:a===n?0:-1,"aria-selected":a===n,ref:e=>d.push(e),onKeyDown:p,onClick:u,...s,className:(0,r.Z)("tabs__item","tabItem_l0OV",null==s?void 0:s.className,{"tabs__item--active":a===n}),children:null!=i?i:n},n)})})}function m(e){let{lazy:n,children:i,selectedValue:s}=e,o=(Array.isArray(i)?i:[i]).filter(Boolean);if(n){let e=o.find(e=>e.props.value===s);return e?(0,a.cloneElement)(e,{className:(0,r.Z)("margin-top--md",e.props.className)}):null}return(0,t.jsx)("div",{className:"margin-top--md",children:o.map((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==s}))})}function v(e){let n=function(e){let{defaultValue:n,queryString:i=!1,groupId:t}=e,r=function(e){let{values:n,children:i}=e;return(0,a.useMemo)(()=>{let e=null!=n?n:p(i).map(e=>{let{props:{value:n,label:i,attributes:t,default:a}}=e;return{value:n,label:i,attributes:t,default:a}});return!function(e){let n=(0,c.lx)(e,(e,n)=>e.value===n.value);if(n.length>0)throw Error('Docusaurus error: Duplicate values "'.concat(n.map(e=>e.value).join(", "),'" found in <Tabs>. Every value needs to be unique.'))}(e),e},[n,i])}(e),[s,f]=(0,a.useState)(()=>(function(e){var n;let{defaultValue:i,tabValues:t}=e;if(0===t.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(i){if(!h({value:i,tabValues:t}))throw Error('Docusaurus error: The <Tabs> has a defaultValue "'.concat(i,'" but none of its children has the corresponding value. Available values are: ').concat(t.map(e=>e.value).join(", "),". If you intend to show no default tab, use defaultValue={null} instead."));return i}let a=null!==(n=t.find(e=>e.default))&&void 0!==n?n:t[0];if(!a)throw Error("Unexpected error: 0 tabValues");return a.value})({defaultValue:n,tabValues:r})),[g,m]=function(e){let{queryString:n=!1,groupId:i}=e,t=(0,o.k6)(),r=function(e){let{queryString:n=!1,groupId:i}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!i)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=i?i:null}({queryString:n,groupId:i});return[(0,d._X)(r),(0,a.useCallback)(e=>{if(!r)return;let n=new URLSearchParams(t.location.search);n.set(r,e),t.replace({...t.location,search:n.toString()})},[r,t])]}({queryString:i,groupId:t}),[v,j]=function(e){let{groupId:n}=e,i=n?"docusaurus.tab.".concat(n):null,[t,r]=(0,u.Nk)(i);return[t,(0,a.useCallback)(e=>{i&&r.set(e)},[i,r])]}({groupId:t}),x=(()=>{let e=null!=g?g:v;return h({value:e,tabValues:r})?e:null})();return(0,l.Z)(()=>{x&&f(x)},[x]),{selectedValue:s,selectValue:(0,a.useCallback)(e=>{if(!h({value:e,tabValues:r}))throw Error("Can't select invalid tab value=".concat(e));f(e),m(e),j(e)},[m,j,r]),tabValues:r}}(e);return(0,t.jsxs)("div",{className:(0,r.Z)("tabs-container","tabList_J5MA"),children:[(0,t.jsx)(g,{...n,...e}),(0,t.jsx)(m,{...n,...e})]})}function j(e){let n=(0,f.Z)();return(0,t.jsx)(v,{...e,children:p(e.children)},String(n))}},980:function(e,n,i){i.d(n,{Z:function(){return o},a:function(){return s}});var t=i(7378);let a={},r=t.createContext(a);function s(e){let n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);