"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["1120"],{6480:function(e,t,r){r.r(t),r.d(t,{default:()=>m,frontMatter:()=>s,metadata:()=>n,assets:()=>u,toc:()=>d,contentTitle:()=>c});var n=JSON.parse('{"id":"rtk-query/usage/customizing-create-api","title":"Customizing createApi","description":"RTK Query > Usage > Customizing createApi: adding customized variations","source":"@site/../docs/rtk-query/usage/customizing-create-api.mdx","sourceDirName":"rtk-query/usage","slug":"/rtk-query/usage/customizing-create-api","permalink":"/rtk-query/usage/customizing-create-api","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1747236559000,"frontMatter":{"id":"customizing-create-api","title":"Customizing createApi","sidebar_label":"Customizing createApi","hide_title":true,"description":"RTK Query > Usage > Customizing createApi: adding customized variations"},"sidebar":"docs","previous":{"title":"Usage Without React Hooks","permalink":"/rtk-query/usage/usage-without-react-hooks"},"next":{"title":"createApi","permalink":"/rtk-query/api/createApi"}}'),o=r("4246"),a=r("980"),i=r("8049"),l=r("5181");let s={id:"customizing-create-api",title:"Customizing createApi",sidebar_label:"Customizing createApi",hide_title:!0,description:"RTK Query > Usage > Customizing createApi: adding customized variations"},c="Customizing createApi",u={},d=[{value:"Customizing the React-Redux Hooks",id:"customizing-the-react-redux-hooks",level:2},{value:"Customizing <code>createSelector</code> for RTKQ",id:"customizing-createselector-for-rtkq",level:2},{value:"Creating your own module",id:"creating-your-own-module",level:2}];function p(e){let t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"\xa0"}),"\n",(0,o.jsx)(t.header,{children:(0,o.jsxs)(t.h1,{id:"customizing-createapi",children:["Customizing ",(0,o.jsx)(t.code,{children:"createApi"})]})}),"\n",(0,o.jsxs)(t.p,{children:["Currently, RTK Query includes two variants of ",(0,o.jsx)(t.code,{children:"createApi"}),":"]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"createBaseApi"}),", which contains only the UI-agnostic Redux logic (the core module)"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"createApi"}),", which contains both the core and React hooks modules"]}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["You can create your own versions of ",(0,o.jsx)(t.code,{children:"createApi"})," by either specifying non-default options for the modules or by adding your own modules."]}),"\n",(0,o.jsx)(t.h2,{id:"customizing-the-react-redux-hooks",children:"Customizing the React-Redux Hooks"}),"\n",(0,o.jsxs)(t.p,{children:["If you want the hooks to use different versions of ",(0,o.jsx)(t.code,{children:"useSelector"}),", ",(0,o.jsx)(t.code,{children:"useDispatch"})," and ",(0,o.jsx)(t.code,{children:"useStore"}),", such as if you are using a custom context, you can pass these in at module creation:"]}),"\n",(0,o.jsxs)(l.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],children:[(0,o.jsx)(i.Z,{value:"ts",children:(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"import * as React from 'react'\nimport {\n  createDispatchHook,\n  createSelectorHook,\n  createStoreHook,\n  ReactReduxContextValue,\n} from 'react-redux'\nimport {\n  buildCreateApi,\n  coreModule,\n  reactHooksModule,\n} from '@reduxjs/toolkit/query/react'\n\nconst MyContext = React.createContext<ReactReduxContextValue | null>(null)\nconst customCreateApi = buildCreateApi(\n  coreModule(),\n  reactHooksModule({\n    hooks: {\n      useDispatch: createDispatchHook(MyContext),\n      useSelector: createSelectorHook(MyContext),\n      useStore: createStoreHook(MyContext),\n    },\n  }),\n)\n"})})}),(0,o.jsx)(i.Z,{value:"js",children:(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"import * as React from 'react'\nimport {\n  createDispatchHook,\n  createSelectorHook,\n  createStoreHook,\n} from 'react-redux'\nimport {\n  buildCreateApi,\n  coreModule,\n  reactHooksModule,\n} from '@reduxjs/toolkit/query/react'\n\nconst MyContext = React.createContext(null)\nconst customCreateApi = buildCreateApi(\n  coreModule(),\n  reactHooksModule({\n    hooks: {\n      useDispatch: createDispatchHook(MyContext),\n      useSelector: createSelectorHook(MyContext),\n      useStore: createStoreHook(MyContext),\n    },\n  }),\n)\n"})})})]}),"\n",(0,o.jsxs)(t.h2,{id:"customizing-createselector-for-rtkq",children:["Customizing ",(0,o.jsx)(t.code,{children:"createSelector"})," for RTKQ"]}),"\n",(0,o.jsxs)(t.p,{children:["Both ",(0,o.jsx)(t.code,{children:"coreModule"})," and ",(0,o.jsx)(t.code,{children:"reactHooksModule"})," accept a ",(0,o.jsx)(t.code,{children:"createSelector"})," option which should be a selector creator instance from Reselect or with an equivalent signature."]}),"\n",(0,o.jsxs)(l.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],children:[(0,o.jsx)(i.Z,{value:"ts",children:(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",children:"import * as React from 'react'\nimport { createSelectorCreator, lruMemoize } from '@reduxjs/toolkit'\nimport {\n  buildCreateApi,\n  coreModule,\n  reactHooksModule,\n} from '@reduxjs/toolkit/query/react'\n\nconst createLruSelector = createSelectorCreator(lruMemoize)\n\nconst customCreateApi = buildCreateApi(\n  coreModule({ createSelector: createLruSelector }),\n  reactHooksModule({ createSelector: createLruSelector }),\n)\n"})})}),(0,o.jsx)(i.Z,{value:"js",children:(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-js",children:"import { createSelectorCreator, lruMemoize } from '@reduxjs/toolkit'\nimport {\n  buildCreateApi,\n  coreModule,\n  reactHooksModule,\n} from '@reduxjs/toolkit/query/react'\n\nconst createLruSelector = createSelectorCreator(lruMemoize)\n\nconst customCreateApi = buildCreateApi(\n  coreModule({ createSelector: createLruSelector }),\n  reactHooksModule({ createSelector: createLruSelector }),\n)\n"})})})]}),"\n",(0,o.jsx)(t.h2,{id:"creating-your-own-module",children:"Creating your own module"}),"\n",(0,o.jsxs)(t.p,{children:["If you want to create your own module, you should review ",(0,o.jsx)(t.a,{href:"https://github.com/reduxjs/redux-toolkit/blob/b74a52935a5840bebca5acdc8e2265e3b6497afa/src/query/react/module.ts",children:"the react-hooks module"})," to see what an implementation would look like."]}),"\n",(0,o.jsx)(t.p,{children:"Here is a very stripped down version:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-ts",metastring:"no-transpile",children:"import {\n  BaseQueryFn,\n  CoreModule,\n  EndpointDefinitions,\n  Api,\n  Module,\n  buildCreateApi,\n  coreModule,\n} from '@reduxjs/toolkit/query'\n\nexport const customModuleName = Symbol()\nexport type CustomModule = typeof customModuleName\n\ndeclare module '@reduxjs/toolkit/query' {\n  export interface ApiModules<\n    BaseQuery extends BaseQueryFn,\n    Definitions extends EndpointDefinitions,\n    ReducerPath extends string,\n    TagTypes extends string,\n  > {\n    [customModuleName]: {\n      endpoints: {\n        [K in keyof Definitions]: {\n          myEndpointProperty: string\n        }\n      }\n    }\n  }\n}\n\nexport const myModule = (): Module<CustomModule> => ({\n  name: customModuleName,\n  init(api, options, context) {\n    // initialize stuff here if you need to\n\n    return {\n      injectEndpoint(endpoint, definition) {\n        const anyApi = api as any as Api<\n          any,\n          Record<string, any>,\n          string,\n          string,\n          CustomModule | CoreModule\n        >\n        anyApi.endpoints[endpoint].myEndpointProperty = 'test'\n      },\n    }\n  },\n})\n\nexport const myCreateApi = buildCreateApi(coreModule(), myModule())\n"})})]})}function m(e={}){let{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},8049:function(e,t,r){r.d(t,{Z:()=>a});var n=r("4246");r("7378");var o=r("4870");function a(e){let{children:t,hidden:r,className:a}=e;return(0,n.jsx)("div",{role:"tabpanel",className:(0,o.Z)("tabItem_wHwb",a),hidden:r,children:t})}},5181:function(e,t,r){r.d(t,{Z:()=>y});var n=r("4246"),o=r("7378"),a=r("4870"),i=r("5403"),l=r("3620"),s=r("7090"),c=r("6180"),u=r("3418"),d=r("9073");function p(e){var t,r;return null!==(r=null===(t=o.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,o.isValidElement)(e)&&function(e){let{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw Error("Docusaurus error: Bad <Tabs> child <".concat("string"==typeof e.type?e.type:e.type.name,'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.'))}))||void 0===t?void 0:t.filter(Boolean))&&void 0!==r?r:[]}function m(e){let{value:t,tabValues:r}=e;return r.some(e=>e.value===t)}var h=r("3344");function f(e){let{className:t,block:r,selectedValue:o,selectValue:l,tabValues:s}=e,c=[],{blockElementScrollPositionUntilNextRender:u}=(0,i.o5)(),d=e=>{let t=e.currentTarget,r=s[c.indexOf(t)].value;r!==o&&(u(t),l(r))},p=e=>{var t,r;let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{let r=c.indexOf(e.currentTarget)+1;n=null!==(t=c[r])&&void 0!==t?t:c[0];break}case"ArrowLeft":{let t=c.indexOf(e.currentTarget)-1;n=null!==(r=c[t])&&void 0!==r?r:c[c.length-1]}}null==n||n.focus()};return(0,n.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":r},t),children:s.map(e=>{let{value:t,label:r,attributes:i}=e;return(0,n.jsx)("li",{role:"tab",tabIndex:o===t?0:-1,"aria-selected":o===t,ref:e=>c.push(e),onKeyDown:p,onClick:d,...i,className:(0,a.Z)("tabs__item","tabItem_l0OV",null==i?void 0:i.className,{"tabs__item--active":o===t}),children:null!=r?r:t},t)})})}function x(e){let{lazy:t,children:r,selectedValue:i}=e,l=(Array.isArray(r)?r:[r]).filter(Boolean);if(t){let e=l.find(e=>e.props.value===i);return e?(0,o.cloneElement)(e,{className:(0,a.Z)("margin-top--md",e.props.className)}):null}return(0,n.jsx)("div",{className:"margin-top--md",children:l.map((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==i}))})}function g(e){let t=function(e){let{defaultValue:t,queryString:r=!1,groupId:n}=e,a=function(e){let{values:t,children:r}=e;return(0,o.useMemo)(()=>{let e=null!=t?t:p(r).map(e=>{let{props:{value:t,label:r,attributes:n,default:o}}=e;return{value:t,label:r,attributes:n,default:o}});return!function(e){let t=(0,u.lx)(e,(e,t)=>e.value===t.value);if(t.length>0)throw Error('Docusaurus error: Duplicate values "'.concat(t.map(e=>e.value).join(", "),'" found in <Tabs>. Every value needs to be unique.'))}(e),e},[t,r])}(e),[i,h]=(0,o.useState)(()=>(function(e){var t;let{defaultValue:r,tabValues:n}=e;if(0===n.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(r){if(!m({value:r,tabValues:n}))throw Error('Docusaurus error: The <Tabs> has a defaultValue "'.concat(r,'" but none of its children has the corresponding value. Available values are: ').concat(n.map(e=>e.value).join(", "),". If you intend to show no default tab, use defaultValue={null} instead."));return r}let o=null!==(t=n.find(e=>e.default))&&void 0!==t?t:n[0];if(!o)throw Error("Unexpected error: 0 tabValues");return o.value})({defaultValue:t,tabValues:a})),[f,x]=function(e){let{queryString:t=!1,groupId:r}=e,n=(0,l.k6)(),a=function(e){let{queryString:t=!1,groupId:r}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!r)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=r?r:null}({queryString:t,groupId:r});return[(0,c._X)(a),(0,o.useCallback)(e=>{if(!a)return;let t=new URLSearchParams(n.location.search);t.set(a,e),n.replace({...n.location,search:t.toString()})},[a,n])]}({queryString:r,groupId:n}),[g,y]=function(e){let{groupId:t}=e,r=t?"docusaurus.tab.".concat(t):null,[n,a]=(0,d.Nk)(r);return[n,(0,o.useCallback)(e=>{r&&a.set(e)},[r,a])]}({groupId:n}),v=(()=>{let e=null!=f?f:g;return m({value:e,tabValues:a})?e:null})();return(0,s.Z)(()=>{v&&h(v)},[v]),{selectedValue:i,selectValue:(0,o.useCallback)(e=>{if(!m({value:e,tabValues:a}))throw Error("Can't select invalid tab value=".concat(e));h(e),x(e),y(e)},[x,y,a]),tabValues:a}}(e);return(0,n.jsxs)("div",{className:(0,a.Z)("tabs-container","tabList_J5MA"),children:[(0,n.jsx)(f,{...t,...e}),(0,n.jsx)(x,{...t,...e})]})}function y(e){let t=(0,h.Z)();return(0,n.jsx)(g,{...e,children:p(e.children)},String(t))}},980:function(e,t,r){r.d(t,{Z:function(){return l},a:function(){return i}});var n=r(7378);let o={},a=n.createContext(o);function i(e){let t=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);