<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-rtk-query/usage/cache-behavior" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>Cache Behavior | Redux Toolkit</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true property=og:image content=https://redux-toolkit.qubitpi.org/img/redux-logo-landscape.png><meta data-rh=true name=twitter:image content=https://redux-toolkit.qubitpi.org/img/redux-logo-landscape.png><meta data-rh=true property=og:url content=https://redux-toolkit.qubitpi.org/rtk-query/usage/cache-behavior><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=twitter:card content=summary><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Cache Behavior | Redux Toolkit"><meta data-rh=true name=description content="RTK Query > Usage > Cache Behavior: defaults, cache lifetimes, and tradeoffs"><meta data-rh=true property=og:description content="RTK Query > Usage > Cache Behavior: defaults, cache lifetimes, and tradeoffs"><link data-rh=true rel=icon href=/img/favicon/favicon.ico><link data-rh=true rel=canonical href=https://redux-toolkit.qubitpi.org/rtk-query/usage/cache-behavior><link data-rh=true rel=alternate href=https://redux-toolkit.qubitpi.org/rtk-query/usage/cache-behavior hreflang=en><link data-rh=true rel=alternate href=https://redux-toolkit.qubitpi.org/rtk-query/usage/cache-behavior hreflang=x-default><link rel=preconnect href=https://redux-docs-umami.up.railway.app><script async defer src=https://redux-docs-umami.up.railway.app/script.js data-website-id=616c102e-05dd-4a74-b63e-01bb52f1bc6c data-auto-track=true data-do-not-track=true data-cache=true data-exclude-search=false data-exclude-hash=false></script><link rel=stylesheet href=/assets/css/styles.d1974aab.css><script src=/assets/js/runtime~main.110c1e01.js defer></script><script src=/assets/js/main.84c046d8.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":(window.matchMedia("(prefers-color-scheme: light)").matches,"light"),document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id=__docusaurus><link rel=preload as=image href=/img/redux.svg><link rel=preload as=image href=/img/redux_white.svg><div role=region aria-label="Skip to main content"><a class=skipToContent_oPtH href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><div class=announcementBar_zJRd style=background-color:#fafbfc;color:#091E42 role=banner><div class="content_bSb_ announcementBarContent_t7IR">      
      <a href=https://redux.dev>
        <img src=/img/course-callout-wide.svg alt="Redux.dev - a new course by Mark Erikson + ui.dev - Learn more" style="margin-top: 5px;">
      </a>
      </div></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/redux.svg alt="Redux Logo" class="themedComponent_siVc themedComponent--light_hHel"><img src=/img/redux.svg alt="Redux Logo" class="themedComponent_siVc themedComponent--dark_yETr"></div><b class="navbar__title text--truncate">Redux Toolkit</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href=/introduction/getting-started>Getting Started</a><a class="navbar__item navbar__link" href=/tutorials/overview>Tutorials</a><a class="navbar__item navbar__link" href=/usage/usage-guide>Usage Guide</a><a class="navbar__item navbar__link" href=/api/configureStore>API</a><a class="navbar__item navbar__link" href=/rtk-query/overview>RTK Query</a><a href=https://github.com/reduxjs/redux-toolkit target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type=button disabled title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live=polite aria-pressed=false><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_lgto><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_U96C><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div><div class=navbarSearchContainer_bzqh></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_MB5r"><div class=docsWrapper__sE8><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type=button></button><div class=docRoot_DfVB><aside class="theme-doc-sidebar-container docSidebarContainer_c7NB"><div class=sidebarViewport_KYo0><div class=sidebar_CUen><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jmj1 menuWithAnnouncementBar_YufC"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true href=/introduction/getting-started>Introduction</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/introduction/getting-started>Getting Started</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/introduction/why-rtk-is-redux-today>Why Redux Toolkit is How To Use Redux Today</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true href=/tutorials/overview>Tutorials</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/tutorials/overview>Tutorials Overview</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/tutorials/quick-start>Quick Start</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/tutorials/typescript>TypeScript Quick Start</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/tutorials/rtk-query>RTK Query Quick Start</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true href=/usage/migrating-to-modern-redux>Using Redux Toolkit</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/usage/migrating-to-modern-redux>Migrations</a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/usage/usage-guide>Usage Guide</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/usage/usage-with-typescript>Usage With TypeScript</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/usage/immer-reducers>Writing Reducers with Immer</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/usage/nextjs>Setup with Next.js</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/api/configureStore>API Reference</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/rtk-query/overview>RTK Query</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/overview>RTK Query Overview</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/comparison>Comparison with Other Tools</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/examples>Examples</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage-with-typescript>Usage With TypeScript</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true tabindex=0 href=/rtk-query/usage/queries>Using RTK Query</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true tabindex=0 href=/rtk-query/usage/queries>Standard Usage</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/queries>Queries</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/infinite-queries>Infinite Queries</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/mutations>Mutations</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/rtk-query/usage/cache-behavior>Cache Behavior</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/automated-refetching>Automated Re-fetching</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/rtk-query/usage/conditional-fetching>Common Use Cases</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/conditional-fetching>Conditional Fetching</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/manual-cache-updates>Manual Cache Updates</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/error-handling>Error Handling</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/pagination>Pagination</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/prefetching>Prefetching</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/polling>Polling</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/customizing-queries>Customizing Queries</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/migrating-to-rtk-query>Migrating to RTK Query</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/rtk-query/usage/streaming-updates>Advanced Use Cases</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/streaming-updates>Streaming Updates</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/code-splitting>Code Splitting</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/code-generation>Code Generation</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/server-side-rendering>Server Side Rendering</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/persistence-and-rehydration>Persistence and Rehydration</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/usage-without-react-hooks>Usage Without React Hooks</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/customizing-create-api>Customizing createApi</a></ul></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/rtk-query/api/createApi>API Reference</a></div></ul></ul></nav></div></div></aside><main class=docMainContainer_a9sJ><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_Qr34"><div class=docItemContainer_tjFy><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_T5ub" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_sfvy><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>RTK Query</span><meta itemprop=position content=1><li class=breadcrumbs__item><span class=breadcrumbs__link>Using RTK Query</span><meta itemprop=position content=2><li class=breadcrumbs__item><span class=breadcrumbs__link>Standard Usage</span><meta itemprop=position content=3><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Cache Behavior</span><meta itemprop=position content=4></ul></nav><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type=button class="clean-btn tocCollapsibleButton_iI2p">On this page</button></div><div class="theme-doc-markdown markdown"><p> </p>
<header><h1>Cache Behavior</h1></header>
<p>A key feature of RTK Query is its management of cached data. When data is fetched from the server, RTK Query will store the data in the Redux store as a 'cache'. When an additional request is performed for the same data, RTK Query will provide the existing cached data rather than sending an additional request to the server.</p>
<p>RTK Query provides a number of concepts and tools to manipulate the cache behavior and adjust it to your needs.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=default-cache-behavior>Default Cache Behavior<a href=#default-cache-behavior class=hash-link aria-label="Direct link to Default Cache Behavior" title="Direct link to Default Cache Behavior">​</a></h2>
<p>With RTK Query, caching is based on:</p>
<ul>
<li>API endpoint definitions</li>
<li>The serialized query parameters used when components subscribe to data from an endpoint</li>
<li>Active subscription reference counts</li>
</ul>
<p>When a subscription is started, the parameters used with the endpoint are serialized and stored internally as a <code>queryCacheKey</code> for the request. Any future request that produces the same <code>queryCacheKey</code> (i.e. called with the same parameters, factoring serialization) will be de-duped against the original, and will share the same data and updates. i.e. two separate components performing the same request will use the same cached data.</p>
<p>When a request is attempted, if the data already exists in the cache, then that data is served and no new request is sent to the server. Otherwise, if the data does not exist in the cache, then a new request is sent, and the returned response is stored in the cache.</p>
<p>Subscriptions are reference-counted. Additional subscriptions that ask for the same endpoint+params increment the reference count. As long as there is an active 'subscription' to the data (e.g. if a component is mounted that calls a <code>useQuery</code> hook for the endpoint), then the data will remain in the cache. Once the subscription is removed (e.g. when last component subscribed to the data unmounts), after an amount of time (default 60 seconds), the data will be removed from the cache. The expiration time can be configured with the <code>keepUnusedDataFor</code> property for the <a href=/rtk-query/api/createApi#keepunuseddatafor>API definition as a whole</a>, as well as on a <a href=/rtk-query/api/createApi#keepunuseddatafor-1>per-endpoint</a> basis.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=cache-lifetime--subscription-example>Cache lifetime & subscription example<a href=#cache-lifetime--subscription-example class=hash-link aria-label="Direct link to Cache lifetime & subscription example" title="Direct link to Cache lifetime & subscription example">​</a></h3>
<p>Imagine an endpoint that expects an <code>id</code> as the query param, and 4 components mounted which are requesting data from this same endpoint:</p>
<div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> useGetUserQuery </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./api.ts'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>ComponentOne</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// component subscribes to the data</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> data </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useGetUserQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token number" style=color:#AE81FF>1</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token plain">div</span><span class="token operator" style=color:#F8F8F2>></span><span class="token operator" style=color:#F8F8F2>...</span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token operator" style=color:#F8F8F2>/</span><span class="token plain">div</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>ComponentTwo</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// component subscribes to the data</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> data </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useGetUserQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token number" style=color:#AE81FF>2</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token plain">div</span><span class="token operator" style=color:#F8F8F2>></span><span class="token operator" style=color:#F8F8F2>...</span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token operator" style=color:#F8F8F2>/</span><span class="token plain">div</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>ComponentThree</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// component subscribes to the data</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> data </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useGetUserQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token number" style=color:#AE81FF>3</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token plain">div</span><span class="token operator" style=color:#F8F8F2>></span><span class="token operator" style=color:#F8F8F2>...</span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token operator" style=color:#F8F8F2>/</span><span class="token plain">div</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>ComponentFour</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// component subscribes to the *same* data as ComponentThree,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// as it has the same query parameters</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> data </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useGetUserQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token number" style=color:#AE81FF>3</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token plain">div</span><span class="token operator" style=color:#F8F8F2>></span><span class="token operator" style=color:#F8F8F2>...</span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token operator" style=color:#F8F8F2>/</span><span class="token plain">div</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>While four components are subscribed to the endpoint, there are only three distinct combinations of endpoint + query parameters. Query parameters <code>1</code> and <code>2</code> will each have a single subscriber, while query parameter <code>3</code> has two subscribers. RTK Query will make three distinct fetches; one for each unique set of query parameters per endpoint.</p>
<p>Data is kept in the cache as long as at least one active subscriber is interested in that endpoint + parameter combination. When the subscriber reference count reaches zero, a timer is set, and if there are no new subscriptions to that data by the time the timer expires, the cached data will be removed. The default expiration is 60 seconds, which can be configured both for the <a href=/rtk-query/api/createApi#keepunuseddatafor>API definition as a whole</a>, as well as on a <a href=/rtk-query/api/createApi#keepunuseddatafor-1>per-endpoint</a> basis.</p>
<p>If 'ComponentThree' is unmounted in the example above, regardless of how much time passes, the data will remain in the cache due to 'ComponentFour' still being subscribed to the same data, and the subscribe reference count will be <code>1</code>. However, once 'ComponentFour' unmounts, the subscriber reference count will be <code>0</code>. The data will remain in the cache for the remainder of the expiration time. If no new subscription has been created before the timer expires, the cached data will finally be removed.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=manipulating-cache-behavior>Manipulating Cache Behavior<a href=#manipulating-cache-behavior class=hash-link aria-label="Direct link to Manipulating Cache Behavior" title="Direct link to Manipulating Cache Behavior">​</a></h2>
<p>On top of the default behavior, RTK Query provides a number of methods to re-fetch data earlier in scenarios where it should be considered invalid, or is otherwise deemed suitable to be 'refreshed'.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=reducing-subscription-time-with-keepunuseddatafor>Reducing subscription time with <code>keepUnusedDataFor</code><a href=#reducing-subscription-time-with-keepunuseddatafor class=hash-link aria-label="Direct link to reducing-subscription-time-with-keepunuseddatafor" title="Direct link to reducing-subscription-time-with-keepunuseddatafor">​</a></h3>
<p>As mentioned above under <a href=#default-cache-behavior>Default Cache Behavior</a> and <a href=#cache-lifetime--subscription-example>Cache lifetime & subscription example</a>, by default, data will remain in the cache for 60 seconds after the subscriber reference count hits zero.</p>
<p>This value can be configured using the <code>keepUnusedDataFor</code> option for both the API definition, as well as per-endpoint. Note that the per-endpoint version, if provided, will overrule a setting on the API definition.</p>
<p>Providing a value to <code>keepUnusedDataFor</code> as a number in seconds specifies how long the data should be kept in the cache after the subscriber reference count reaches zero.</p>
<div class="tabs-container tabList_J5MA"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_l0OV tabs__item--active">TypeScript<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_l0OV">JavaScript</ul><div class=margin-top--md><div role=tabpanel class=tabItem_wHwb><div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>keepUnusedDataFor configuration</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> createApi</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> fetchBaseQuery </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit/query/react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>type</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> Post </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./types'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> api </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createApi</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  baseQuery</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>fetchBaseQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> baseUrl</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'/'</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// global configuration for the api</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  keepUnusedDataFor</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token number" style=color:#AE81FF>30</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>endpoints</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">build</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    getPosts</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> build</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token generic-function function" style=color:#E6D874>query</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>&lt;</span><span class="token generic-function generic class-name">Post</span><span class="token generic-function generic class-name punctuation" style=color:#F8F8F2>[</span><span class="token generic-function generic class-name punctuation" style=color:#F8F8F2>]</span><span class="token generic-function generic class-name punctuation" style=color:#F8F8F2>,</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin" style=color:#a6e22e>number</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token function-variable function" style=color:#E6D874>query</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token template-string string" style=color:#a6e22e>posts</span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// configuration for an individual endpoint, overriding the api setting</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      keepUnusedDataFor</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token number" style=color:#AE81FF>5</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><div role=tabpanel class=tabItem_wHwb hidden><div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>keepUnusedDataFor configuration</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> createApi</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"> fetchBaseQuery </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit/query/react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> api </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createApi</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>baseQuery</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>fetchBaseQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>baseUrl</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'/'</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// global configuration for the api</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>keepUnusedDataFor</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token number" style=color:#AE81FF>30</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>endpoints</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">build</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>getPosts</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> build</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>query</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token function-variable function" style=color:#E6D874>query</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token template-string string" style=color:#a6e22e>posts</span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// configuration for an individual endpoint, overriding the api setting</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token literal-property property" style=color:#F92672>keepUnusedDataFor</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token number" style=color:#AE81FF>5</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=re-fetching-on-demand-with-refetchinitiate>Re-fetching on demand with <code>refetch</code>/<code>initiate</code><a href=#re-fetching-on-demand-with-refetchinitiate class=hash-link aria-label="Direct link to re-fetching-on-demand-with-refetchinitiate" title="Direct link to re-fetching-on-demand-with-refetchinitiate">​</a></h3>
<p>In order to achieve complete granular control over re-fetching data, you can use the <code>refetch</code> function returned as a result property from a <a href=/rtk-query/api/created-api/hooks#usequery><code>useQuery</code></a> or <a href=/rtk-query/api/created-api/hooks#usequerysubscription><code>useQuerySubscription</code></a> hook.</p>
<p>Calling the <code>refetch</code> function will force refetch the associated query.</p>
<p>Alternatively, you can dispatch the <code>initiate</code> thunk action for an endpoint, passing the option <code>forceRefetch: true</code> to the thunk action creator for the same effect.</p>
<div class="language-tsx codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>Force refetch example</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-tsx codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> useDispatch </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'react-redux'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> useGetPostsQuery </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./api'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#E6D874>Component</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> dispatch </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useDispatch</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> data</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> refetch </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useGetPostsQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> count</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token number" style=color:#AE81FF>5</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>handleRefetchOne</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token comment" style=color:#778090>// force re-fetches the data</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token function" style=color:#E6D874>refetch</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>handleRefetchTwo</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token comment" style=color:#778090>// has the same effect as `refetch` for the associated query</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token function" style=color:#E6D874>dispatch</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      api</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">endpoints</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">getPosts</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>initiate</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> count</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token number" style=color:#AE81FF>5</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> subscribe</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token boolean" style=color:#AE81FF>false</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> forceRefetch</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token boolean" style=color:#AE81FF>true</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag" style=color:#F92672>div</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain-text">      </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag" style=color:#F92672>button</span><span class="token tag" style=color:#F92672> </span><span class="token tag attr-name" style=color:#a6e22e>onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#F8F8F2>=</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>{</span><span class="token tag script language-javascript" style=color:#F92672>handleRefetchOne</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>}</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain-text">Force re-fetch 1</span><span class="token tag punctuation" style=color:#F8F8F2>&lt;/</span><span class="token tag" style=color:#F92672>button</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain-text">      </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag" style=color:#F92672>button</span><span class="token tag" style=color:#F92672> </span><span class="token tag attr-name" style=color:#a6e22e>onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#F8F8F2>=</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>{</span><span class="token tag script language-javascript" style=color:#F92672>handleRefetchTwo</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>}</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain-text">Force re-fetch 2</span><span class="token tag punctuation" style=color:#F8F8F2>&lt;/</span><span class="token tag" style=color:#F92672>button</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain-text">    </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;/</span><span class="token tag" style=color:#F92672>div</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=encouraging-re-fetching-with-refetchonmountorargchange>Encouraging re-fetching with <code>refetchOnMountOrArgChange</code><a href=#encouraging-re-fetching-with-refetchonmountorargchange class=hash-link aria-label="Direct link to encouraging-re-fetching-with-refetchonmountorargchange" title="Direct link to encouraging-re-fetching-with-refetchonmountorargchange">​</a></h3>
<p>Queries can be encouraged to re-fetch more frequently than usual via the <a href=/rtk-query/api/createApi#refetchonmountorargchange><code>refetchOnMountOrArgChange</code></a> property. This can be passed to the endpoint as a whole, to individual hook calls, or when dispatching the <a href=/rtk-query/api/created-api/endpoints#initiate><code>initiate</code></a> action (the name of the action creator's option is <code>forceRefetch</code>).</p>
<p><code>refetchOnMountOrArgChange</code> is used to encourage re-fetching in additional situations where the default behavior would instead serve cached data.</p>
<p><code>refetchOnMountOrArgChange</code> accepts either a boolean value, or a number as time in seconds.</p>
<p>Passing <code>false</code> (the default value) for this property will use the default behavior <a href=#default-cache-behavior>described above</a>.</p>
<p>Passing <code>true</code> for this property will cause the endpoint to always refetch when a new subscriber to the query is added. If passed to an individual hook call and not the api definition itself, then this applies only to that hook call. I.e., when the component calling the hook mounts, or the argument changes, it will always refetch, regardless of whether cached data for the endpoint + arg combination already exists.</p>
<p>Passing a <code>number</code> as a value in seconds will use the following behavior:</p>
<ul>
<li>At the time a query subscription is created:<!-- -->
<ul>
<li>if there is an existing query in the cache, it will compare the current time vs the last fulfilled timestamp for that query,</li>
<li>It will refetch if the provided amount of time in seconds has elapsed.</li>
</ul>
</li>
<li>If there is no query, it will fetch the data.</li>
<li>If there is an existing query, but the amount of time specified since the last query has not elapsed, it will serve the existing cached data.</li>
</ul>
<div class="tabs-container tabList_J5MA"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_l0OV tabs__item--active">TypeScript<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_l0OV">JavaScript</ul><div class=margin-top--md><div role=tabpanel class=tabItem_wHwb><div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>Configuring re-fetching on subscription if data exceeds a given time</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> createApi</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> fetchBaseQuery </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit/query/react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>type</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> Post </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./types'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> api </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createApi</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  baseQuery</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>fetchBaseQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> baseUrl</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'/'</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// global configuration for the api</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  refetchOnMountOrArgChange</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token number" style=color:#AE81FF>30</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>endpoints</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">build</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    getPosts</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> build</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token generic-function function" style=color:#E6D874>query</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>&lt;</span><span class="token generic-function generic class-name">Post</span><span class="token generic-function generic class-name punctuation" style=color:#F8F8F2>[</span><span class="token generic-function generic class-name punctuation" style=color:#F8F8F2>]</span><span class="token generic-function generic class-name punctuation" style=color:#F8F8F2>,</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin" style=color:#a6e22e>number</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token function-variable function" style=color:#E6D874>query</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token template-string string" style=color:#a6e22e>posts</span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><div role=tabpanel class=tabItem_wHwb hidden><div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>Configuring re-fetching on subscription if data exceeds a given time</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> createApi</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"> fetchBaseQuery </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit/query/react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> api </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createApi</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>baseQuery</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>fetchBaseQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>baseUrl</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'/'</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// global configuration for the api</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>refetchOnMountOrArgChange</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token number" style=color:#AE81FF>30</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>endpoints</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">build</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>getPosts</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> build</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>query</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token function-variable function" style=color:#E6D874>query</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token template-string string" style=color:#a6e22e>posts</span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></div>
<div class="language-tsx codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>Forcing refetch on component mount</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-tsx codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> useGetPostsQuery </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./api'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#E6D874>Component</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> data </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useGetPostsQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> count</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token number" style=color:#AE81FF>5</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    </span><span class="token comment" style=color:#778090>// this overrules the api definition setting,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    </span><span class="token comment" style=color:#778090>// forcing the query to always fetch when this component is mounted</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> refetchOnMountOrArgChange</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token boolean" style=color:#AE81FF>true</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag" style=color:#F92672>div</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain-text">...</span><span class="token tag punctuation" style=color:#F8F8F2>&lt;/</span><span class="token tag" style=color:#F92672>div</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=re-fetching-on-window-focus-with-refetchonfocus>Re-fetching on window focus with <code>refetchOnFocus</code><a href=#re-fetching-on-window-focus-with-refetchonfocus class=hash-link aria-label="Direct link to re-fetching-on-window-focus-with-refetchonfocus" title="Direct link to re-fetching-on-window-focus-with-refetchonfocus">​</a></h3>
<p>The <a href=/rtk-query/api/createApi#refetchonfocus><code>refetchOnFocus</code></a> option allows you to control whether RTK Query will try to refetch all subscribed queries after the application window regains focus.</p>
<p>If you specify this option alongside <code>skip: true</code>, this will not be evaluated until skip is false.</p>
<p>Note that this requires <a href=/rtk-query/api/setupListeners><code>setupListeners</code></a> to have been called.</p>
<p>This option is available on both the api definition with <a href=/rtk-query/api/createApi><code>createApi</code></a>, as well as on the <a href=/rtk-query/api/created-api/hooks#usequery><code>useQuery</code></a>, <a href=/rtk-query/api/created-api/hooks#usequerysubscription><code>useQuerySubscription</code></a>, <a href=/rtk-query/api/created-api/hooks#uselazyquery><code>useLazyQuery</code></a>, and <a href=/rtk-query/api/created-api/hooks#uselazyquerysubscription><code>useLazyQuerySubscription</code></a> hooks.</p>
<div class="tabs-container tabList_J5MA"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_l0OV tabs__item--active">TypeScript<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_l0OV">JavaScript</ul><div class=margin-top--md><div role=tabpanel class=tabItem_wHwb><div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>src/services/api.ts</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> createApi</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> fetchBaseQuery </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit/query/react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>type</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> Post </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./types'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> api </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createApi</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  baseQuery</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>fetchBaseQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> baseUrl</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'/'</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// global configuration for the api</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  refetchOnFocus</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token boolean" style=color:#AE81FF>true</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>endpoints</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">build</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    getPosts</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> build</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token generic-function function" style=color:#E6D874>query</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>&lt;</span><span class="token generic-function generic class-name">Post</span><span class="token generic-function generic class-name punctuation" style=color:#F8F8F2>[</span><span class="token generic-function generic class-name punctuation" style=color:#F8F8F2>]</span><span class="token generic-function generic class-name punctuation" style=color:#F8F8F2>,</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin" style=color:#a6e22e>number</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token function-variable function" style=color:#E6D874>query</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token template-string string" style=color:#a6e22e>posts</span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><div role=tabpanel class=tabItem_wHwb hidden><div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>src/services/api.js</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> createApi</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"> fetchBaseQuery </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit/query/react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> api </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createApi</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>baseQuery</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>fetchBaseQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>baseUrl</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'/'</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// global configuration for the api</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>refetchOnFocus</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token boolean" style=color:#AE81FF>true</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>endpoints</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">build</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>getPosts</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> build</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>query</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token function-variable function" style=color:#E6D874>query</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token template-string string" style=color:#a6e22e>posts</span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></div>
<div class="tabs-container tabList_J5MA"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_l0OV tabs__item--active">TypeScript<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_l0OV">JavaScript</ul><div class=margin-top--md><div role=tabpanel class=tabItem_wHwb><div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>src/store.ts</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> configureStore </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> setupListeners </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit/query'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> api </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./services/api'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> store </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>configureStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  reducer</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token plain">api</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">reducerPath</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> api</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">reducer</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>middleware</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">gDM</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token function" style=color:#E6D874>gDM</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token function" style=color:#E6D874>concat</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">api</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">middleware</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// enable listener behavior for the store</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token function" style=color:#E6D874>setupListeners</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">store</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">dispatch</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>type</span><span class="token plain"> </span><span class="token class-name">RootState</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> ReturnType</span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token keyword" style=color:#F92672>typeof</span><span class="token plain"> store</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">getState</span><span class="token operator" style=color:#F8F8F2>></span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><div role=tabpanel class=tabItem_wHwb hidden><div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>src/store.js</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> configureStore </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> setupListeners </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit/query'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> api </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./services/api'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> store </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>configureStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>reducer</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token plain">api</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">reducerPath</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> api</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">reducer</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>middleware</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">gDM</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token function" style=color:#E6D874>gDM</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>concat</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">api</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">middleware</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// enable listener behavior for the store</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token function" style=color:#E6D874>setupListeners</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">store</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">dispatch</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=re-fetching-on-network-reconnection-with-refetchonreconnect>Re-fetching on network reconnection with <code>refetchOnReconnect</code><a href=#re-fetching-on-network-reconnection-with-refetchonreconnect class=hash-link aria-label="Direct link to re-fetching-on-network-reconnection-with-refetchonreconnect" title="Direct link to re-fetching-on-network-reconnection-with-refetchonreconnect">​</a></h3>
<p>The <a href=/rtk-query/api/createApi#refetchonreconnect><code>refetchOnReconnect</code></a> option on <a href=/rtk-query/api/createApi><code>createApi</code></a> allows you to control whether RTK Query will try to refetch all subscribed queries after regaining a network connection.</p>
<p>If you specify this option alongside <code>skip: true</code>, this <strong>will not be evaluated</strong> until <code>skip</code> is false.</p>
<p>Note that this requires <a href=/rtk-query/api/setupListeners><code>setupListeners</code></a> to have been called.</p>
<p>This option is available on both the api definition with <a href=/rtk-query/api/createApi><code>createApi</code></a>, as well as on the <a href=/rtk-query/api/created-api/hooks#usequery><code>useQuery</code></a>, <a href=/rtk-query/api/created-api/hooks#usequerysubscription><code>useQuerySubscription</code></a>, <a href=/rtk-query/api/created-api/hooks#uselazyquery><code>useLazyQuery</code></a>, and <a href=/rtk-query/api/created-api/hooks#uselazyquerysubscription><code>useLazyQuerySubscription</code></a> hooks.</p>
<div class="tabs-container tabList_J5MA"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_l0OV tabs__item--active">TypeScript<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_l0OV">JavaScript</ul><div class=margin-top--md><div role=tabpanel class=tabItem_wHwb><div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>src/services/api.ts</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> createApi</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> fetchBaseQuery </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit/query/react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>type</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> Post </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./types'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> api </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createApi</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  baseQuery</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>fetchBaseQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> baseUrl</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'/'</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// global configuration for the api</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  refetchOnReconnect</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token boolean" style=color:#AE81FF>true</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>endpoints</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">build</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    getPosts</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> build</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token generic-function function" style=color:#E6D874>query</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>&lt;</span><span class="token generic-function generic class-name">Post</span><span class="token generic-function generic class-name punctuation" style=color:#F8F8F2>[</span><span class="token generic-function generic class-name punctuation" style=color:#F8F8F2>]</span><span class="token generic-function generic class-name punctuation" style=color:#F8F8F2>,</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin" style=color:#a6e22e>number</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token function-variable function" style=color:#E6D874>query</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token template-string string" style=color:#a6e22e>posts</span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><div role=tabpanel class=tabItem_wHwb hidden><div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>src/services/api.js</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> createApi</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"> fetchBaseQuery </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit/query/react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> api </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createApi</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>baseQuery</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>fetchBaseQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>baseUrl</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'/'</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// global configuration for the api</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>refetchOnReconnect</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token boolean" style=color:#AE81FF>true</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>endpoints</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">build</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>getPosts</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> build</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>query</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token function-variable function" style=color:#E6D874>query</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token template-string string" style=color:#a6e22e>posts</span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></div>
<div class="tabs-container tabList_J5MA"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_l0OV tabs__item--active">TypeScript<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_l0OV">JavaScript</ul><div class=margin-top--md><div role=tabpanel class=tabItem_wHwb><div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>src/store.ts</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> configureStore </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> setupListeners </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit/query'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> api </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./services/api'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> store </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>configureStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  reducer</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token plain">api</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">reducerPath</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> api</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">reducer</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>middleware</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">gDM</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token function" style=color:#E6D874>gDM</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token function" style=color:#E6D874>concat</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">api</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">middleware</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// enable listener behavior for the store</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token function" style=color:#E6D874>setupListeners</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">store</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">dispatch</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>type</span><span class="token plain"> </span><span class="token class-name">RootState</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> ReturnType</span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token keyword" style=color:#F92672>typeof</span><span class="token plain"> store</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">getState</span><span class="token operator" style=color:#F8F8F2>></span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><div role=tabpanel class=tabItem_wHwb hidden><div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>src/store.js</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> configureStore </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> setupListeners </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit/query'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> api </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./services/api'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> store </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>configureStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>reducer</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token plain">api</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">reducerPath</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> api</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">reducer</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>middleware</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">gDM</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token function" style=color:#E6D874>gDM</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>concat</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">api</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">middleware</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// enable listener behavior for the store</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token function" style=color:#E6D874>setupListeners</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">store</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">dispatch</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=re-fetching-after-mutations-by-invalidating-cache-tags>Re-fetching after mutations by invalidating cache tags<a href=#re-fetching-after-mutations-by-invalidating-cache-tags class=hash-link aria-label="Direct link to Re-fetching after mutations by invalidating cache tags" title="Direct link to Re-fetching after mutations by invalidating cache tags">​</a></h3>
<p>RTK Query uses an optional <a href=/rtk-query/usage/automated-refetching#cache-tags>cache tag</a> system to automate re-fetching for query endpoints that have data affected by mutation endpoints.</p>
<p>See <a href=/rtk-query/usage/automated-refetching>Automated Re-fetching</a> for full details on this concept.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=tradeoffs>Tradeoffs<a href=#tradeoffs class=hash-link aria-label="Direct link to Tradeoffs" title="Direct link to Tradeoffs">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=no-normalized-or-de-duplicated-cache>No Normalized or De-duplicated Cache<a href=#no-normalized-or-de-duplicated-cache class=hash-link aria-label="Direct link to No Normalized or De-duplicated Cache" title="Direct link to No Normalized or De-duplicated Cache">​</a></h3>
<p>RTK Query deliberately <strong>does <em>not</em> implement a cache that would deduplicate identical items across multiple requests</strong>. There are several reasons for this:</p>
<ul>
<li>A fully normalized shared-across-queries cache is a <em>hard</em> problem to solve</li>
<li>We don't have the time, resources, or interest in trying to solve that right now</li>
<li>In many cases, simply re-fetching data when it's invalidated works well and is easier to understand</li>
<li>At a minimum, RTKQ can help solve the general use case of "fetch some data", which is a big pain point for a lot of people</li>
</ul>
<p>As an example, say that we have an API slice with <code>getTodos</code> and <code>getTodo</code> endpoints, and our components make the following queries:</p>
<ul>
<li><code>getTodos()</code></li>
<li><code>getTodos({filter: 'odd'})</code></li>
<li><code>getTodo({id: 1})</code></li>
</ul>
<p>Each of these query results would include a Todo object that looks like <code>{id: 1}</code>.</p>
<p>In a fully normalized de-duplicating cache, only a single copy of this Todo object would be stored. However, RTK Query saves each query result independently in the cache. So, this would result in three separate copies of this Todo being cached in the Redux store. However, if all the endpoints are consistently providing the same tags (such as <code>{type: 'Todo', id: 1}</code>), then invalidating that tag will force all the matching endpoints to refetch their data for consistency.</p>
<p>The Redux docs have always recommended <a href=https://redux.js.org/recipes/structuring-reducers/normalizing-state-shape target=_blank rel="noopener noreferrer">keeping data in a normalized lookup table</a> to enable easily finding items by ID and updating them in the store, and <a href=/api/createEntityAdapter>RTK's <code>createEntityAdapter</code></a> was designed to help manage normalized state. Those concepts are still valuable and don't go away. However, if you're using RTK Query to manage caching data, there's less need to manipulate the data that way yourself.</p>
<p>There are a couple additional points that can help here:</p>
<ul>
<li>The generated query hooks have <a href=/rtk-query/api/created-api/hooks#usequery>a <code>selectFromResult</code> option</a> that allow components to read individual pieces of data from a query result. As an example, a <code>&lt;TodoList></code> component might call <code>useTodosQuery()</code>, and each individual <code>&lt;TodoListItem></code> could use the same query hook but select from the result to get the right todo object.</li>
<li>You can use the <a href=/rtk-query/api/createApi#transformresponse><code>transformResponse</code> endpoint option</a> to modify the fetched data so that it's <a href=/rtk-query/usage/customizing-queries#customizing-query-responses-with-transformresponse>stored in a different shape</a>, such as using <code>createEntityAdapter</code> to normalize the data <em>for this one response</em> before it's inserted into the cache.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=further-information>Further information<a href=#further-information class=hash-link aria-label="Direct link to Further information" title="Direct link to Further information">​</a></h3>
<ul>
<li><a href=https://www.reddit.com/r/reactjs/comments/my9vrq/redux_toolkit_v16_alpha1_rtk_query_apis/gvxi5t7/ target=_blank rel="noopener noreferrer">Reddit: discussion of why RTKQ doesn't have a normalized cache, and tradeoffs</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=examples>Examples<a href=#examples class=hash-link aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=cache-subscription-lifetime-demo>Cache Subscription Lifetime Demo<a href=#cache-subscription-lifetime-demo class=hash-link aria-label="Direct link to Cache Subscription Lifetime Demo" title="Direct link to Cache Subscription Lifetime Demo">​</a></h3>
<p>This example is a live demo of how the subscriber reference count and the value of <code>keepUnusedDataFor</code> interact with each other. The <code>Subscriptions</code> and <code>Queries</code> (including the cached data) are shown in the demo for you to visualize (note that this can also be viewed in the <a href=https://github.com/reduxjs/redux-devtools target=_blank rel="noopener noreferrer">Redux Devtools Extension</a>).</p>
<p>Two components are mounted, each with the same endpoints query (<code>useGetUsersQuery(2)</code>). You will be able to observe that when toggling off the components, the subscriber reference count will be reduced. After toggling off both components such that the subscriber reference count reaches zero, you will observe the cached data under the <code>Queries</code> section will persist for 5 seconds (the value of <code>keepUnusedDataFor</code> provided for the endpoint in this demo). If the subscriber reference count remains at 0 for the full duration, the cached data will then be removed from the store.</p>
<iframe src="https://codesandbox.io/embed/rtk-query-cache-subscription-lifetime-example-77tn4?fontsize=12&runonclick=1&hidenavigation=1&theme=dark&module=%2Fsrc%2Fservice%2Findex.ts" style=width:100%;height:800px;border:0;border-radius:4px;overflow:hidden title=rtk-query-cache-subscription-lifetime-example allow="geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col></div><div class="col lastUpdated_ydrU"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2025-08-03T19:14:01.000Z itemprop=dateModified>Aug 3, 2025</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/rtk-query/usage/mutations><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Mutations</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/rtk-query/usage/automated-refetching><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Automated Re-fetching</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_XG6w thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#default-cache-behavior class="table-of-contents__link toc-highlight">Default Cache Behavior</a><ul><li><a href=#cache-lifetime--subscription-example class="table-of-contents__link toc-highlight">Cache lifetime & subscription example</a></ul><li><a href=#manipulating-cache-behavior class="table-of-contents__link toc-highlight">Manipulating Cache Behavior</a><ul><li><a href=#reducing-subscription-time-with-keepunuseddatafor class="table-of-contents__link toc-highlight">Reducing subscription time with <code>keepUnusedDataFor</code></a><li><a href=#re-fetching-on-demand-with-refetchinitiate class="table-of-contents__link toc-highlight">Re-fetching on demand with <code>refetch</code>/<code>initiate</code></a><li><a href=#encouraging-re-fetching-with-refetchonmountorargchange class="table-of-contents__link toc-highlight">Encouraging re-fetching with <code>refetchOnMountOrArgChange</code></a><li><a href=#re-fetching-on-window-focus-with-refetchonfocus class="table-of-contents__link toc-highlight">Re-fetching on window focus with <code>refetchOnFocus</code></a><li><a href=#re-fetching-on-network-reconnection-with-refetchonreconnect class="table-of-contents__link toc-highlight">Re-fetching on network reconnection with <code>refetchOnReconnect</code></a><li><a href=#re-fetching-after-mutations-by-invalidating-cache-tags class="table-of-contents__link toc-highlight">Re-fetching after mutations by invalidating cache tags</a></ul><li><a href=#tradeoffs class="table-of-contents__link toc-highlight">Tradeoffs</a><ul><li><a href=#no-normalized-or-de-duplicated-cache class="table-of-contents__link toc-highlight">No Normalized or De-duplicated Cache</a><li><a href=#further-information class="table-of-contents__link toc-highlight">Further information</a></ul><li><a href=#examples class="table-of-contents__link toc-highlight">Examples</a><ul><li><a href=#cache-subscription-lifetime-demo class="table-of-contents__link toc-highlight">Cache Subscription Lifetime Demo</a></ul></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class=footer__title>Docs</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/introduction/getting-started>Getting Started</a><li class=footer__item><a class=footer__link-item href=/tutorials/overview>Tutorials</a><li class=footer__item><a class=footer__link-item href=/usage/usage-guide>Usage Guide</a><li class=footer__item><a class=footer__link-item href=/api/configureStore>API Reference</a><li class=footer__item><a class=footer__link-item href=/rtk-query/overview>RTK Query</a></ul></div><div class="col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a href=http://stackoverflow.com/questions/tagged/redux target=_blank rel="noopener noreferrer" class=footer__link-item>Stack Overflow<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://discord.gg/0ZcbPKXt5bZ6au5t target=_blank rel="noopener noreferrer" class=footer__link-item>Discord<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.github.com/reduxjs/redux-toolkit target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item>
                <a href=https://www.netlify.com>
                  <img src=https://www.netlify.com/img/global/badges/netlify-light.svg alt="Deploys by Netlify">
                </a>
              </ul></div></div><div class="footer__bottom text--center"><div class=margin-bottom--sm><img src=/img/redux_white.svg alt="Redux Logo" class="footer__logo themedComponent_siVc themedComponent--light_hHel"><img src=/img/redux_white.svg alt="Redux Logo" class="footer__logo themedComponent_siVc themedComponent--dark_yETr"></div><div class=footer__copyright>Copyright © 2015–2025 Dan Abramov and the Redux documentation authors.</div></div></div></footer></div>