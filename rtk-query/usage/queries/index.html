<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-rtk-query/usage/queries" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>Queries | Redux Toolkit</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true property=og:image content=https://redux-toolkit.qubitpi.org/img/redux-logo-landscape.png><meta data-rh=true name=twitter:image content=https://redux-toolkit.qubitpi.org/img/redux-logo-landscape.png><meta data-rh=true property=og:url content=https://redux-toolkit.qubitpi.org/rtk-query/usage/queries><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=twitter:card content=summary><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Queries | Redux Toolkit"><meta data-rh=true name=description content="RTK Query > Usage > Queries: fetching data from a server"><meta data-rh=true property=og:description content="RTK Query > Usage > Queries: fetching data from a server"><link data-rh=true rel=icon href=/img/favicon/favicon.ico><link data-rh=true rel=canonical href=https://redux-toolkit.qubitpi.org/rtk-query/usage/queries><link data-rh=true rel=alternate href=https://redux-toolkit.qubitpi.org/rtk-query/usage/queries hreflang=en><link data-rh=true rel=alternate href=https://redux-toolkit.qubitpi.org/rtk-query/usage/queries hreflang=x-default><link rel=preconnect href=https://redux-docs-umami.up.railway.app><script async defer src=https://redux-docs-umami.up.railway.app/script.js data-website-id=616c102e-05dd-4a74-b63e-01bb52f1bc6c data-auto-track=true data-do-not-track=true data-cache=true data-exclude-search=false data-exclude-hash=false></script><link rel=stylesheet href=/assets/css/styles.c33f9cb6.css><script src=/assets/js/runtime~main.3bccd372.js defer></script><script src=/assets/js/main.bf218580.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":(window.matchMedia("(prefers-color-scheme: light)").matches,"light"),document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id=__docusaurus><link rel=preload as=image href=/img/redux.svg><link rel=preload as=image href=/img/redux_white.svg><div role=region aria-label="Skip to main content"><a class=skipToContent_oPtH href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><div class=announcementBar_zJRd style=background-color:#fafbfc;color:#091E42 role=banner><div class="content_bSb_ announcementBarContent_t7IR">      
      <a href=https://redux.dev>
        <img src=/img/course-callout-wide.svg alt="Redux.dev - a new course by Mark Erikson + ui.dev - Learn more" style="margin-top: 5px;">
      </a>
      </div></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/redux.svg alt="Redux Logo" class="themedComponent_siVc themedComponent--light_hHel"><img src=/img/redux.svg alt="Redux Logo" class="themedComponent_siVc themedComponent--dark_yETr"></div><b class="navbar__title text--truncate">Redux Toolkit</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href=/introduction/getting-started>Getting Started</a><a class="navbar__item navbar__link" href=/tutorials/overview>Tutorials</a><a class="navbar__item navbar__link" href=/usage/usage-guide>Usage Guide</a><a class="navbar__item navbar__link" href=/api/configureStore>API</a><a class="navbar__item navbar__link" href=/rtk-query/overview>RTK Query</a><a href=https://github.com/reduxjs/redux-toolkit target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type=button disabled title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live=polite aria-pressed=false><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_lgto><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_U96C><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div><div class=navbarSearchContainer_bzqh></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_MB5r"><div class=docsWrapper__sE8><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type=button></button><div class=docRoot_DfVB><aside class="theme-doc-sidebar-container docSidebarContainer_c7NB"><div class=sidebarViewport_KYo0><div class=sidebar_CUen><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jmj1 menuWithAnnouncementBar_YufC"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true href=/introduction/getting-started>Introduction</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/introduction/getting-started>Getting Started</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/introduction/why-rtk-is-redux-today>Why Redux Toolkit is How To Use Redux Today</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true href=/tutorials/overview>Tutorials</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/tutorials/overview>Tutorials Overview</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/tutorials/quick-start>Quick Start</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/tutorials/typescript>TypeScript Quick Start</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/tutorials/rtk-query>RTK Query Quick Start</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true href=/usage/migrating-to-modern-redux>Using Redux Toolkit</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/usage/migrating-to-modern-redux>Migrations</a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/usage/usage-guide>Usage Guide</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/usage/usage-with-typescript>Usage With TypeScript</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/usage/immer-reducers>Writing Reducers with Immer</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/usage/nextjs>Setup with Next.js</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/api/configureStore>API Reference</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/rtk-query/overview>RTK Query</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/overview>RTK Query Overview</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/comparison>Comparison with Other Tools</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/examples>Examples</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage-with-typescript>Usage With TypeScript</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true tabindex=0 href=/rtk-query/usage/queries>Using RTK Query</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true tabindex=0 href=/rtk-query/usage/queries>Standard Usage</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/rtk-query/usage/queries>Queries</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/infinite-queries>Infinite Queries</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/mutations>Mutations</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/cache-behavior>Cache Behavior</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/automated-refetching>Automated Re-fetching</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/rtk-query/usage/conditional-fetching>Common Use Cases</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/conditional-fetching>Conditional Fetching</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/manual-cache-updates>Manual Cache Updates</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/error-handling>Error Handling</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/pagination>Pagination</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/prefetching>Prefetching</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/polling>Polling</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/customizing-queries>Customizing Queries</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/migrating-to-rtk-query>Migrating to RTK Query</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true tabindex=0 href=/rtk-query/usage/streaming-updates>Advanced Use Cases</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/streaming-updates>Streaming Updates</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/code-splitting>Code Splitting</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/code-generation>Code Generation</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/server-side-rendering>Server Side Rendering</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/persistence-and-rehydration>Persistence and Rehydration</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/usage-without-react-hooks>Usage Without React Hooks</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/customizing-create-api>Customizing createApi</a></ul></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/rtk-query/api/createApi>API Reference</a></div></ul></ul></nav></div></div></aside><main class=docMainContainer_a9sJ><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_Qr34"><div class=docItemContainer_tjFy><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_T5ub" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_sfvy><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>RTK Query</span><meta itemprop=position content=1><li class=breadcrumbs__item><span class=breadcrumbs__link>Using RTK Query</span><meta itemprop=position content=2><li class=breadcrumbs__item><span class=breadcrumbs__link>Standard Usage</span><meta itemprop=position content=3><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Queries</span><meta itemprop=position content=4></ul></nav><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type=button class="clean-btn tocCollapsibleButton_iI2p">On this page</button></div><div class="theme-doc-markdown markdown"><p> </p>
<header><h1>Queries</h1></header>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=overview>Overview<a href=#overview class=hash-link aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>Queries are operations that fetch data from the server and cache it within the client. This is the most common use case for RTK Query. A query operation can be performed with any data fetching library of your choice, but the general recommendation is that you only use queries for requests that retrieve data. For anything that alters data on the server or will possibly invalidate the cache, you should use a <a href=/rtk-query/usage/mutations>Mutation</a>.</p>
<p>A query can cache the status and result of any async/promise method. Since the most common type of query is an HTTP request, RTK Query ships with <a href=/rtk-query/api/fetchBaseQuery><code>fetchBaseQuery</code></a>, which is a lightweight <a href=https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API target=_blank rel="noopener noreferrer"><code>fetch</code></a> wrapper that automatically handles request headers and response parsing in a manner similar to common libraries like <code>axios</code>. See <a href=/rtk-query/usage/customizing-queries>Customizing Queries</a> if <code>fetchBaseQuery</code> does not handle your requirements.</p>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class=admonitionHeading_GCBg><span class=admonitionIcon_L39b><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg></span>info</div><div class=admonitionContent_pbrs><p>Depending on your environment, you may need to polyfill <code>fetch</code> with <code>node-fetch</code> or <code>cross-fetch</code> if you choose to use <code>fetchBaseQuery</code> or <code>fetch</code> on its own.</div></div>
<p>See <a href=/rtk-query/api/created-api/hooks#usequery><code>useQuery</code></a> for the hook signature and additional details.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=defining-query-endpoints>Defining Query Endpoints<a href=#defining-query-endpoints class=hash-link aria-label="Direct link to Defining Query Endpoints" title="Direct link to Defining Query Endpoints">​</a></h2>
<p>Query endpoints are defined by returning an object inside the <code>endpoints</code> section of <code>createApi</code>, and defining the fields using the <code>build.query()</code> method.</p>
<p>Query endpoints should define either a <code>query</code> callback that constructs the URL (including any URL query params), or <a href=/rtk-query/usage/customizing-queries#customizing-queries-with-queryfn>a <code>queryFn</code> callback</a> that may do arbitrary async logic and return a result.</p>
<p>If the <code>query</code> callback needs additional data to generate the URL, it should be written to take a single argument. If you need to pass in multiple parameters, pass them formatted as a single "options object".</p>
<p>Query endpoints may also modify the response contents before the result is cached, define "tags" to identify cache invalidation, and provide cache entry lifecycle callbacks to run additional logic as cache entries are added and removed.</p>
<p>When used with TypeScript, you should supply generics for the return type and the expected query argument: <code>build.query&lt;ReturnType, ArgType></code>. If there is no argument, use <code>void</code> for the arg type instead.</p>
<div class="tabs-container tabList_J5MA"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_l0OV tabs__item--active">TypeScript<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_l0OV">JavaScript</ul><div class=margin-top--md><div role=tabpanel class=tabItem_wHwb><div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>Example of all query endpoint options</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>// Or from '@reduxjs/toolkit/query/react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> createApi</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> fetchBaseQuery </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit/query'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>type</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> Post </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./types'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> api </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createApi</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  baseQuery</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>fetchBaseQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    baseUrl</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'/'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  tagTypes</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token string" style=color:#a6e22e>'Post'</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>endpoints</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">build</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    </span><span class="token comment" style=color:#778090>// The query accepts a number and returns a Post</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    getPost</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> build</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token generic-function function" style=color:#E6D874>query</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>&lt;</span><span class="token generic-function generic class-name">Post</span><span class="token generic-function generic class-name punctuation" style=color:#F8F8F2>,</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin" style=color:#a6e22e>number</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// note: an optional `queryFn` may be used in place of `query`</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token function-variable function" style=color:#E6D874>query</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">id</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> url</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token template-string string" style=color:#a6e22e>post/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#F8F8F2>${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#F8F8F2>}</span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// Pick out data and prevent nested properties in a hook or selector</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token function-variable function" style=color:#E6D874>transformResponse</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">response</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> data</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> Post </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> meta</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> arg</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> response</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">data</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// Pick out errors and prevent nested properties in a hook or selector</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token function-variable function" style=color:#E6D874>transformErrorResponse</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">        response</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> status</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token builtin" style=color:#a6e22e>string</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>|</span><span class="token plain"> </span><span class="token builtin" style=color:#a6e22e>number</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">        meta</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">        arg</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> response</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">status</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token function-variable function" style=color:#E6D874>providesTags</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">result</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> error</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> id</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> type</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'Post'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> id </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// The 2nd parameter is the destructured `QueryLifecycleApi`</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#F92672>async</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>onQueryStarted</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">        arg</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">          dispatch</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">          getState</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">          extra</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">          requestId</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">          queryFulfilled</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">          getCacheEntry</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">          updateCachedData</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// The 2nd parameter is the destructured `QueryCacheLifecycleApi`</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#F92672>async</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>onCacheEntryAdded</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">        arg</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">          dispatch</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">          getState</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">          extra</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">          requestId</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">          cacheEntryRemoved</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">          cacheDataLoaded</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">          getCacheEntry</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">          updateCachedData</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">        </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><div role=tabpanel class=tabItem_wHwb hidden><div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>Example of all query endpoint options</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>// Or from '@reduxjs/toolkit/query/react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> createApi</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"> fetchBaseQuery </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit/query'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> api </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createApi</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>baseQuery</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>fetchBaseQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>baseUrl</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'/'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token literal-property property" style=color:#F92672>tagTypes</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token string" style=color:#a6e22e>'Post'</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>endpoints</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">build</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    </span><span class="token comment" style=color:#778090>// The query accepts a number and returns a Post</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>getPost</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> build</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>query</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// note: an optional `queryFn` may be used in place of `query`</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token function-variable function" style=color:#E6D874>query</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">id</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>url</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token template-string string" style=color:#a6e22e>post/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#F8F8F2>${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#F8F8F2>}</span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// Pick out data and prevent nested properties in a hook or selector</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token function-variable function" style=color:#E6D874>transformResponse</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">response</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> meta</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> arg</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> response</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">data</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// Pick out errors and prevent nested properties in a hook or selector</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token function-variable function" style=color:#E6D874>transformErrorResponse</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">response</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> meta</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> arg</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> response</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">status</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token function-variable function" style=color:#E6D874>providesTags</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">result</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> error</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> id</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> </span><span class="token literal-property property" style=color:#F92672>type</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'Post'</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> id </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// The 2nd parameter is the destructured `QueryLifecycleApi`</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#F92672>async</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>onQueryStarted</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">        </span><span class="token parameter">arg</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token parameter">        </span><span class="token parameter punctuation" style=color:#F8F8F2>{</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token parameter">          dispatch</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token parameter">          getState</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token parameter">          extra</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token parameter">          requestId</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token parameter">          queryFulfilled</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token parameter">          getCacheEntry</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token parameter">          updateCachedData</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token parameter">        </span><span class="token parameter punctuation" style=color:#F8F8F2>}</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// The 2nd parameter is the destructured `QueryCacheLifecycleApi`</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token keyword" style=color:#F92672>async</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>onCacheEntryAdded</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">        </span><span class="token parameter">arg</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token parameter">        </span><span class="token parameter punctuation" style=color:#F8F8F2>{</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token parameter">          dispatch</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token parameter">          getState</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token parameter">          extra</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token parameter">          requestId</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token parameter">          cacheEntryRemoved</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token parameter">          cacheDataLoaded</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token parameter">          getCacheEntry</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token parameter">          updateCachedData</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token parameter">        </span><span class="token parameter punctuation" style=color:#F8F8F2>}</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=performing-queries-with-react-hooks>Performing Queries with React Hooks<a href=#performing-queries-with-react-hooks class=hash-link aria-label="Direct link to Performing Queries with React Hooks" title="Direct link to Performing Queries with React Hooks">​</a></h2>
<p>If you're using React Hooks, RTK Query does a few additional things for you. The primary benefit is that you get a render-optimized hook that allows you to have 'background fetching' as well as <a href=#frequently-used-query-hook-return-values>derived booleans</a> for convenience.</p>
<p>Hooks are automatically generated based on the name of the <code>endpoint</code> in the service definition. An endpoint field with <code>getPost: build.query()</code> will generate a hook named <code>useGetPostQuery</code>, as well as a generically-named hook attached to the endpoint, like <code>api.endpoints.getPost.useQuery</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=hook-types>Hook types<a href=#hook-types class=hash-link aria-label="Direct link to Hook types" title="Direct link to Hook types">​</a></h3>
<p>There are 5 query-related hooks:</p>
<ol>
<li><a href=/rtk-query/api/created-api/hooks#usequery><code>useQuery</code></a>
<ul>
<li>Composes <code>useQuerySubscription</code> and <code>useQueryState</code> and is the primary hook. Automatically triggers fetches of data from an endpoint, 'subscribes' the component to the cached data, and reads the request status and cached data from the Redux store.</li>
</ul>
</li>
<li><a href=/rtk-query/api/created-api/hooks#usequerysubscription><code>useQuerySubscription</code></a>
<ul>
<li>Returns a <code>refetch</code> function and accepts all hook options. Automatically triggers fetches of data from an endpoint, and 'subscribes' the component to the cached data.</li>
</ul>
</li>
<li><a href=/rtk-query/api/created-api/hooks#usequerystate><code>useQueryState</code></a>
<ul>
<li>Returns the query state and accepts <code>skip</code> and <code>selectFromResult</code>. Reads the request status and cached data from the Redux store.</li>
</ul>
</li>
<li><a href=/rtk-query/api/created-api/hooks#uselazyquery><code>useLazyQuery</code></a>
<ul>
<li>Returns a tuple with a <code>trigger</code> function, the query result, and last promise info. Similar to <code>useQuery</code>, but with manual control over when the data fetching occurs. <strong>Note: the <code>trigger</code> function takes a second argument of <code>preferCacheValue?: boolean</code> in the event you want to skip making a request if cached data already exists.</strong></li>
</ul>
</li>
<li><a href=/rtk-query/api/created-api/hooks#uselazyquerysubscription><code>useLazyQuerySubscription</code></a>
<ul>
<li>Returns a tuple with a <code>trigger</code> function, and last promise info. Similar to <code>useQuerySubscription</code>, but with manual control over when the data fetching occurs. <strong>Note: the <code>trigger</code> function takes a second argument of <code>preferCacheValue?: boolean</code> in the event you want to skip making a request if cached data already exists.</strong></li>
</ul>
</li>
</ol>
<p>In practice, the standard <code>useQuery</code>-based hooks such as <code>useGetPostQuery</code> will be the primary hooks used in your application, but the other hooks are available for specific use cases.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=query-hook-options>Query Hook Options<a href=#query-hook-options class=hash-link aria-label="Direct link to Query Hook Options" title="Direct link to Query Hook Options">​</a></h3>
<p>The query hooks expect two parameters: <code>(queryArg?, queryOptions?)</code>.</p>
<p>The <code>queryArg</code> param will be passed through to the underlying <code>query</code> callback to generate the URL.</p>
<p>The <code>queryOptions</code> object accepts several additional parameters that can be used to control the behavior of the data fetching:</p>
<ul>
<li><a href=/rtk-query/usage/conditional-fetching>skip</a> - Allows a query to 'skip' running for that render. Defaults to <code>false</code></li>
<li><a href=/rtk-query/usage/polling>pollingInterval</a> - Allows a query to automatically refetch on a provided interval, specified in milliseconds. Defaults to <code>0</code> <em>(off)</em></li>
<li><a href=#selecting-data-from-a-query-result>selectFromResult</a> - Allows altering the returned value of the hook to obtain a subset of the result, render-optimized for the returned subset.</li>
<li><a href=/rtk-query/api/createApi#refetchonmountorargchange>refetchOnMountOrArgChange</a> - Allows forcing the query to always refetch on mount (when <code>true</code> is provided). Allows forcing the query to refetch if enough time (in seconds) has passed since the last query for the same cache (when a <code>number</code> is provided). Defaults to <code>false</code></li>
<li><a href=/rtk-query/api/createApi#refetchonfocus>refetchOnFocus</a> - Allows forcing the query to refetch when the browser window regains focus. Defaults to <code>false</code></li>
<li><a href=/rtk-query/api/createApi#refetchonreconnect>refetchOnReconnect</a> - Allows forcing the query to refetch when regaining a network connection. Defaults to <code>false</code></li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class=admonitionHeading_GCBg><span class=admonitionIcon_L39b><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg></span>info</div><div class=admonitionContent_pbrs><p>All <code>refetch</code>-related options will override the defaults you may have set in <a href=/rtk-query/api/createApi>createApi</a></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=frequently-used-query-hook-return-values>Frequently Used Query Hook Return Values<a href=#frequently-used-query-hook-return-values class=hash-link aria-label="Direct link to Frequently Used Query Hook Return Values" title="Direct link to Frequently Used Query Hook Return Values">​</a></h3>
<p>The query hook returns an object containing properties such as the latest <code>data</code> for the query request, as well as status booleans for the current request lifecycle state. Below are some of the most frequently used properties. Refer to <a href=/rtk-query/api/created-api/hooks#usequery><code>useQuery</code></a> for an extensive list of all returned properties.</p>
<ul>
<li><code>data</code> - The latest returned result regardless of hook arg, if present.</li>
<li><code>currentData</code> - The latest returned result for the current hook arg, if present.</li>
<li><code>error</code> - The error result if present.</li>
<li><code>isUninitialized</code> - When true, indicates that the query has not started yet.</li>
<li><code>isLoading</code> - When true, indicates that the query is currently loading for the first time, and has no data yet. This will be <code>true</code> for the first request fired off, but <em>not</em> for subsequent requests.</li>
<li><code>isFetching</code> - When true, indicates that the query is currently fetching, but might have data from an earlier request. This will be <code>true</code> for both the first request fired off, as well as subsequent requests.</li>
<li><code>isSuccess</code> - When true, indicates that the query has data from a successful request.</li>
<li><code>isError</code> - When true, indicates that the query is in an <code>error</code> state.</li>
<li><code>refetch</code> - A function to force refetch the query</li>
</ul>
<p>In most cases, you will probably read <code>data</code> and either <code>isLoading</code> or <code>isFetching</code> in order to render your UI.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=query-hook-usage-example>Query Hook Usage Example<a href=#query-hook-usage-example class=hash-link aria-label="Direct link to Query Hook Usage Example" title="Direct link to Query Hook Usage Example">​</a></h3>
<p>Here is an example of a <code>PostDetail</code> component:</p>
<div class="language-tsx codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>Example</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-tsx codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#E6D874>PostDetail</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> id </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> id</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token builtin" style=color:#a6e22e>string</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    data</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> post</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    isFetching</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    isLoading</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useGetPostQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">id</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    pollingInterval</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token number" style=color:#AE81FF>3000</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    refetchOnMountOrArgChange</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token boolean" style=color:#AE81FF>true</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    skip</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token boolean" style=color:#AE81FF>false</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">isLoading</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag" style=color:#F92672>div</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain-text">Loading...</span><span class="token tag punctuation" style=color:#F8F8F2>&lt;/</span><span class="token tag" style=color:#F92672>div</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token operator" style=color:#F8F8F2>!</span><span class="token plain">post</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag" style=color:#F92672>div</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain-text">Missing post!</span><span class="token tag punctuation" style=color:#F8F8F2>&lt;/</span><span class="token tag" style=color:#F92672>div</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag" style=color:#F92672>div</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain-text">      </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">post</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">name</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain-text"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">isFetching </span><span class="token operator" style=color:#F8F8F2>?</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'...refetching'</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>''</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain-text"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain-text">    </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;/</span><span class="token tag" style=color:#F92672>div</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>The way that this component is setup would have some nice traits:</p>
<ol>
<li>It only shows 'Loading...' on the <strong>initial load</strong>
<ul>
<li><strong>Initial load</strong> is defined as a query that is pending and does not have data in the cache</li>
</ul>
</li>
<li>When the request is re-triggered by the polling interval, it will add '...refetching' to the post name</li>
<li>If a user closed this <code>PostDetail</code>, but then re-opened it within <a href=/rtk-query/api/createApi#keepunuseddatafor>the allowed time</a>, they would immediately be served a cached result and polling would resume with the previous behavior.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=query-loading-state>Query Loading State<a href=#query-loading-state class=hash-link aria-label="Direct link to Query Loading State" title="Direct link to Query Loading State">​</a></h3>
<p>The auto-generated React hooks created by the React-specific version of <code>createApi</code> provide <a href=#frequently-used-query-hook-return-values>derived booleans</a> that reflect the current state of a given query. Derived booleans are preferred for the generated React hooks as opposed to a <code>status</code> flag, as the derived booleans are able to provide a greater amount of detail which would not be possible with a single <code>status</code> flag, as multiple statuses may be true at a given time (such as <code>isFetching</code> and <code>isSuccess</code>).</p>
<p>For query endpoints, RTK Query maintains a semantic distinction between <code>isLoading</code> and <code>isFetching</code> in order to provide more flexibility with the derived information provided.</p>
<ul>
<li><code>isLoading</code> refers to a query being in flight for the <em>first time</em> for the given hook. No data will be available at this time.</li>
<li><code>isFetching</code> refers to a query being in flight for the given endpoint + query param combination, but not necessarily for the first time. Data may be available from an earlier request done by this hook, maybe with the previous query param.</li>
</ul>
<p>This distinction allows for greater control when handling UI behavior. For example, <code>isLoading</code> can be used to display a skeleton while loading for the first time, while <code>isFetching</code> can be used to grey out old data when changing from page 1 to page 2 or when data is invalidated and re-fetched.</p>
<div class="language-tsx codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>Managing UI behavior with Query Loading States</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-tsx codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Skeleton</span><span class="token imports"> </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./Skeleton'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> useGetPostsQuery </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./api'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>App</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> data </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> isLoading</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> isFetching</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> isError </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useGetPostsQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">isError</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag" style=color:#F92672>div</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain-text">An error has occurred!</span><span class="token tag punctuation" style=color:#F8F8F2>&lt;/</span><span class="token tag" style=color:#F92672>div</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">isLoading</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag class-name" style=color:#F92672>Skeleton</span><span class="token tag" style=color:#F92672> </span><span class="token tag punctuation" style=color:#F8F8F2>/></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag" style=color:#F92672>div</span><span class="token tag" style=color:#F92672> </span><span class="token tag attr-name" style=color:#a6e22e>className</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#F8F8F2>=</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>{</span><span class="token tag script language-javascript" style=color:#F92672>isFetching </span><span class="token tag script language-javascript operator" style=color:#F8F8F2>?</span><span class="token tag script language-javascript" style=color:#F92672> </span><span class="token tag script language-javascript string" style=color:#a6e22e>'posts--disabled'</span><span class="token tag script language-javascript" style=color:#F92672> </span><span class="token tag script language-javascript operator" style=color:#F8F8F2>:</span><span class="token tag script language-javascript" style=color:#F92672> </span><span class="token tag script language-javascript string" style=color:#a6e22e>''</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>}</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain-text">      </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">data</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>map</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">post</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag class-name" style=color:#F92672>Post</span><span class="token tag" style=color:#F92672></span><br></span><span class=token-line style=color:#f8f8f2><span class="token tag" style=color:#F92672>          </span><span class="token tag attr-name" style=color:#a6e22e>key</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#F8F8F2>=</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>{</span><span class="token tag script language-javascript" style=color:#F92672>post</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>.</span><span class="token tag script language-javascript property-access" style=color:#F92672>id</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>}</span><span class="token tag" style=color:#F92672></span><br></span><span class=token-line style=color:#f8f8f2><span class="token tag" style=color:#F92672>          </span><span class="token tag attr-name" style=color:#a6e22e>id</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#F8F8F2>=</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>{</span><span class="token tag script language-javascript" style=color:#F92672>post</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>.</span><span class="token tag script language-javascript property-access" style=color:#F92672>id</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>}</span><span class="token tag" style=color:#F92672></span><br></span><span class=token-line style=color:#f8f8f2><span class="token tag" style=color:#F92672>          </span><span class="token tag attr-name" style=color:#a6e22e>name</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#F8F8F2>=</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>{</span><span class="token tag script language-javascript" style=color:#F92672>post</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>.</span><span class="token tag script language-javascript property-access" style=color:#F92672>name</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>}</span><span class="token tag" style=color:#F92672></span><br></span><span class=token-line style=color:#f8f8f2><span class="token tag" style=color:#F92672>          </span><span class="token tag attr-name" style=color:#a6e22e>disabled</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#F8F8F2>=</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>{</span><span class="token tag script language-javascript" style=color:#F92672>isFetching</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>}</span><span class="token tag" style=color:#F92672></span><br></span><span class=token-line style=color:#f8f8f2><span class="token tag" style=color:#F92672>        </span><span class="token tag punctuation" style=color:#F8F8F2>/></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain-text"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain-text">    </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;/</span><span class="token tag" style=color:#F92672>div</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>While <code>data</code> is expected to be used in the majority of situations, <code>currentData</code> is also provided,
which allows for a further level of granularity. For example, if you wanted to show data in the UI
as translucent to represent a re-fetching state, you can use <code>data</code> in combination with <code>isFetching</code>
to achieve this. However, if you also wish to <em>only</em> show data corresponding to the current arg,
you can instead use <code>currentData</code> to achieve this.</p>
<p>In the example below, if posts are being fetched for the first time, a loading skeleton will be
shown. If posts for the current user have previously been fetched, and are re-fetching (e.g. as a
result of a mutation), the UI will show the previous data, but will grey out the data. If the user
changes, it will instead show the skeleton again as opposed to greying out data for the previous user.</p>
<div class="language-tsx codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>Managing UI behavior with currentData</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-tsx codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Skeleton</span><span class="token imports"> </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./Skeleton'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> useGetPostsByUserQuery </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./api'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>PostsList</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> userName </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> userName</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token builtin" style=color:#a6e22e>string</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> currentData</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> isFetching</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> isError </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useGetPostsByUserQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">userName</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">isError</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag" style=color:#F92672>div</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain-text">An error has occurred!</span><span class="token tag punctuation" style=color:#F8F8F2>&lt;/</span><span class="token tag" style=color:#F92672>div</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">isFetching </span><span class="token operator" style=color:#F8F8F2>&&</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>!</span><span class="token plain">currentData</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag class-name" style=color:#F92672>Skeleton</span><span class="token tag" style=color:#F92672> </span><span class="token tag punctuation" style=color:#F8F8F2>/></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag" style=color:#F92672>div</span><span class="token tag" style=color:#F92672> </span><span class="token tag attr-name" style=color:#a6e22e>className</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#F8F8F2>=</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>{</span><span class="token tag script language-javascript" style=color:#F92672>isFetching </span><span class="token tag script language-javascript operator" style=color:#F8F8F2>?</span><span class="token tag script language-javascript" style=color:#F92672> </span><span class="token tag script language-javascript string" style=color:#a6e22e>'posts--disabled'</span><span class="token tag script language-javascript" style=color:#F92672> </span><span class="token tag script language-javascript operator" style=color:#F8F8F2>:</span><span class="token tag script language-javascript" style=color:#F92672> </span><span class="token tag script language-javascript string" style=color:#a6e22e>''</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>}</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain-text">      </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">currentData</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token operator" style=color:#F8F8F2>?</span><span class="token plain"> currentData</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>map</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">post</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">            </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag class-name" style=color:#F92672>Post</span><span class="token tag" style=color:#F92672></span><br></span><span class=token-line style=color:#f8f8f2><span class="token tag" style=color:#F92672>              </span><span class="token tag attr-name" style=color:#a6e22e>key</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#F8F8F2>=</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>{</span><span class="token tag script language-javascript" style=color:#F92672>post</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>.</span><span class="token tag script language-javascript property-access" style=color:#F92672>id</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>}</span><span class="token tag" style=color:#F92672></span><br></span><span class=token-line style=color:#f8f8f2><span class="token tag" style=color:#F92672>              </span><span class="token tag attr-name" style=color:#a6e22e>id</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#F8F8F2>=</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>{</span><span class="token tag script language-javascript" style=color:#F92672>post</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>.</span><span class="token tag script language-javascript property-access" style=color:#F92672>id</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>}</span><span class="token tag" style=color:#F92672></span><br></span><span class=token-line style=color:#f8f8f2><span class="token tag" style=color:#F92672>              </span><span class="token tag attr-name" style=color:#a6e22e>name</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#F8F8F2>=</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>{</span><span class="token tag script language-javascript" style=color:#F92672>post</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>.</span><span class="token tag script language-javascript property-access" style=color:#F92672>name</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>}</span><span class="token tag" style=color:#F92672></span><br></span><span class=token-line style=color:#f8f8f2><span class="token tag" style=color:#F92672>              </span><span class="token tag attr-name" style=color:#a6e22e>disabled</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#F8F8F2>=</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>{</span><span class="token tag script language-javascript" style=color:#F92672>isFetching</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>}</span><span class="token tag" style=color:#F92672></span><br></span><span class=token-line style=color:#f8f8f2><span class="token tag" style=color:#F92672>            </span><span class="token tag punctuation" style=color:#F8F8F2>/></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">          </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'No data available'</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain-text"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain-text">    </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;/</span><span class="token tag" style=color:#F92672>div</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=query-cache-keys>Query Cache Keys<a href=#query-cache-keys class=hash-link aria-label="Direct link to Query Cache Keys" title="Direct link to Query Cache Keys">​</a></h3>
<p>When you perform a query, RTK Query automatically serializes the request parameters and creates an internal <code>queryCacheKey</code> for the request. Any future request that produces the same <code>queryCacheKey</code> will be de-duped against the original, and will share updates if a <code>refetch</code> is triggered on the query from any subscribed component.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=selecting-data-from-a-query-result>Selecting data from a query result<a href=#selecting-data-from-a-query-result class=hash-link aria-label="Direct link to Selecting data from a query result" title="Direct link to Selecting data from a query result">​</a></h3>
<p>Sometimes you may have a parent component that is subscribed to a query, and then in a child component you want to pick an item from that query. In most cases you don't want to perform an additional request for a <code>getItemById</code>-type query when you know that you already have the result.</p>
<p><code>selectFromResult</code> allows you to get a specific segment from a query result in a performant manner. When using this feature, the component will not rerender unless the underlying data of the selected item has changed. If the selected item is one element in a larger collection, it will disregard changes to elements in the same collection.</p>
<div class="language-tsx codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>Using selectFromResult to extract a single result</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-tsx codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>PostsList</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> data</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> posts </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> api</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>useGetPostsQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag" style=color:#F92672>ul</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain-text">      </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">posts</span><span class="token operator" style=color:#F8F8F2>?.</span><span class="token plain">data</span><span class="token operator" style=color:#F8F8F2>?.</span><span class="token method function property-access" style=color:#E6D874>map</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">post</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag class-name" style=color:#F92672>PostById</span><span class="token tag" style=color:#F92672> </span><span class="token tag attr-name" style=color:#a6e22e>key</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#F8F8F2>=</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>{</span><span class="token tag script language-javascript" style=color:#F92672>post</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>.</span><span class="token tag script language-javascript property-access" style=color:#F92672>id</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>}</span><span class="token tag" style=color:#F92672> </span><span class="token tag attr-name" style=color:#a6e22e>id</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#F8F8F2>=</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>{</span><span class="token tag script language-javascript" style=color:#F92672>post</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>.</span><span class="token tag script language-javascript property-access" style=color:#F92672>id</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>}</span><span class="token tag" style=color:#F92672> </span><span class="token tag punctuation" style=color:#F8F8F2>/></span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain-text"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain-text">    </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;/</span><span class="token tag" style=color:#F92672>ul</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>PostById</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> id </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> id</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token builtin" style=color:#a6e22e>number</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// Will select the post with the given id, and will only rerender if the given post's data changes</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> post </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> api</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>useGetPostsQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token keyword" style=color:#F92672>undefined</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token function-variable function" style=color:#E6D874>selectFromResult</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> data </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      post</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> data</span><span class="token operator" style=color:#F8F8F2>?.</span><span class="token method function property-access" style=color:#E6D874>find</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">post</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> post</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>===</span><span class="token plain"> id</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag" style=color:#F92672>li</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">post</span><span class="token operator" style=color:#F8F8F2>?.</span><span class="token plain">name</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token tag punctuation" style=color:#F8F8F2>&lt;/</span><span class="token tag" style=color:#F92672>li</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>Note that a shallow equality check is performed on the overall return value of <code>selectFromResult</code> to determine whether to force a rerender. i.e. it will trigger a rerender if any of the returned object values change reference. If a new array/object is created and used as a return value within the callback, it will hinder the performance benefits due to being identified as a new item each time the callback is run. When intentionally providing an empty array/object, in order to avoid re-creating it each time the callback runs, you can declare an empty array/object outside of the component in order to maintain a stable reference.</p>
<div class="language-tsx codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>Using selectFromResult with a stable empty array</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-tsx codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token comment" style=color:#778090>// An array declared here will maintain a stable reference rather than be re-created again</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> emptyArray</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token maybe-class-name">Post</span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>PostsList</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// This call will result in an initial render returning an empty array for `posts`,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// and a second render when the data is received.</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// It will trigger additional rerenders only if the `posts` data changes</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> posts </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> api</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>useGetPostsQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token keyword" style=color:#F92672>undefined</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token function-variable function" style=color:#E6D874>selectFromResult</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> data </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      posts</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> data </span><span class="token operator" style=color:#F8F8F2>??</span><span class="token plain"> emptyArray</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag" style=color:#F92672>ul</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain-text"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain-text">      </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">posts</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>map</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">post</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;</span><span class="token tag class-name" style=color:#F92672>PostById</span><span class="token tag" style=color:#F92672> </span><span class="token tag attr-name" style=color:#a6e22e>key</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#F8F8F2>=</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>{</span><span class="token tag script language-javascript" style=color:#F92672>post</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>.</span><span class="token tag script language-javascript property-access" style=color:#F92672>id</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>}</span><span class="token tag" style=color:#F92672> </span><span class="token tag attr-name" style=color:#a6e22e>id</span><span class="token tag script language-javascript script-punctuation punctuation" style=color:#F8F8F2>=</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>{</span><span class="token tag script language-javascript" style=color:#F92672>post</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>.</span><span class="token tag script language-javascript property-access" style=color:#F92672>id</span><span class="token tag script language-javascript punctuation" style=color:#F8F8F2>}</span><span class="token tag" style=color:#F92672> </span><span class="token tag punctuation" style=color:#F8F8F2>/></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain-text"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain-text">    </span><span class="token tag punctuation" style=color:#F8F8F2>&lt;/</span><span class="token tag" style=color:#F92672>ul</span><span class="token tag punctuation" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>To summarize the above behavior - the returned values must be correctly memoized. See also <a href=https://redux.js.org/usage/deriving-data-selectors target=_blank rel="noopener noreferrer">Deriving Data with Selectors</a> and <a href=https://redux.js.org/tutorials/essentials/part-8-rtk-query-advanced#selecting-values-from-results target=_blank rel="noopener noreferrer">Redux Essentials - RTK Query Advanced Patterns</a> for additional information.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=avoiding-unnecessary-requests>Avoiding unnecessary requests<a href=#avoiding-unnecessary-requests class=hash-link aria-label="Direct link to Avoiding unnecessary requests" title="Direct link to Avoiding unnecessary requests">​</a></h3>
<p>By default, if you add a component that makes the same query as an existing one, no request will be performed.</p>
<p>In some cases, you may want to skip this behavior and force a refetch - in that case, you can call <code>refetch</code> that is returned by the hook.</p>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class=admonitionHeading_GCBg><span class=admonitionIcon_L39b><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg></span>info</div><div class=admonitionContent_pbrs><p>If you're not using React Hooks, you can access <code>refetch</code> like this:<div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> status</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> data</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> error</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> refetch </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>dispatch</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  pokemonApi</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">endpoints</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">getPokemon</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token function" style=color:#E6D874>initiate</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token string" style=color:#a6e22e>'bulbasaur'</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=runtime-validation-using-schemas>Runtime Validation using Schemas<a href=#runtime-validation-using-schemas class=hash-link aria-label="Direct link to Runtime Validation using Schemas" title="Direct link to Runtime Validation using Schemas">​</a></h2>
<p>Endpoints can use any <a href=https://standardschema.dev/ target=_blank rel="noopener noreferrer">Standard Schema</a> compliant library for runtime validation of query args, responses, and errors. See <a href=/rtk-query/api/createApi#schema-validation>API reference</a> for full list of available schemas.</p>
<p>When used with TypeScript, schemas can also be used to <a href=/rtk-query/usage-with-typescript#schema-validation>infer the type of that value instead of having to declare it</a>.</p>
<p>Most commonly, you'll want to use <code>responseSchema</code> to validate the response from the server (or <code>rawResponseSchema</code> when using <code>transformResponse</code>).</p>
<div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>Using responseSchema</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> createApi</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> fetchBaseQuery </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit/query/react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>*</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>as</span><span class="token plain"> v </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'valibot'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> postSchema </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> v</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token function" style=color:#E6D874>object</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  id</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> v</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token function" style=color:#E6D874>number</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  name</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> v</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token function" style=color:#E6D874>string</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>type</span><span class="token plain"> </span><span class="token class-name">Post</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> v</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">InferOutput</span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token keyword" style=color:#F92672>typeof</span><span class="token plain"> postSchema</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> transformedPost </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> v</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token function" style=color:#E6D874>object</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token operator" style=color:#F8F8F2>...</span><span class="token plain">postSchema</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">entries</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  published_at</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> v</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token function" style=color:#E6D874>date</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>type</span><span class="token plain"> </span><span class="token class-name">TransformedPost</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> v</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">InferOutput</span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token keyword" style=color:#F92672>typeof</span><span class="token plain"> transformedPost</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> api </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>createApi</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  baseQuery</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>fetchBaseQuery</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> baseUrl</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'/'</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token function-variable function" style=color:#E6D874>endpoints</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">build</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    getPost</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> build</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token generic-function function" style=color:#E6D874>query</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>&lt;</span><span class="token generic-function generic class-name">Post</span><span class="token generic-function generic class-name punctuation" style=color:#F8F8F2>,</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name punctuation" style=color:#F8F8F2>{</span><span class="token generic-function generic class-name"> id</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>:</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin" style=color:#a6e22e>number</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name punctuation" style=color:#F8F8F2>}</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token function-variable function" style=color:#E6D874>query</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> id </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token template-string string" style=color:#a6e22e>/post/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#F8F8F2>${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#F8F8F2>}</span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      responseSchema</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> postSchema</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    getTransformedPost</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> build</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token generic-function function" style=color:#E6D874>query</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>&lt;</span><span class="token generic-function generic class-name">TransformedPost</span><span class="token generic-function generic class-name punctuation" style=color:#F8F8F2>,</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name punctuation" style=color:#F8F8F2>{</span><span class="token generic-function generic class-name"> id</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>:</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin" style=color:#a6e22e>number</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name punctuation" style=color:#F8F8F2>}</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token function-variable function" style=color:#E6D874>query</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> id </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token template-string string" style=color:#a6e22e>/post/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#F8F8F2>${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style=color:#F8F8F2>}</span><span class="token template-string template-punctuation string" style=color:#a6e22e>`</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      rawResponseSchema</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> postSchema</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token function-variable function" style=color:#E6D874>transformResponse</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">response</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        </span><span class="token operator" style=color:#F8F8F2>...</span><span class="token plain">response</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">        published_at</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">response</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">published_at</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      </span><span class="token comment" style=color:#778090>// responseSchema can still be provided, to validate the transformed response</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      responseSchema</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> transformedPost</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=example-observing-caching-behavior>Example: Observing caching behavior<a href=#example-observing-caching-behavior class=hash-link aria-label="Direct link to Example: Observing caching behavior" title="Direct link to Example: Observing caching behavior">​</a></h2>
<p>This example demonstrates request deduplication and caching behavior:</p>
<ol>
<li>The first <code>Pokemon</code> component mounts and immediately fetches 'bulbasaur'</li>
<li>A second later, another <code>Pokemon</code> component is rendered with 'bulbasaur'<!-- -->
<ul>
<li>Notice that this one doesn't ever show 'Loading...' and no new network request happens? It's using the cache here.</li>
</ul>
</li>
<li>A moment after that, a <code>Pokemon</code> component for 'pikachu' is added, and a new request happens.</li>
<li>When you click 'Refetch' for a specific <code>Pokemon</code>, it'll update all instances of that <code>Pokemon</code> with one request.</li>
</ol>
<div class="theme-admonition theme-admonition-note admonition_WCGJ alert alert--secondary"><div class=admonitionHeading_GCBg><span class=admonitionIcon_L39b><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>Try it out</div><div class=admonitionContent_pbrs><p>Click the 'Add bulbasaur' button. You'll observe the same behavior described above until you click the 'Refetch' button on one of the components.</div></div>
<iframe src="https://codesandbox.io/embed/github/reduxjs/redux-toolkit/tree/master/examples/query/react/deduping-queries?fontsize=12&runonclick=1&hidenavigation=1&theme=dark" style=width:100%;height:800px;border:0;border-radius:4px;overflow:hidden title="RTK Query - Basic query deduplication example" allow="geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col></div><div class="col lastUpdated_ydrU"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2025-05-14T12:48:29.000Z itemprop=dateModified>May 14, 2025</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/rtk-query/usage-with-typescript><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Usage With TypeScript</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/rtk-query/usage/infinite-queries><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Infinite Queries</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_XG6w thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#overview class="table-of-contents__link toc-highlight">Overview</a><li><a href=#defining-query-endpoints class="table-of-contents__link toc-highlight">Defining Query Endpoints</a><li><a href=#performing-queries-with-react-hooks class="table-of-contents__link toc-highlight">Performing Queries with React Hooks</a><ul><li><a href=#hook-types class="table-of-contents__link toc-highlight">Hook types</a><li><a href=#query-hook-options class="table-of-contents__link toc-highlight">Query Hook Options</a><li><a href=#frequently-used-query-hook-return-values class="table-of-contents__link toc-highlight">Frequently Used Query Hook Return Values</a><li><a href=#query-hook-usage-example class="table-of-contents__link toc-highlight">Query Hook Usage Example</a><li><a href=#query-loading-state class="table-of-contents__link toc-highlight">Query Loading State</a><li><a href=#query-cache-keys class="table-of-contents__link toc-highlight">Query Cache Keys</a><li><a href=#selecting-data-from-a-query-result class="table-of-contents__link toc-highlight">Selecting data from a query result</a><li><a href=#avoiding-unnecessary-requests class="table-of-contents__link toc-highlight">Avoiding unnecessary requests</a></ul><li><a href=#runtime-validation-using-schemas class="table-of-contents__link toc-highlight">Runtime Validation using Schemas</a><li><a href=#example-observing-caching-behavior class="table-of-contents__link toc-highlight">Example: Observing caching behavior</a></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class=footer__title>Docs</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/introduction/getting-started>Getting Started</a><li class=footer__item><a class=footer__link-item href=/tutorials/overview>Tutorials</a><li class=footer__item><a class=footer__link-item href=/usage/usage-guide>Usage Guide</a><li class=footer__item><a class=footer__link-item href=/api/configureStore>API Reference</a><li class=footer__item><a class=footer__link-item href=/rtk-query/overview>RTK Query</a></ul></div><div class="col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a href=http://stackoverflow.com/questions/tagged/redux target=_blank rel="noopener noreferrer" class=footer__link-item>Stack Overflow<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://discord.gg/0ZcbPKXt5bZ6au5t target=_blank rel="noopener noreferrer" class=footer__link-item>Discord<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.github.com/reduxjs/redux-toolkit target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item>
                <a href=https://www.netlify.com>
                  <img src=https://www.netlify.com/img/global/badges/netlify-light.svg alt="Deploys by Netlify">
                </a>
              </ul></div></div><div class="footer__bottom text--center"><div class=margin-bottom--sm><img src=/img/redux_white.svg alt="Redux Logo" class="footer__logo themedComponent_siVc themedComponent--light_hHel"><img src=/img/redux_white.svg alt="Redux Logo" class="footer__logo themedComponent_siVc themedComponent--dark_yETr"></div><div class=footer__copyright>Copyright © 2015–2025 Dan Abramov and the Redux documentation authors.</div></div></div></footer></div>