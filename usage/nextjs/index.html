<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-usage/nextjs" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.6.3"><title data-rh=true>Redux Toolkit Setup with Next.js | Redux Toolkit</title><meta data-rh=true name=viewport content="width=device-width,initial-scale=1.0"><meta data-rh=true property=og:image content=https://redux-toolkit.qubitpi.org/img/redux-logo-landscape.png><meta data-rh=true name=twitter:image content=https://redux-toolkit.qubitpi.org/img/redux-logo-landscape.png><meta data-rh=true property=og:url content=https://redux-toolkit.qubitpi.org/usage/nextjs><meta data-rh=true property=og:locale content=en><meta data-rh=true name=docusaurus_locale content=en><meta data-rh=true name=docsearch:language content=en><meta data-rh=true name=twitter:card content=summary><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="Redux Toolkit Setup with Next.js | Redux Toolkit"><meta data-rh=true name=description content=&amp;nbsp;><meta data-rh=true property=og:description content=&amp;nbsp;><link data-rh=true rel=icon href=/img/favicon/favicon.ico><link data-rh=true rel=canonical href=https://redux-toolkit.qubitpi.org/usage/nextjs><link data-rh=true rel=alternate href=https://redux-toolkit.qubitpi.org/usage/nextjs hreflang=en><link data-rh=true rel=alternate href=https://redux-toolkit.qubitpi.org/usage/nextjs hreflang=x-default><link rel=preconnect href=https://redux-docs-umami.up.railway.app><script async defer src=https://redux-docs-umami.up.railway.app/script.js data-website-id=616c102e-05dd-4a74-b63e-01bb52f1bc6c data-auto-track=true data-do-not-track=true data-cache=true data-exclude-search=false data-exclude-hash=false></script><link rel=stylesheet href=/assets/css/styles.c33f9cb6.css><script src=/assets/js/runtime~main.c73920c7.js defer></script><script src=/assets/js/main.a83199e7.js defer></script><body class=navigation-with-keyboard><script>!function(){var t,e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t=null!==e?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":(window.matchMedia("(prefers-color-scheme: light)").matches,"light"),document.documentElement.setAttribute("data-theme",t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id=__docusaurus><link rel=preload as=image href=/img/redux.svg><link rel=preload as=image href=/img/redux_white.svg><div role=region aria-label="Skip to main content"><a class=skipToContent_oPtH href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><div class=announcementBar_zJRd style=background-color:#fafbfc;color:#091E42 role=banner><div class="content_bSb_ announcementBarContent_t7IR">      
      <a href=https://redux.dev>
        <img src=/img/course-callout-wide.svg alt="Redux.dev - a new course by Mark Erikson + ui.dev - Learn more" style="margin-top: 5px;">
      </a>
      </div></div><nav aria-label=Main class="navbar navbar--fixed-top"><div class=navbar__inner><div class=navbar__items><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/><div class=navbar__logo><img src=/img/redux.svg alt="Redux Logo" class="themedComponent_siVc themedComponent--light_hHel"><img src=/img/redux.svg alt="Redux Logo" class="themedComponent_siVc themedComponent--dark_yETr"></div><b class="navbar__title text--truncate">Redux Toolkit</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href=/introduction/getting-started>Getting Started</a><a class="navbar__item navbar__link" href=/tutorials/overview>Tutorials</a><a class="navbar__item navbar__link" href=/usage/usage-guide>Usage Guide</a><a class="navbar__item navbar__link" href=/api/configureStore>API</a><a class="navbar__item navbar__link" href=/rtk-query/overview>RTK Query</a><a href=https://github.com/reduxjs/redux-toolkit target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type=button disabled title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live=polite aria-pressed=false><svg viewBox="0 0 24 24" width=24 height=24 class=lightToggleIcon_lgto><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 class=darkToggleIcon_U96C><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg></button></div><div class=navbarSearchContainer_bzqh></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="main-wrapper mainWrapper_MB5r"><div class=docsWrapper__sE8><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type=button></button><div class=docRoot_DfVB><aside class="theme-doc-sidebar-container docSidebarContainer_c7NB"><div class=sidebarViewport_KYo0><div class=sidebar_CUen><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jmj1 menuWithAnnouncementBar_YufC"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true href=/introduction/getting-started>Introduction</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/introduction/getting-started>Getting Started</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/introduction/why-rtk-is-redux-today>Why Redux Toolkit is How To Use Redux Today</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true href=/tutorials/overview>Tutorials</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/tutorials/overview>Tutorials Overview</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/tutorials/quick-start>Quick Start</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/tutorials/typescript>TypeScript Quick Start</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/tutorials/rtk-query>RTK Query Quick Start</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/usage/migrating-to-modern-redux>Using Redux Toolkit</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/usage/migrating-to-modern-redux>Migrations</a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/usage/usage-guide>Usage Guide</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/usage/usage-with-typescript>Usage With TypeScript</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/usage/immer-reducers>Writing Reducers with Immer</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/usage/nextjs>Setup with Next.js</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/api/configureStore>API Reference</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true href=/rtk-query/overview>RTK Query</a></div><ul style=display:block;overflow:visible;height:auto class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/overview>RTK Query Overview</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/comparison>Comparison with Other Tools</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage/examples>Examples</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/rtk-query/usage-with-typescript>Usage With TypeScript</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/rtk-query/usage/queries>Using RTK Query</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/rtk-query/api/createApi>API Reference</a></div></ul></ul></nav></div></div></aside><main class=docMainContainer_a9sJ><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_Qr34"><div class=docItemContainer_tjFy><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_T5ub" aria-label=Breadcrumbs><ul class=breadcrumbs itemscope itemtype=https://schema.org/BreadcrumbList><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_sfvy><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>Using Redux Toolkit</span><meta itemprop=position content=1><li itemscope itemprop=itemListElement itemtype=https://schema.org/ListItem class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link itemprop=name>Setup with Next.js</span><meta itemprop=position content=2></ul></nav><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type=button class="clean-btn tocCollapsibleButton_iI2p">On this page</button></div><div class="theme-doc-markdown markdown"><p> </p>
<header><h1>Redux Toolkit Setup with Next.js</h1></header>
<div class="theme-admonition theme-admonition-tip admonition_WCGJ alert alert--success"><div class=admonitionHeading_GCBg><span class=admonitionIcon_L39b><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>What You'll Learn</div><div class=admonitionContent_pbrs><ul>
<li>How to set up and use Redux Toolkit with the <a href=https://nextjs.org/docs target=_blank rel="noopener noreferrer">Next.js framework</a></li>
</ul></div></div>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class=admonitionHeading_GCBg><span class=admonitionIcon_L39b><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg></span>Prerequisites</div><div class=admonitionContent_pbrs><ul>
<li>Familiarity with <a href=https://www.taniarascia.com/es6-syntax-and-feature-overview/ target=_blank rel="noopener noreferrer">ES6 syntax and features</a></li>
<li>Knowledge of React terminology: <a href=https://reactjs.org/docs/introducing-jsx.html target=_blank rel="noopener noreferrer">JSX</a>, <a href=https://reactjs.org/docs/state-and-lifecycle.html target=_blank rel="noopener noreferrer">State</a>, <a href=https://reactjs.org/docs/components-and-props.html target=_blank rel="noopener noreferrer">Function Components, Props</a>, and <a href=https://reactjs.org/docs/hooks-intro.html target=_blank rel="noopener noreferrer">Hooks</a></li>
<li>Understanding of <a href=https://redux.js.org/tutorials/fundamentals/part-2-concepts-data-flow target=_blank rel="noopener noreferrer">Redux terms and concepts</a></li>
<li>Working through the <a href=/tutorials/quick-start>Quick Start tutorial</a> and <a href=/tutorials/typescript>TypeScript Quick Start tutorial</a> is recommended, and ideally the full <a href=https://redux.js.org/tutorials/essentials/part-1-overview-concepts target=_blank rel="noopener noreferrer">Redux Essentials</a> tutorial as well</li>
</ul></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=introduction>Introduction<a href=#introduction class=hash-link aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p><a href=https://nextjs.org/docs target=_blank rel="noopener noreferrer">Next.js</a> is a popular server side rendering framework for React that presents some unique challenges for using Redux properly. These challenges include:</p>
<ul>
<li><strong>Per-request safe Redux store creation</strong>: A Next.js server can handle multiple requests simultaneously. This means that the Redux store should be created per request and that the store should not be shared across requests.</li>
<li><strong>SSR-friendly store hydration</strong>: Next.js applications are rendered twice, first on the server and again on the client. Failure to render the same page contents on both the client and the server will result in a "hydration error". So the Redux store will have to be initialized on the server and then re-initialized on the client with the same data in order to avoid hydration issues.</li>
<li><strong>SPA routing support</strong>: Next.js supports a hybrid model for client side routing. A customer's first page load will get an SSR result from the server. Subsequent page navigation will be handled by the client. This means that with a singleton store defined in the layout, route-specific data will need to be selectively reset on route navigation, while non-route-specific data will need to be retained in the store.</li>
<li><strong>Server caching friendly</strong>: Recent versions of Next.js (specifically applications using the App Router architecture) support aggressive server caching. The ideal store architecture should be compatible with this caching.</li>
</ul>
<p>There are two architectures for a Next.js application: the <a href=https://nextjs.org/docs/pages/building-your-application/routing/pages-and-layouts target=_blank rel="noopener noreferrer">Pages Router</a> and the <a href=https://nextjs.org/docs/app/building-your-application/routing target=_blank rel="noopener noreferrer">App Router</a>.</p>
<p>The Pages Router is the original architecture for Next.js. If you're using the Pages Router, Redux setup is primarily handled by using the <a href=https://github.com/kirill-konshin/next-redux-wrapper target=_blank rel="noopener noreferrer"><code>next-redux-wrapper</code> library</a>, which integrates a Redux store with the Pages router data fetching methods like <code>getServerSideProps</code>.</p>
<p><strong>This guide will focus on the App Router architecture</strong>, as it is the new default architecture option for Next.js.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=how-to-read-this-guide>How to Read This Guide<a href=#how-to-read-this-guide class=hash-link aria-label="Direct link to How to Read This Guide" title="Direct link to How to Read This Guide">​</a></h3>
<p>This page assumes that you already have an existing Next.js application based on the App Router architecture.</p>
<p>If you want to follow along, you can create a new empty Next project with <code>npx create-next-app my-app</code> - the default prompts will set up a new project with the App Router enabled. Then, add <code>@reduxjs/toolkit</code> and <code>react-redux</code> as dependencies.</p>
<p>You can also create a new Next+Redux project with <code>npx create-next-app --example with-redux my-app</code>, which includes the initial setup pieces described in this page.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=the-app-router-architecture-and-redux>The App Router Architecture and Redux<a href=#the-app-router-architecture-and-redux class=hash-link aria-label="Direct link to The App Router Architecture and Redux" title="Direct link to The App Router Architecture and Redux">​</a></h2>
<p>The primary new feature of the Next.js App Router is the addition of support for React Server Components (RSCs). RSCs are a special type of React component that only renders on the server, as opposed to "client" components that render on <strong>both</strong> the client and the server. RSCs can be defined as <code>async</code> functions and return promises during rendering as they make async requests for data to render.</p>
<p>RSCs ability to block for data requests means that with the App Router you no longer have <code>getServerSideProps</code> to fetch data for rendering. Any component in the tree can make asychronous requests for data. While this is very convenient it also means thats if you define global variables (like the Redux store) they will be shared across requests. This is a problem because the Redux store could be contaminated with data from other requests.</p>
<p>Based on the architecture of the App Router we have these general recommendations for appropriate use of Redux:</p>
<ul>
<li><strong>No global stores</strong> - Because the Redux store is shared across requests, it should not be defined as a global variable. Instead, the store should be created per request.</li>
<li><strong>RSCs should not read or write the Redux store</strong> - RSCs cannot use hooks or context. They aren't meant to be stateful. Having an RSC read or write values from a global store violates the architecture of the Next.js App Router.</li>
<li><strong>The store should only contain mutable data</strong> - We recommend that you use your Redux sparingly for data intended to be global and mutable.</li>
</ul>
<p>These recommendations are specific to applications written with the Next.js App Router. Single Page Applications (SPAs) don't execute on the server and therefore can define stores as global variables. SPAs don't need to worry about RSCs since they don't exist in SPAs. And singleton stores can store whatever data you want.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=folder-structure>Folder Structure<a href=#folder-structure class=hash-link aria-label="Direct link to Folder Structure" title="Direct link to Folder Structure">​</a></h3>
<p>Next apps can be created to have the <code>/app</code> folder either at the root, or nested under <code>/src/app</code>. Your Redux logic should go in a separate folder, alongside the <code>/app</code> folder. It's common to put the Redux logic in a folder named <code>/lib</code>, but not required.</p>
<p>The file and folder structure inside of that <code>/lib</code> folder is up to you, but we generally recommend <a href=https://redux.js.org/style-guide/#structure-files-as-feature-folders-with-single-file-logic target=_blank rel="noopener noreferrer">a "feature folder"-based structure</a> for the Redux logic.</p>
<p>A typical example might look like:</p>
<div class="codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-text codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token plain">/app</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  layout.tsx</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  page.tsx</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  StoreProvider.tsx</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">/lib</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  store.ts</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  /features</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    /todos</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      todosSlice.ts</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div>
<p>We'll use that approach for this guide.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=initial-setup>Initial Setup<a href=#initial-setup class=hash-link aria-label="Direct link to Initial Setup" title="Direct link to Initial Setup">​</a></h2>
<p>Similar to the the <a href=/tutorials/typescript>RTK TypeScript Tutorial</a>, we need to create a file for the Redux store, as well as the inferred <code>RootState</code> and <code>AppDispatch</code> types.</p>
<p>However, Next's multi-page architecture requires some differences from that single-page app setup.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=creating-a-redux-store-per-request>Creating a Redux Store per Request<a href=#creating-a-redux-store-per-request class=hash-link aria-label="Direct link to Creating a Redux Store per Request" title="Direct link to Creating a Redux Store per Request">​</a></h3>
<p>The first change is to move from defining store as a global to defining a <code>makeStore</code> function that returns a new store for each request:</p>
<div class="tabs-container tabList_J5MA"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_l0OV tabs__item--active">TypeScript<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_l0OV">JavaScript</ul><div class=margin-top--md><div role=tabpanel class=tabItem_wHwb><div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>lib/store.ts</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> configureStore </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#E6D874>makeStore</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>configureStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    reducer</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// Infer the type of makeStore</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>type</span><span class="token plain"> </span><span class="token class-name">AppStore</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> ReturnType</span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token keyword" style=color:#F92672>typeof</span><span class="token plain"> makeStore</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// Infer the `RootState` and `AppDispatch` types from the store itself</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>type</span><span class="token plain"> </span><span class="token class-name">RootState</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> ReturnType</span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token plain">AppStore</span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token string" style=color:#a6e22e>'getState'</span><span class="token punctuation" style=color:#F8F8F2>]</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>type</span><span class="token plain"> </span><span class="token class-name">AppDispatch</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> AppStore</span><span class="token punctuation" style=color:#F8F8F2>[</span><span class="token string" style=color:#a6e22e>'dispatch'</span><span class="token punctuation" style=color:#F8F8F2>]</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><div role=tabpanel class=tabItem_wHwb hidden><div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>lib/store.js</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> configureStore </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'@reduxjs/toolkit'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> </span><span class="token function-variable function" style=color:#E6D874>makeStore</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>configureStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token literal-property property" style=color:#F92672>reducer</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></div>
<p>Now we have a function, <code>makeStore</code>, that we can use to create a store instance per-request while retaining the strong type safety (if you choose to use TypeScript) that Redux Toolkit provides.</p>
<p>We don't have a <code>store</code> variable exported, but we can infer the <code>RootState</code> and <code>AppDispatch</code> types from the return type of <code>makeStore</code>.</p>
<p>You'll also want to create and export <a href=/tutorials/typescript#define-typed-hooks>pre-typed versions of the React-Redux hooks as well</a>, to simplify usage later:</p>
<div class="tabs-container tabList_J5MA"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_l0OV tabs__item--active">TypeScript<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_l0OV">JavaScript</ul><div class=margin-top--md><div role=tabpanel class=tabItem_wHwb><div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>lib/hooks.ts</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> useDispatch</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> useSelector</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> useStore </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'react-redux'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>type</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> RootState</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> AppDispatch</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> AppStore </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'./store'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// Use throughout your app instead of plain `useDispatch` and `useSelector`</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> useAppDispatch </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> useDispatch</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token generic-function function" style=color:#E6D874>withTypes</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>&lt;</span><span class="token generic-function generic class-name">AppDispatch</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> useAppSelector </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> useSelector</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token generic-function function" style=color:#E6D874>withTypes</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>&lt;</span><span class="token generic-function generic class-name">RootState</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> useAppStore </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> useStore</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token generic-function function" style=color:#E6D874>withTypes</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>&lt;</span><span class="token generic-function generic class-name">AppStore</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><div role=tabpanel class=tabItem_wHwb hidden><div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>lib/hooks.js</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> useDispatch</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"> useSelector</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"> useStore </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'react-redux'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token comment" style=color:#778090>// Use throughout your app instead of plain `useDispatch` and `useSelector`</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> useAppDispatch </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> useDispatch</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>withTypes</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> useAppSelector </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> useSelector</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>withTypes</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> useAppStore </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> useStore</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>withTypes</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=providing-the-store>Providing the Store<a href=#providing-the-store class=hash-link aria-label="Direct link to Providing the Store" title="Direct link to Providing the Store">​</a></h3>
<p>To use this new <code>makeStore</code> function we need to create a new "client" component that will create the store and share it using the React-Redux <code>Provider</code> component.</p>
<div class="tabs-container tabList_J5MA"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_l0OV tabs__item--active">TypeScript<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_l0OV">JavaScript</ul><div class=margin-top--md><div role=tabpanel class=tabItem_wHwb><div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>app/StoreProvider.tsx</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token string" style=color:#a6e22e>'use client'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> useRef </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> Provider </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'react-redux'</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> makeStore</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> AppStore </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'../lib/store'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>default</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>StoreProvider</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  children</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  children</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> React</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">ReactNode</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> storeRef </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token generic-function function" style=color:#E6D874>useRef</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>&lt;</span><span class="token generic-function generic class-name">AppStore</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token keyword" style=color:#F92672>undefined</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token operator" style=color:#F8F8F2>!</span><span class="token plain">storeRef</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">current</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    </span><span class="token comment" style=color:#778090>// Create the store instance the first time this renders</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    storeRef</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">current </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>makeStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token plain">Provider store</span><span class="token operator" style=color:#F8F8F2>=</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">storeRef</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">current</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token operator" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">children</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token operator" style=color:#F8F8F2>/</span><span class="token plain">Provider</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><div role=tabpanel class=tabItem_wHwb hidden><div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>app/StoreProvider.jsx</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token string" style=color:#a6e22e>'use client'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> useRef </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Provider</span><span class="token imports"> </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'react-redux'</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> makeStore </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'../lib/store'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>default</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function maybe-class-name" style=color:#E6D874>StoreProvider</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter punctuation" style=color:#F8F8F2>{</span><span class="token parameter"> children </span><span class="token parameter punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> storeRef </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useRef</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token keyword nil" style=color:#F92672>undefined</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token operator" style=color:#F8F8F2>!</span><span class="token plain">storeRef</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">current</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    </span><span class="token comment" style=color:#778090>// Create the store instance the first time this renders</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    storeRef</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">current</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>makeStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token maybe-class-name">Provider</span><span class="token plain"> store</span><span class="token operator" style=color:#F8F8F2>=</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">storeRef</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">current</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token operator" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">children</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token operator" style=color:#F8F8F2>/</span><span class="token maybe-class-name">Provider</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></div>
<p>In this example code we are ensuring that this client component is re-render safe by checking the value of the reference to ensure that the store is only created once. This component will only be rendered once per request on the server, but might be re-rendered multiple times on the client if there are stateful client components located above this component in the tree, or if this component also contains other mutable state that causes a re-render.</p>
<div class="theme-admonition theme-admonition-tip admonition_WCGJ alert alert--success"><div class=admonitionHeading_GCBg><span class=admonitionIcon_L39b><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>Why Client Components?</div><div class=admonitionContent_pbrs><p>Any component that interacts with the Redux store (creating it, providing it, reading from it, or writing to it) needs to be a client component. This is because <strong>accessing the store requires React context, and context is only available in client components.</strong></div></div>
<p>The next step is to <strong>include the <code>StoreProvider</code> anywhere in the tree above where the store is used</strong>. You can locate the store in the layout component if all the routes using that layout need the store. Or if the store is only used in a specific route you can create and provide the store in that route handler. In all client components further down the tree, you can use the store exactly as you would normally using the hooks provided by <code>react-redux</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=loading-initial-data>Loading Initial Data<a href=#loading-initial-data class=hash-link aria-label="Direct link to Loading Initial Data" title="Direct link to Loading Initial Data">​</a></h3>
<p>If you need to initialize the store with data from the parent component, then define that data as a prop on the client <code>StoreProvider</code> component and use a Redux action on the slice to set the data in the store as shown below.</p>
<div class="tabs-container tabList_J5MA"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_l0OV tabs__item--active">TypeScript<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_l0OV">JavaScript</ul><div class=margin-top--md><div role=tabpanel class=tabItem_wHwb><div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>src/app/StoreProvider.tsx</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token string" style=color:#a6e22e>'use client'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> useRef </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> Provider </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'react-redux'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> makeStore</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> AppStore </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'../lib/store'</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> initializeCount </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'../lib/features/counter/counterSlice'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>default</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>StoreProvider</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  count</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  children</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  count</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token builtin" style=color:#a6e22e>number</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  children</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> React</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">ReactNode</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> storeRef </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token generic-function function" style=color:#E6D874>useRef</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>&lt;</span><span class="token generic-function generic class-name">AppStore </span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>|</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name keyword" style=color:#F92672>null</span><span class="token generic-function generic class-name operator" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token keyword" style=color:#F92672>null</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token operator" style=color:#F8F8F2>!</span><span class="token plain">storeRef</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">current</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    storeRef</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">current </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>makeStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    storeRef</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">current</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token function" style=color:#E6D874>dispatch</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token function" style=color:#E6D874>initializeCount</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">count</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token plain">Provider store</span><span class="token operator" style=color:#F8F8F2>=</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">storeRef</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">current</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token operator" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">children</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token operator" style=color:#F8F8F2>/</span><span class="token plain">Provider</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><div role=tabpanel class=tabItem_wHwb hidden><div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>src/app/StoreProvider.jsx</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token string" style=color:#a6e22e>'use client'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> useRef </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Provider</span><span class="token imports"> </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'react-redux'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> makeStore </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'../lib/store'</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> initializeCount </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'../lib/features/counter/counterSlice'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>default</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function maybe-class-name" style=color:#E6D874>StoreProvider</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter punctuation" style=color:#F8F8F2>{</span><span class="token parameter"> count</span><span class="token parameter punctuation" style=color:#F8F8F2>,</span><span class="token parameter"> children </span><span class="token parameter punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> storeRef </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useRef</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token keyword null nil" style=color:#F92672>null</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token operator" style=color:#F8F8F2>!</span><span class="token plain">storeRef</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">current</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    storeRef</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">current</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>makeStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    storeRef</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">current</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>dispatch</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token function" style=color:#E6D874>initializeCount</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">count</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token maybe-class-name">Provider</span><span class="token plain"> store</span><span class="token operator" style=color:#F8F8F2>=</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">storeRef</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">current</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token operator" style=color:#F8F8F2>></span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">children</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token operator" style=color:#F8F8F2>/</span><span class="token maybe-class-name">Provider</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=additional-configuration>Additional Configuration<a href=#additional-configuration class=hash-link aria-label="Direct link to Additional Configuration" title="Direct link to Additional Configuration">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=per-route-state>Per-route state<a href=#per-route-state class=hash-link aria-label="Direct link to Per-route state" title="Direct link to Per-route state">​</a></h3>
<p>If you use Next.js's support for client side SPA-style navigation by using <code>next/navigation</code>, then when customers navigate from page to page only the route component will be re-rendered. This means that if you have a Redux store created and provided in the layout component it will be preserved across route changes. This is not a problem if you are only using the store for global, mutable data. However, if you are using the store for per-route data then you will need to reset the route-specific data in the store when the route changes.</p>
<p>Shown below is a <code>ProductName</code> example component that uses the Redux store to manage the mutable name of a product. The <code>ProductName</code> component is part of a product detail route. In order to ensure that we have the correct name in the store we need to set the value in the store any time the <code>ProductName</code> component is initially rendered, which happens on any route change to the product detail route.</p>
<div class="tabs-container tabList_J5MA"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_l0OV tabs__item--active">TypeScript<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_l0OV">JavaScript</ul><div class=margin-top--md><div role=tabpanel class=tabItem_wHwb><div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>app/ProductName.tsx</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token string" style=color:#a6e22e>'use client'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> useRef </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> useAppSelector</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> useAppDispatch</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"> useAppStore </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'../lib/hooks'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  initializeProduct</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  setProductName</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  Product</span><span class="token punctuation" style=color:#F8F8F2>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'../lib/features/product/productSlice'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>default</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>ProductName</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> product </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"> product</span><span class="token operator" style=color:#F8F8F2>:</span><span class="token plain"> Product </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// Initialize the store with the product information</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> store </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useAppStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> initialized </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useRef</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token boolean" style=color:#AE81FF>false</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token operator" style=color:#F8F8F2>!</span><span class="token plain">initialized</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">current</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    store</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token function" style=color:#E6D874>dispatch</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token function" style=color:#E6D874>initializeProduct</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">product</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    initialized</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">current </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token boolean" style=color:#AE81FF>true</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> name </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useAppSelector</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">state</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">product</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">name</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> dispatch </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useAppDispatch</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token plain">input</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      value</span><span class="token operator" style=color:#F8F8F2>=</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">name</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      onChange</span><span class="token operator" style=color:#F8F8F2>=</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">e</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token function" style=color:#E6D874>dispatch</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token function" style=color:#E6D874>setProductName</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">e</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">target</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token plain">value</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token operator" style=color:#F8F8F2>/</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><div role=tabpanel class=tabItem_wHwb hidden><div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockTitle_x_ju>app/ProductName.jsx</div><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token string" style=color:#a6e22e>'use client'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> useRef </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'react'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"> useAppSelector</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"> useAppDispatch</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"> useAppStore </span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'../lib/hooks'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>import</span><span class="token plain"> </span><span class="token imports punctuation" style=color:#F8F8F2>{</span><span class="token imports"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token imports">  initializeProduct</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token imports">  setProductName</span><span class="token imports punctuation" style=color:#F8F8F2>,</span><span class="token imports"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token imports"></span><span class="token imports punctuation" style=color:#F8F8F2>}</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>from</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'../lib/features/product/productSlice'</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword module" style=color:#F92672>default</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>function</span><span class="token plain"> </span><span class="token function maybe-class-name" style=color:#E6D874>ProductName</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter punctuation" style=color:#F8F8F2>{</span><span class="token parameter"> product </span><span class="token parameter punctuation" style=color:#F8F8F2>}</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token comment" style=color:#778090>// Initialize the store with the product information</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> store </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useAppStore</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> initialized </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useRef</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token boolean" style=color:#AE81FF>false</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token operator" style=color:#F8F8F2>!</span><span class="token plain">initialized</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">current</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    store</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token method function property-access" style=color:#E6D874>dispatch</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token function" style=color:#E6D874>initializeProduct</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">product</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">    initialized</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">current</span><span class="token plain"> </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token boolean" style=color:#AE81FF>true</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> name </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useAppSelector</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">state</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> state</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">product</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">name</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> dispatch </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token function" style=color:#E6D874>useAppDispatch</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token keyword control-flow" style=color:#F92672>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token operator" style=color:#F8F8F2>&lt;</span><span class="token plain">input</span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      value</span><span class="token operator" style=color:#F8F8F2>=</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token plain">name</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">      onChange</span><span class="token operator" style=color:#F8F8F2>=</span><span class="token punctuation" style=color:#F8F8F2>{</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token parameter">e</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"> </span><span class="token arrow operator" style=color:#F8F8F2>=></span><span class="token plain"> </span><span class="token function" style=color:#E6D874>dispatch</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token function" style=color:#E6D874>setProductName</span><span class="token punctuation" style=color:#F8F8F2>(</span><span class="token plain">e</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">target</span><span class="token punctuation" style=color:#F8F8F2>.</span><span class="token property-access">value</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token punctuation" style=color:#F8F8F2>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">    </span><span class="token operator" style=color:#F8F8F2>/</span><span class="token operator" style=color:#F8F8F2>></span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain">  </span><span class="token punctuation" style=color:#F8F8F2>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#f8f8f2><span class="token plain"></span><span class="token punctuation" style=color:#F8F8F2>}</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></div>
<p>Here we are using the same intialization pattern as before, of dispatching actions to the store, to set the route-specific data. The <code>initialized</code> ref is used to ensure that the store is only initialized once per route change.</p>
<p>It is worth noting that initializing the store with a <code>useEffect</code> would not work because <code>useEffect</code> only runs on the client. This would result in hydration errors or flicker because the result from a server side render would not match the result from the client side render.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=caching>Caching<a href=#caching class=hash-link aria-label="Direct link to Caching" title="Direct link to Caching">​</a></h3>
<p>The App Router has four separate caches including <code>fetch</code> request and route caches. The most likely cache to cause issues is the route cache. If you have an application that accepts login you may have routes (e.g. the home route, <code>/</code>) that render different data based on the user you will need to disable the route cache by using the <a href=https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#dynamic target=_blank rel="noopener noreferrer"><code>dynamic</code> export from the route handler</a>:</p>
<div class="tabs-container tabList_J5MA"><ul role=tablist aria-orientation=horizontal class=tabs><li role=tab tabindex=0 aria-selected=true class="tabs__item tabItem_l0OV tabs__item--active">TypeScript<li role=tab tabindex=-1 aria-selected=false class="tabs__item tabItem_l0OV">JavaScript</ul><div class=margin-top--md><div role=tabpanel class=tabItem_wHwb><div class="language-ts codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> dynamic </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'force-dynamic'</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div><div role=tabpanel class=tabItem_wHwb hidden><div class="language-js codeBlockContainer_mQmQ theme-code-block" style=--prism-color:#f8f8f2;--prism-background-color:#272822><div class=codeBlockContent_D5yF><pre tabindex=0 class="prism-code language-js codeBlock_RMoD thin-scrollbar" style=color:#f8f8f2;background-color:#272822><code class=codeBlockLines_AclH><span class=token-line style=color:#f8f8f2><span class="token keyword module" style=color:#F92672>export</span><span class="token plain"> </span><span class="token keyword" style=color:#F92672>const</span><span class="token plain"> dynamic </span><span class="token operator" style=color:#F8F8F2>=</span><span class="token plain"> </span><span class="token string" style=color:#a6e22e>'force-dynamic'</span><br></span></code></pre><div class=buttonGroup_aaMX><button type=button aria-label="Copy code to clipboard" title=Copy class=clean-btn><span class=copyButtonIcons_z5j7 aria-hidden=true><svg viewBox="0 0 24 24" class=copyButtonIcon_FoOz><path fill=currentColor d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"/></svg><svg viewBox="0 0 24 24" class=copyButtonSuccessIcon_L0B6><path fill=currentColor d=M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z /></svg></span></button></div></div></div></div></div></div>
<p>After a mutation you should also invalidate the cache by calling <a href=https://nextjs.org/docs/app/api-reference/functions/revalidatePath target=_blank rel="noopener noreferrer"><code>revalidatePath</code></a> or <a href=https://nextjs.org/docs/app/api-reference/functions/revalidateTag target=_blank rel="noopener noreferrer"><code>revalidateTag</code></a> as appropriate.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id=rtk-query>RTK Query<a href=#rtk-query class=hash-link aria-label="Direct link to RTK Query" title="Direct link to RTK Query">​</a></h3>
<p>We recommend using RTK Query for data fetching <strong>on the client only</strong>. Data fetching on the server should use <code>fetch</code> requests from <code>async</code> RSCs.</p>
<p>You can learn more about Redux Toolkit Query in the <a href=https://redux-toolkit.js.org/tutorials/rtk-query target=_blank rel="noopener noreferrer">Redux Toolkit Query tutorial</a>.</p>
<div class="theme-admonition theme-admonition-note admonition_WCGJ alert alert--secondary"><div class=admonitionHeading_GCBg><span class=admonitionIcon_L39b><svg viewBox="0 0 14 16"><path fill-rule=evenodd d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg></span>note</div><div class=admonitionContent_pbrs><p>In the future, RTK Query may be able to receive data fetched on the server via React Server Components, but that is a future capability that will require changes to both React and RTK Query.</div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=checking-your-work>Checking Your Work<a href=#checking-your-work class=hash-link aria-label="Direct link to Checking Your Work" title="Direct link to Checking Your Work">​</a></h2>
<p>There are three key areas that you should check to ensure that you have set up Redux Toolkit correctly:</p>
<ul>
<li><strong>Server Side Rendering</strong> - Check the HTML output of the server to ensure that the data in the Redux store is present in the server side rendered output.</li>
<li><strong>Route Change</strong> - Navigate between pages on the same route as well as between different routes to ensure that route-specific data is initialized properly.</li>
<li><strong>Mutations</strong> - Check that the store is compatible with the Next.js App Router caches by performing a mutation and then navigating away from the route and back to the original route to ensure that the data is updated.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=overall-recommendations>Overall Recommendations<a href=#overall-recommendations class=hash-link aria-label="Direct link to Overall Recommendations" title="Direct link to Overall Recommendations">​</a></h2>
<p>The App Router presents a dramatically different archtecture for React applications from either the Pages Router or a SPA application. We recommend rethinking your approach to state management in the light of this new architecture. In SPA applications it's not unusual to have a large store that contains all the data, both mutable and immutable, required to drive the application. For App Router applications we recommend that you should:</p>
<ul>
<li><strong>only use Redux for globally shared, mutable data</strong></li>
<li>use a combination of Next.js state (search params, route parameters, form state, etc.), React context and React hooks for all other state management.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id=what-youve-learned>What You've Learned<a href=#what-youve-learned class=hash-link aria-label="Direct link to What You've Learned" title="Direct link to What You've Learned">​</a></h2>
<p>That was a brief overview of how to set up and use Redux Toolkit with the App Router:</p>
<div class="theme-admonition theme-admonition-tip admonition_WCGJ alert alert--success"><div class=admonitionHeading_GCBg><span class=admonitionIcon_L39b><svg viewBox="0 0 12 16"><path fill-rule=evenodd d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"/></svg></span>Summary</div><div class=admonitionContent_pbrs><ul>
<li><strong>Create a Redux store per request by using <code>configureStore</code> wrapped in a <code>makeStore</code> function</strong></li>
<li><strong>Provide the Redux store to the React application components using a "client" component</strong></li>
<li><strong>Only interact with the Redux store in client components</strong> because only client components have access to React context</li>
<li><strong>Use the store as you normally would using the hooks provided in React-Redux</strong></li>
<li><strong>You need to account for the case where you have per-route state in a global store located in the layout</strong></li>
</ul><h2 class="anchor anchorWithStickyNavbar_JmGV" id=whats-next>What's Next?<a href=#whats-next class=hash-link aria-label="Direct link to What's Next?" title="Direct link to What's Next?">​</a></h2><p>We recommend going through <a href=https://redux.js.org/tutorials/index target=_blank rel="noopener noreferrer"><strong>the "Redux Essentials" and "Redux Fundamentals" tutorials in the Redux core docs</strong></a>, which will give you a complete understanding of how Redux works, what Redux Toolkit does, and how to use it correctly.</div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col></div><div class="col lastUpdated_ydrU"><span class=theme-last-updated>Last updated<!-- --> on <b><time datetime=2025-07-24T16:57:40.000Z itemprop=dateModified>Jul 24, 2025</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/usage/immer-reducers><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Writing Reducers with Immer</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/api/configureStore><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>configureStore</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_XG6w thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#introduction class="table-of-contents__link toc-highlight">Introduction</a><ul><li><a href=#how-to-read-this-guide class="table-of-contents__link toc-highlight">How to Read This Guide</a></ul><li><a href=#the-app-router-architecture-and-redux class="table-of-contents__link toc-highlight">The App Router Architecture and Redux</a><ul><li><a href=#folder-structure class="table-of-contents__link toc-highlight">Folder Structure</a></ul><li><a href=#initial-setup class="table-of-contents__link toc-highlight">Initial Setup</a><ul><li><a href=#creating-a-redux-store-per-request class="table-of-contents__link toc-highlight">Creating a Redux Store per Request</a><li><a href=#providing-the-store class="table-of-contents__link toc-highlight">Providing the Store</a><li><a href=#loading-initial-data class="table-of-contents__link toc-highlight">Loading Initial Data</a></ul><li><a href=#additional-configuration class="table-of-contents__link toc-highlight">Additional Configuration</a><ul><li><a href=#per-route-state class="table-of-contents__link toc-highlight">Per-route state</a><li><a href=#caching class="table-of-contents__link toc-highlight">Caching</a><li><a href=#rtk-query class="table-of-contents__link toc-highlight">RTK Query</a></ul><li><a href=#checking-your-work class="table-of-contents__link toc-highlight">Checking Your Work</a><li><a href=#overall-recommendations class="table-of-contents__link toc-highlight">Overall Recommendations</a><li><a href=#what-youve-learned class="table-of-contents__link toc-highlight">What You've Learned</a><li><a href=#whats-next class="table-of-contents__link toc-highlight">What's Next?</a></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class=footer__title>Docs</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/introduction/getting-started>Getting Started</a><li class=footer__item><a class=footer__link-item href=/tutorials/overview>Tutorials</a><li class=footer__item><a class=footer__link-item href=/usage/usage-guide>Usage Guide</a><li class=footer__item><a class=footer__link-item href=/api/configureStore>API Reference</a><li class=footer__item><a class=footer__link-item href=/rtk-query/overview>RTK Query</a></ul></div><div class="col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a href=http://stackoverflow.com/questions/tagged/redux target=_blank rel="noopener noreferrer" class=footer__link-item>Stack Overflow<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item><a href=https://discord.gg/0ZcbPKXt5bZ6au5t target=_blank rel="noopener noreferrer" class=footer__link-item>Discord<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a></ul></div><div class="col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://www.github.com/reduxjs/redux-toolkit target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-hidden=true viewBox="0 0 24 24" class=iconExternalLink_nPrP><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></svg></a><li class=footer__item>
                <a href=https://www.netlify.com>
                  <img src=https://www.netlify.com/img/global/badges/netlify-light.svg alt="Deploys by Netlify">
                </a>
              </ul></div></div><div class="footer__bottom text--center"><div class=margin-bottom--sm><img src=/img/redux_white.svg alt="Redux Logo" class="footer__logo themedComponent_siVc themedComponent--light_hHel"><img src=/img/redux_white.svg alt="Redux Logo" class="footer__logo themedComponent_siVc themedComponent--dark_yETr"></div><div class=footer__copyright>Copyright © 2015–2025 Dan Abramov and the Redux documentation authors.</div></div></div></footer></div>